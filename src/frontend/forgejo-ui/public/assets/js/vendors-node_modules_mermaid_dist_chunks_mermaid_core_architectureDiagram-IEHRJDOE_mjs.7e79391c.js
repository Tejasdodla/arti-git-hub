(self.webpackChunkforgejo=self.webpackChunkforgejo||[]).push([["vendors-node_modules_mermaid_dist_chunks_mermaid_core_architectureDiagram-IEHRJDOE_mjs"],{"./node_modules/cytoscape-fcose/cytoscape-fcose.js":function(jt,lt,pt){(function(y,o){jt.exports=o(pt("./node_modules/cytoscape-fcose/node_modules/cose-base/cose-base.js"))})(this,function(R){return(()=>{"use strict";var y={658:h=>{h.exports=Object.assign!=null?Object.assign.bind(Object):function(f){for(var e=arguments.length,v=Array(e>1?e-1:0),t=1;t<e;t++)v[t-1]=arguments[t];return v.forEach(function(a){Object.keys(a).forEach(function(l){return f[l]=a[l]})}),f}},548:(h,f,e)=>{var v=function(){function l(g,u){var T=[],c=!0,M=!1,N=void 0;try{for(var L=g[Symbol.iterator](),x;!(c=(x=L.next()).done)&&(T.push(x.value),!(u&&T.length===u));c=!0);}catch(rt){M=!0,N=rt}finally{try{!c&&L.return&&L.return()}finally{if(M)throw N}}return T}return function(g,u){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return l(g,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=e(140).layoutBase.LinkedList,a={};a.getTopMostNodes=function(l){for(var g={},u=0;u<l.length;u++)g[l[u].id()]=!0;var T=l.filter(function(c,M){typeof c=="number"&&(c=M);for(var N=c.parent()[0];N!=null;){if(g[N.id()])return!1;N=N.parent()[0]}return!0});return T},a.connectComponents=function(l,g,u,T){var c=new t,M=new Set,N=[],L=void 0,x=void 0,rt=void 0,I=!1,nt=1,gt=[],ft=[],Et=function(){var J=l.collection();ft.push(J);var r=u[0],E=l.collection();E.merge(r).merge(r.descendants().intersection(g)),N.push(r),E.forEach(function(p){c.push(p),M.add(p),J.merge(p)});for(var n=function(){r=c.shift();var S=l.collection();r.neighborhood().nodes().forEach(function(G){g.intersection(r.edgesWith(G)).length>0&&S.merge(G)});for(var O=0;O<S.length;O++){var W=S[O];if(L=u.intersection(W.union(W.ancestors())),L!=null&&!M.has(L[0])){var X=L.union(L.descendants());X.forEach(function(G){c.push(G),M.add(G),J.merge(G),u.has(G)&&N.push(G)})}}};c.length!=0;)n();if(J.forEach(function(p){g.intersection(p.connectedEdges()).forEach(function(S){J.has(S.source())&&J.has(S.target())&&J.merge(S)})}),N.length==u.length&&(I=!0),!I||I&&nt>1){x=N[0],rt=x.connectedEdges().length,N.forEach(function(p){p.connectedEdges().length<rt&&(rt=p.connectedEdges().length,x=p)}),gt.push(x.id());var m=l.collection();m.merge(N[0]),N.forEach(function(p){m.merge(p)}),N=[],u=u.difference(m),nt++}};do Et();while(!I);return T&&gt.length>0&&T.set("dummy"+(T.size+1),gt),ft},a.relocateComponent=function(l,g,u){if(!u.fixedNodeConstraint){var T=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,M=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY;if(u.quality=="draft"){var L=!0,x=!1,rt=void 0;try{for(var I=g.nodeIndexes[Symbol.iterator](),nt;!(L=(nt=I.next()).done);L=!0){var gt=nt.value,ft=v(gt,2),Et=ft[0],Y=ft[1],J=u.cy.getElementById(Et);if(J){var r=J.boundingBox(),E=g.xCoords[Y]-r.w/2,n=g.xCoords[Y]+r.w/2,m=g.yCoords[Y]-r.h/2,p=g.yCoords[Y]+r.h/2;E<T&&(T=E),n>c&&(c=n),m<M&&(M=m),p>N&&(N=p)}}}catch(G){x=!0,rt=G}finally{try{!L&&I.return&&I.return()}finally{if(x)throw rt}}var S=l.x-(c+T)/2,O=l.y-(N+M)/2;g.xCoords=g.xCoords.map(function(G){return G+S}),g.yCoords=g.yCoords.map(function(G){return G+O})}else{Object.keys(g).forEach(function(G){var tt=g[G],st=tt.getRect().x,B=tt.getRect().x+tt.getRect().width,ht=tt.getRect().y,j=tt.getRect().y+tt.getRect().height;st<T&&(T=st),B>c&&(c=B),ht<M&&(M=ht),j>N&&(N=j)});var W=l.x-(c+T)/2,X=l.y-(N+M)/2;Object.keys(g).forEach(function(G){var tt=g[G];tt.setCenter(tt.getCenterX()+W,tt.getCenterY()+X)})}}},a.calcBoundingBox=function(l,g,u,T){for(var c=Number.MAX_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,x=void 0,rt=void 0,I=void 0,nt=void 0,gt=l.descendants().not(":parent"),ft=gt.length,Et=0;Et<ft;Et++){var Y=gt[Et];x=g[T.get(Y.id())]-Y.width()/2,rt=g[T.get(Y.id())]+Y.width()/2,I=u[T.get(Y.id())]-Y.height()/2,nt=u[T.get(Y.id())]+Y.height()/2,c>x&&(c=x),M<rt&&(M=rt),N>I&&(N=I),L<nt&&(L=nt)}var J={};return J.topLeftX=c,J.topLeftY=N,J.width=M-c,J.height=L-N,J},a.calcParentsWithoutChildren=function(l,g){var u=l.collection();return g.nodes(":parent").forEach(function(T){var c=!1;T.children().forEach(function(M){M.css("display")!="none"&&(c=!0)}),c||u.merge(T)}),u},h.exports=a},816:(h,f,e)=>{var v=e(548),t=e(140).CoSELayout,a=e(140).CoSENode,l=e(140).layoutBase.PointD,g=e(140).layoutBase.DimensionD,u=e(140).layoutBase.LayoutConstants,T=e(140).layoutBase.FDLayoutConstants,c=e(140).CoSEConstants,M=function(L,x){var rt=L.cy,I=L.eles,nt=I.nodes(),gt=I.edges(),ft=void 0,Et=void 0,Y=void 0,J={};L.randomize&&(ft=x.nodeIndexes,Et=x.xCoords,Y=x.yCoords);var r=function(G){return typeof G=="function"},E=function(G,tt){return r(G)?G(tt):G},n=v.calcParentsWithoutChildren(rt,I),m=function X(G,tt,st,B){for(var ht=tt.length,j=0;j<ht;j++){var w=tt[j],$=null;w.intersection(n).length==0&&($=w.children());var k=void 0,Q=w.layoutDimensions({nodeDimensionsIncludeLabels:B.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null)if(B.randomize)if(!w.isParent())k=G.add(new a(st.graphManager,new l(Et[ft.get(w.id())]-Q.w/2,Y[ft.get(w.id())]-Q.h/2),new g(parseFloat(Q.w),parseFloat(Q.h))));else{var mt=v.calcBoundingBox(w,Et,Y,ft);w.intersection(n).length==0?k=G.add(new a(st.graphManager,new l(mt.topLeftX,mt.topLeftY),new g(mt.width,mt.height))):k=G.add(new a(st.graphManager,new l(mt.topLeftX,mt.topLeftY),new g(parseFloat(Q.w),parseFloat(Q.h))))}else k=G.add(new a(st.graphManager,new l(w.position("x")-Q.w/2,w.position("y")-Q.h/2),new g(parseFloat(Q.w),parseFloat(Q.h))));else k=G.add(new a(this.graphManager));if(k.id=w.data("id"),k.nodeRepulsion=E(B.nodeRepulsion,w),k.paddingLeft=parseInt(w.css("padding")),k.paddingTop=parseInt(w.css("padding")),k.paddingRight=parseInt(w.css("padding")),k.paddingBottom=parseInt(w.css("padding")),B.nodeDimensionsIncludeLabels&&(k.labelWidth=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,k.labelHeight=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,k.labelPosVertical=w.css("text-valign"),k.labelPosHorizontal=w.css("text-halign")),J[w.data("id")]=k,isNaN(k.rect.x)&&(k.rect.x=0),isNaN(k.rect.y)&&(k.rect.y=0),$!=null&&$.length>0){var it=void 0;it=st.getGraphManager().add(st.newGraph(),k),X(it,$,st,B)}}},p=function(G,tt,st){for(var B=0,ht=0,j=0;j<st.length;j++){var w=st[j],$=J[w.data("source")],k=J[w.data("target")];if($&&k&&$!==k&&$.getEdgesBetween(k).length==0){var Q=tt.add(G.newEdge(),$,k);Q.id=w.id(),Q.idealLength=E(L.idealEdgeLength,w),Q.edgeElasticity=E(L.edgeElasticity,w),B+=Q.idealLength,ht++}}L.idealEdgeLength!=null&&(ht>0?c.DEFAULT_EDGE_LENGTH=T.DEFAULT_EDGE_LENGTH=B/ht:r(L.idealEdgeLength)?c.DEFAULT_EDGE_LENGTH=T.DEFAULT_EDGE_LENGTH=50:c.DEFAULT_EDGE_LENGTH=T.DEFAULT_EDGE_LENGTH=L.idealEdgeLength,c.MIN_REPULSION_DIST=T.MIN_REPULSION_DIST=T.DEFAULT_EDGE_LENGTH/10,c.DEFAULT_RADIAL_SEPARATION=T.DEFAULT_EDGE_LENGTH)},S=function(G,tt){tt.fixedNodeConstraint&&(G.constraints.fixedNodeConstraint=tt.fixedNodeConstraint),tt.alignmentConstraint&&(G.constraints.alignmentConstraint=tt.alignmentConstraint),tt.relativePlacementConstraint&&(G.constraints.relativePlacementConstraint=tt.relativePlacementConstraint)};L.nestingFactor!=null&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=L.nestingFactor),L.gravity!=null&&(c.DEFAULT_GRAVITY_STRENGTH=T.DEFAULT_GRAVITY_STRENGTH=L.gravity),L.numIter!=null&&(c.MAX_ITERATIONS=T.MAX_ITERATIONS=L.numIter),L.gravityRange!=null&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=T.DEFAULT_GRAVITY_RANGE_FACTOR=L.gravityRange),L.gravityCompound!=null&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=T.DEFAULT_COMPOUND_GRAVITY_STRENGTH=L.gravityCompound),L.gravityRangeCompound!=null&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=L.gravityRangeCompound),L.initialEnergyOnIncremental!=null&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=T.DEFAULT_COOLING_FACTOR_INCREMENTAL=L.initialEnergyOnIncremental),L.tilingCompareBy!=null&&(c.TILING_COMPARE_BY=L.tilingCompareBy),L.quality=="proof"?u.QUALITY=2:u.QUALITY=0,c.NODE_DIMENSIONS_INCLUDE_LABELS=T.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=L.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=T.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!L.randomize,c.ANIMATE=T.ANIMATE=u.ANIMATE=L.animate,c.TILE=L.tile,c.TILING_PADDING_VERTICAL=typeof L.tilingPaddingVertical=="function"?L.tilingPaddingVertical.call():L.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL=typeof L.tilingPaddingHorizontal=="function"?L.tilingPaddingHorizontal.call():L.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=T.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!0,c.PURE_INCREMENTAL=!L.randomize,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=L.uniformNodeDimensions,L.step=="transformed"&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!1),L.step=="enforced"&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!1),L.step=="cose"&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!0),L.step=="all"&&(L.randomize?c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0),L.fixedNodeConstraint||L.alignmentConstraint||L.relativePlacementConstraint?c.TREE_REDUCTION_ON_INCREMENTAL=!1:c.TREE_REDUCTION_ON_INCREMENTAL=!0;var O=new t,W=O.newGraphManager();return m(W.addRoot(),v.getTopMostNodes(nt),O,L),p(O,W,gt),S(O,L),O.runLayout(),J};h.exports={coseLayout:M}},212:(h,f,e)=>{var v=function(){function L(x,rt){for(var I=0;I<rt.length;I++){var nt=rt[I];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(x,nt.key,nt)}}return function(x,rt,I){return rt&&L(x.prototype,rt),I&&L(x,I),x}}();function t(L,x){if(!(L instanceof x))throw new TypeError("Cannot call a class as a function")}var a=e(658),l=e(548),g=e(657),u=g.spectralLayout,T=e(816),c=T.coseLayout,M=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(x){return 4500},idealEdgeLength:function(x){return 50},edgeElasticity:function(x){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),N=function(){function L(x){t(this,L),this.options=a({},M,x)}return v(L,[{key:"run",value:function(){var rt=this,I=this.options,nt=I.cy,gt=I.eles,ft=[],Et=void 0,Y=void 0,J=[],r=void 0,E=[];I.fixedNodeConstraint&&(!Array.isArray(I.fixedNodeConstraint)||I.fixedNodeConstraint.length==0)&&(I.fixedNodeConstraint=void 0),I.alignmentConstraint&&(I.alignmentConstraint.vertical&&(!Array.isArray(I.alignmentConstraint.vertical)||I.alignmentConstraint.vertical.length==0)&&(I.alignmentConstraint.vertical=void 0),I.alignmentConstraint.horizontal&&(!Array.isArray(I.alignmentConstraint.horizontal)||I.alignmentConstraint.horizontal.length==0)&&(I.alignmentConstraint.horizontal=void 0)),I.relativePlacementConstraint&&(!Array.isArray(I.relativePlacementConstraint)||I.relativePlacementConstraint.length==0)&&(I.relativePlacementConstraint=void 0);var n=I.fixedNodeConstraint||I.alignmentConstraint||I.relativePlacementConstraint;n&&(I.tile=!1,I.packComponents=!1);var m=void 0,p=!1;if(nt.layoutUtilities&&I.packComponents&&(m=nt.layoutUtilities("get"),m||(m=nt.layoutUtilities()),p=!0),gt.nodes().length>0)if(p){var W=l.getTopMostNodes(I.eles.nodes());if(r=l.connectComponents(nt,I.eles,W),r.forEach(function(dt){var ct=dt.boundingBox();E.push({x:ct.x1+ct.w/2,y:ct.y1+ct.h/2})}),I.randomize&&r.forEach(function(dt){I.eles=dt,ft.push(u(I))}),I.quality=="default"||I.quality=="proof"){var X=nt.collection();if(I.tile){var G=new Map,tt=[],st=[],B=0,ht={nodeIndexes:G,xCoords:tt,yCoords:st},j=[];if(r.forEach(function(dt,ct){dt.edges().length==0&&(dt.nodes().forEach(function(xt,Dt){X.merge(dt.nodes()[Dt]),xt.isParent()||(ht.nodeIndexes.set(dt.nodes()[Dt].id(),B++),ht.xCoords.push(dt.nodes()[0].position().x),ht.yCoords.push(dt.nodes()[0].position().y))}),j.push(ct))}),X.length>1){var w=X.boundingBox();E.push({x:w.x1+w.w/2,y:w.y1+w.h/2}),r.push(X),ft.push(ht);for(var $=j.length-1;$>=0;$--)r.splice(j[$],1),ft.splice(j[$],1),E.splice(j[$],1)}}r.forEach(function(dt,ct){I.eles=dt,J.push(c(I,ft[ct])),l.relocateComponent(E[ct],J[ct],I)})}else r.forEach(function(dt,ct){l.relocateComponent(E[ct],ft[ct],I)});var k=new Set;if(r.length>1){var Q=[],mt=gt.filter(function(dt){return dt.css("display")=="none"});r.forEach(function(dt,ct){var xt=void 0;if(I.quality=="draft"&&(xt=ft[ct].nodeIndexes),dt.nodes().not(mt).length>0){var Dt={};Dt.edges=[],Dt.nodes=[];var Nt=void 0;dt.nodes().not(mt).forEach(function(Ot){if(I.quality=="draft")if(!Ot.isParent())Nt=xt.get(Ot.id()),Dt.nodes.push({x:ft[ct].xCoords[Nt]-Ot.boundingbox().w/2,y:ft[ct].yCoords[Nt]-Ot.boundingbox().h/2,width:Ot.boundingbox().w,height:Ot.boundingbox().h});else{var Ct=l.calcBoundingBox(Ot,ft[ct].xCoords,ft[ct].yCoords,xt);Dt.nodes.push({x:Ct.topLeftX,y:Ct.topLeftY,width:Ct.width,height:Ct.height})}else J[ct][Ot.id()]&&Dt.nodes.push({x:J[ct][Ot.id()].getLeft(),y:J[ct][Ot.id()].getTop(),width:J[ct][Ot.id()].getWidth(),height:J[ct][Ot.id()].getHeight()})}),dt.edges().forEach(function(Ot){var Ct=Ot.source(),It=Ot.target();if(Ct.css("display")!="none"&&It.css("display")!="none")if(I.quality=="draft"){var Wt=xt.get(Ct.id()),$t=xt.get(It.id()),bt=[],Yt=[];if(Ct.isParent()){var Xt=l.calcBoundingBox(Ct,ft[ct].xCoords,ft[ct].yCoords,xt);bt.push(Xt.topLeftX+Xt.width/2),bt.push(Xt.topLeftY+Xt.height/2)}else bt.push(ft[ct].xCoords[Wt]),bt.push(ft[ct].yCoords[Wt]);if(It.isParent()){var K=l.calcBoundingBox(It,ft[ct].xCoords,ft[ct].yCoords,xt);Yt.push(K.topLeftX+K.width/2),Yt.push(K.topLeftY+K.height/2)}else Yt.push(ft[ct].xCoords[$t]),Yt.push(ft[ct].yCoords[$t]);Dt.edges.push({startX:bt[0],startY:bt[1],endX:Yt[0],endY:Yt[1]})}else J[ct][Ct.id()]&&J[ct][It.id()]&&Dt.edges.push({startX:J[ct][Ct.id()].getCenterX(),startY:J[ct][Ct.id()].getCenterY(),endX:J[ct][It.id()].getCenterX(),endY:J[ct][It.id()].getCenterY()})}),Dt.nodes.length>0&&(Q.push(Dt),k.add(ct))}});var it=m.packComponents(Q,I.randomize).shifts;if(I.quality=="draft")ft.forEach(function(dt,ct){var xt=dt.xCoords.map(function(Nt){return Nt+it[ct].dx}),Dt=dt.yCoords.map(function(Nt){return Nt+it[ct].dy});dt.xCoords=xt,dt.yCoords=Dt});else{var Pt=0;k.forEach(function(dt){Object.keys(J[dt]).forEach(function(ct){var xt=J[dt][ct];xt.setCenter(xt.getCenterX()+it[Pt].dx,xt.getCenterY()+it[Pt].dy)}),Pt++})}}}else{var S=I.eles.boundingBox();if(E.push({x:S.x1+S.w/2,y:S.y1+S.h/2}),I.randomize){var O=u(I);ft.push(O)}I.quality=="default"||I.quality=="proof"?(J.push(c(I,ft[0])),l.relocateComponent(E[0],J[0],I)):l.relocateComponent(E[0],ft[0],I)}var Mt=function(ct,xt){if(I.quality=="default"||I.quality=="proof"){typeof ct=="number"&&(ct=xt);var Dt=void 0,Nt=void 0,Ot=ct.data("id");return J.forEach(function(It){Ot in It&&(Dt={x:It[Ot].getRect().getCenterX(),y:It[Ot].getRect().getCenterY()},Nt=It[Ot])}),I.nodeDimensionsIncludeLabels&&(Nt.labelWidth&&(Nt.labelPosHorizontal=="left"?Dt.x+=Nt.labelWidth/2:Nt.labelPosHorizontal=="right"&&(Dt.x-=Nt.labelWidth/2)),Nt.labelHeight&&(Nt.labelPosVertical=="top"?Dt.y+=Nt.labelHeight/2:Nt.labelPosVertical=="bottom"&&(Dt.y-=Nt.labelHeight/2))),Dt==null&&(Dt={x:ct.position("x"),y:ct.position("y")}),{x:Dt.x,y:Dt.y}}else{var Ct=void 0;return ft.forEach(function(It){var Wt=It.nodeIndexes.get(ct.id());Wt!=null&&(Ct={x:It.xCoords[Wt],y:It.yCoords[Wt]})}),Ct==null&&(Ct={x:ct.position("x"),y:ct.position("y")}),{x:Ct.x,y:Ct.y}}};if(I.quality=="default"||I.quality=="proof"||I.randomize){var Ht=l.calcParentsWithoutChildren(nt,gt),Gt=gt.filter(function(dt){return dt.css("display")=="none"});I.eles=gt.not(Gt),gt.nodes().not(":parent").not(Gt).layoutPositions(rt,I,Mt),Ht.length>0&&Ht.forEach(function(dt){dt.position(Mt(dt))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),L}();h.exports=N},657:(h,f,e)=>{var v=e(548),t=e(140).layoutBase.Matrix,a=e(140).layoutBase.SVD,l=function(u){var T=u.cy,c=u.eles,M=c.nodes(),N=c.nodes(":parent"),L=new Map,x=new Map,rt=new Map,I=[],nt=[],gt=[],ft=[],Et=[],Y=[],J=[],r=[],E=void 0,n=void 0,m=1e8,p=1e-9,S=u.piTol,O=u.samplingType,W=u.nodeSeparation,X=void 0,G=function(){for(var d=0,C=0,A=!1;C<X;){d=Math.floor(Math.random()*n),A=!1;for(var D=0;D<C;D++)if(ft[D]==d){A=!0;break}if(!A)ft[C]=d,C++;else continue}},tt=function(d,C,A){for(var D=[],H=0,V=0,U=0,b=void 0,Z=[],F=0,z=1,ut=0;ut<n;ut++)Z[ut]=m;for(D[V]=d,Z[d]=0;V>=H;){U=D[H++];for(var et=I[U],P=0;P<et.length;P++)b=x.get(et[P]),Z[b]==m&&(Z[b]=Z[U]+1,D[++V]=b);Y[U][C]=Z[U]*W}if(A){for(var _=0;_<n;_++)Y[_][C]<Et[_]&&(Et[_]=Y[_][C]);for(var at=0;at<n;at++)Et[at]>F&&(F=Et[at],z=at)}return z},st=function(d){var C=void 0;if(d){C=Math.floor(Math.random()*n),E=C;for(var D=0;D<n;D++)Et[D]=m;for(var H=0;H<X;H++)ft[H]=C,C=tt(C,H,d)}else{G();for(var A=0;A<X;A++)tt(ft[A],A,d,!1)}for(var V=0;V<n;V++)for(var U=0;U<X;U++)Y[V][U]*=Y[V][U];for(var b=0;b<X;b++)J[b]=[];for(var Z=0;Z<X;Z++)for(var F=0;F<X;F++)J[Z][F]=Y[ft[F]][Z]},B=function(){for(var d=a.svd(J),C=d.S,A=d.U,D=d.V,H=C[0]*C[0]*C[0],V=[],U=0;U<X;U++){V[U]=[];for(var b=0;b<X;b++)V[U][b]=0,U==b&&(V[U][b]=C[U]/(C[U]*C[U]+H/(C[U]*C[U])))}r=t.multMat(t.multMat(D,V),t.transpose(A))},ht=function(){for(var d=void 0,C=void 0,A=[],D=[],H=[],V=[],U=0;U<n;U++)A[U]=Math.random(),D[U]=Math.random();A=t.normalize(A),D=t.normalize(D);for(var b=0,Z=p,F=p,z=void 0;;){b++;for(var ut=0;ut<n;ut++)H[ut]=A[ut];if(A=t.multGamma(t.multL(t.multGamma(H),Y,r)),d=t.dotProduct(H,A),A=t.normalize(A),Z=t.dotProduct(H,A),z=Math.abs(Z/F),z<=1+S&&z>=1)break;F=Z}for(var et=0;et<n;et++)H[et]=A[et];for(b=0,F=p;;){b++;for(var P=0;P<n;P++)V[P]=D[P];if(V=t.minusOp(V,t.multCons(H,t.dotProduct(H,V))),D=t.multGamma(t.multL(t.multGamma(V),Y,r)),C=t.dotProduct(V,D),D=t.normalize(D),Z=t.dotProduct(V,D),z=Math.abs(Z/F),z<=1+S&&z>=1)break;F=Z}for(var _=0;_<n;_++)V[_]=D[_];nt=t.multCons(H,Math.sqrt(Math.abs(d))),gt=t.multCons(V,Math.sqrt(Math.abs(C)))};v.connectComponents(T,c,v.getTopMostNodes(M),L),N.forEach(function(q){v.connectComponents(T,c,v.getTopMostNodes(q.descendants().intersection(c)),L)});for(var j=0,w=0;w<M.length;w++)M[w].isParent()||x.set(M[w].id(),j++);var $=!0,k=!1,Q=void 0;try{for(var mt=L.keys()[Symbol.iterator](),it;!($=(it=mt.next()).done);$=!0){var Pt=it.value;x.set(Pt,j++)}}catch(q){k=!0,Q=q}finally{try{!$&&mt.return&&mt.return()}finally{if(k)throw Q}}for(var Mt=0;Mt<x.size;Mt++)I[Mt]=[];N.forEach(function(q){for(var d=q.children().intersection(c);d.nodes(":childless").length==0;)d=d.nodes()[0].children().intersection(c);var C=0,A=d.nodes(":childless")[0].connectedEdges().length;d.nodes(":childless").forEach(function(D,H){D.connectedEdges().length<A&&(A=D.connectedEdges().length,C=H)}),rt.set(q.id(),d.nodes(":childless")[C].id())}),M.forEach(function(q){var d=void 0;q.isParent()?d=x.get(rt.get(q.id())):d=x.get(q.id()),q.neighborhood().nodes().forEach(function(C){c.intersection(q.edgesWith(C)).length>0&&(C.isParent()?I[d].push(rt.get(C.id())):I[d].push(C.id()))})});var Ht=function(d){var C=x.get(d),A=void 0;L.get(d).forEach(function(D){T.getElementById(D).isParent()?A=rt.get(D):A=D,I[C].push(A),I[x.get(A)].push(d)})},Gt=!0,dt=!1,ct=void 0;try{for(var xt=L.keys()[Symbol.iterator](),Dt;!(Gt=(Dt=xt.next()).done);Gt=!0){var Nt=Dt.value;Ht(Nt)}}catch(q){dt=!0,ct=q}finally{try{!Gt&&xt.return&&xt.return()}finally{if(dt)throw ct}}n=x.size;var Ot=void 0;if(n>2){X=n<u.sampleSize?n:u.sampleSize;for(var Ct=0;Ct<n;Ct++)Y[Ct]=[];for(var It=0;It<X;It++)r[It]=[];return u.quality=="draft"||u.step=="all"?(st(O),B(),ht(),Ot={nodeIndexes:x,xCoords:nt,yCoords:gt}):(x.forEach(function(q,d){nt.push(T.getElementById(d).position("x")),gt.push(T.getElementById(d).position("y"))}),Ot={nodeIndexes:x,xCoords:nt,yCoords:gt}),Ot}else{var Wt=x.keys(),$t=T.getElementById(Wt.next().value),bt=$t.position(),Yt=$t.outerWidth();if(nt.push(bt.x),gt.push(bt.y),n==2){var Xt=T.getElementById(Wt.next().value),K=Xt.outerWidth();nt.push(bt.x+Yt/2+K/2+u.idealEdgeLength),gt.push(bt.y)}return Ot={nodeIndexes:x,xCoords:nt,yCoords:gt},Ot}};h.exports={spectralLayout:l}},579:(h,f,e)=>{var v=e(212),t=function(l){l&&l("layout","fcose",v)};typeof cytoscape<"u"&&t(cytoscape),h.exports=t},140:h=>{h.exports=R}},o={};function s(h){var f=o[h];if(f!==void 0)return f.exports;var e=o[h]={exports:{}};return y[h](e,e.exports,s),e.exports}var i=s(579);return i})()})},"./node_modules/cytoscape-fcose/node_modules/cose-base/cose-base.js":function(jt,lt,pt){(function(y,o){jt.exports=o(pt("./node_modules/cytoscape-fcose/node_modules/layout-base/layout-base.js"))})(this,function(R){return(()=>{"use strict";var y={45:(h,f,e)=>{var v={};v.layoutBase=e(551),v.CoSEConstants=e(806),v.CoSEEdge=e(767),v.CoSEGraph=e(880),v.CoSEGraphManager=e(578),v.CoSELayout=e(765),v.CoSENode=e(991),v.ConstraintHandler=e(902),h.exports=v},806:(h,f,e)=>{var v=e(551).FDLayoutConstants;function t(){}for(var a in v)t[a]=v[a];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=v.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,t.ENFORCE_CONSTRAINTS=!0,t.APPLY_LAYOUT=!0,t.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,t.TREE_REDUCTION_ON_INCREMENTAL=!0,t.PURE_INCREMENTAL=t.DEFAULT_INCREMENTAL,h.exports=t},767:(h,f,e)=>{var v=e(551).FDLayoutEdge;function t(l,g,u){v.call(this,l,g,u)}t.prototype=Object.create(v.prototype);for(var a in v)t[a]=v[a];h.exports=t},880:(h,f,e)=>{var v=e(551).LGraph;function t(l,g,u){v.call(this,l,g,u)}t.prototype=Object.create(v.prototype);for(var a in v)t[a]=v[a];h.exports=t},578:(h,f,e)=>{var v=e(551).LGraphManager;function t(l){v.call(this,l)}t.prototype=Object.create(v.prototype);for(var a in v)t[a]=v[a];h.exports=t},765:(h,f,e)=>{var v=e(551).FDLayout,t=e(578),a=e(880),l=e(991),g=e(767),u=e(806),T=e(902),c=e(551).FDLayoutConstants,M=e(551).LayoutConstants,N=e(551).Point,L=e(551).PointD,x=e(551).DimensionD,rt=e(551).Layout,I=e(551).Integer,nt=e(551).IGeometry,gt=e(551).LGraph,ft=e(551).Transform,Et=e(551).LinkedList;function Y(){v.call(this),this.toBeTiled={},this.constraints={}}Y.prototype=Object.create(v.prototype);for(var J in v)Y[J]=v[J];Y.prototype.newGraphManager=function(){var r=new t(this);return this.graphManager=r,r},Y.prototype.newGraph=function(r){return new a(null,this.graphManager,r)},Y.prototype.newNode=function(r){return new l(this.graphManager,r)},Y.prototype.newEdge=function(r){return new g(null,null,r)},Y.prototype.initParameters=function(){v.prototype.initParameters.call(this,arguments),this.isSubLayout||(u.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},Y.prototype.initSpringEmbedder=function(){v.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},Y.prototype.layout=function(){var r=M.DEFAULT_CREATE_BENDS_AS_NEEDED;return r&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},Y.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(u.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(S){return E.has(S)});this.graphManager.setAllNodesToApplyGravitation(n)}}else{var r=this.getFlatForest();if(r.length>0)this.positionNodesRadially(r);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(m){return E.has(m)});this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(T.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),u.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},Y.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var r=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(p){return r.has(p)});this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),u.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),u.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,m=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,m),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},Y.prototype.getPositionsData=function(){for(var r=this.graphManager.getAllNodes(),E={},n=0;n<r.length;n++){var m=r[n].rect,p=r[n].id;E[p]={id:p,x:m.getCenterX(),y:m.getCenterY(),w:m.width,h:m.height}}return E},Y.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var r=!1;if(c.ANIMATE==="during")this.emit("layoutstarted");else{for(;!r;)r=this.tick();this.graphManager.updateBounds()}},Y.prototype.moveNodes=function(){for(var r=this.getAllNodes(),E,n=0;n<r.length;n++)E=r[n],E.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var n=0;n<r.length;n++)E=r[n],E.move()},Y.prototype.initConstraintVariables=function(){var r=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),n=0;n<E.length;n++){var m=E[n];this.idToNodeMap.set(m.id,m)}var p=function w($){for(var k=$.getChild().getNodes(),Q,mt=0,it=0;it<k.length;it++)Q=k[it],Q.getChild()==null?r.fixedNodeSet.has(Q.id)&&(mt+=100):mt+=w(Q);return mt};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(k){r.fixedNodeSet.add(k.nodeId)});for(var E=this.graphManager.getAllNodes(),m,n=0;n<E.length;n++)if(m=E[n],m.getChild()!=null){var S=p(m);S>0&&(m.fixedNodeWeight=S)}}if(this.constraints.relativePlacementConstraint){var O=new Map,W=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(w){r.fixedNodesOnHorizontal.add(w),r.fixedNodesOnVertical.add(w)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var X=this.constraints.alignmentConstraint.vertical,n=0;n<X.length;n++)this.dummyToNodeForVerticalAlignment.set("dummy"+n,[]),X[n].forEach(function($){O.set($,"dummy"+n),r.dummyToNodeForVerticalAlignment.get("dummy"+n).push($),r.fixedNodeSet.has($)&&r.fixedNodesOnHorizontal.add("dummy"+n)});if(this.constraints.alignmentConstraint.horizontal)for(var G=this.constraints.alignmentConstraint.horizontal,n=0;n<G.length;n++)this.dummyToNodeForHorizontalAlignment.set("dummy"+n,[]),G[n].forEach(function($){W.set($,"dummy"+n),r.dummyToNodeForHorizontalAlignment.get("dummy"+n).push($),r.fixedNodeSet.has($)&&r.fixedNodesOnVertical.add("dummy"+n)})}if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(w){var $,k,Q;for(Q=w.length-1;Q>=2*w.length/3;Q--)$=Math.floor(Math.random()*(Q+1)),k=w[Q],w[Q]=w[$],w[$]=k;return w},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var $=O.has(w.left)?O.get(w.left):w.left,k=O.has(w.right)?O.get(w.right):w.right;r.nodesInRelativeHorizontal.includes($)||(r.nodesInRelativeHorizontal.push($),r.nodeToRelativeConstraintMapHorizontal.set($,[]),r.dummyToNodeForVerticalAlignment.has($)?r.nodeToTempPositionMapHorizontal.set($,r.idToNodeMap.get(r.dummyToNodeForVerticalAlignment.get($)[0]).getCenterX()):r.nodeToTempPositionMapHorizontal.set($,r.idToNodeMap.get($).getCenterX())),r.nodesInRelativeHorizontal.includes(k)||(r.nodesInRelativeHorizontal.push(k),r.nodeToRelativeConstraintMapHorizontal.set(k,[]),r.dummyToNodeForVerticalAlignment.has(k)?r.nodeToTempPositionMapHorizontal.set(k,r.idToNodeMap.get(r.dummyToNodeForVerticalAlignment.get(k)[0]).getCenterX()):r.nodeToTempPositionMapHorizontal.set(k,r.idToNodeMap.get(k).getCenterX())),r.nodeToRelativeConstraintMapHorizontal.get($).push({right:k,gap:w.gap}),r.nodeToRelativeConstraintMapHorizontal.get(k).push({left:$,gap:w.gap})}else{var Q=W.has(w.top)?W.get(w.top):w.top,mt=W.has(w.bottom)?W.get(w.bottom):w.bottom;r.nodesInRelativeVertical.includes(Q)||(r.nodesInRelativeVertical.push(Q),r.nodeToRelativeConstraintMapVertical.set(Q,[]),r.dummyToNodeForHorizontalAlignment.has(Q)?r.nodeToTempPositionMapVertical.set(Q,r.idToNodeMap.get(r.dummyToNodeForHorizontalAlignment.get(Q)[0]).getCenterY()):r.nodeToTempPositionMapVertical.set(Q,r.idToNodeMap.get(Q).getCenterY())),r.nodesInRelativeVertical.includes(mt)||(r.nodesInRelativeVertical.push(mt),r.nodeToRelativeConstraintMapVertical.set(mt,[]),r.dummyToNodeForHorizontalAlignment.has(mt)?r.nodeToTempPositionMapVertical.set(mt,r.idToNodeMap.get(r.dummyToNodeForHorizontalAlignment.get(mt)[0]).getCenterY()):r.nodeToTempPositionMapVertical.set(mt,r.idToNodeMap.get(mt).getCenterY())),r.nodeToRelativeConstraintMapVertical.get(Q).push({bottom:mt,gap:w.gap}),r.nodeToRelativeConstraintMapVertical.get(mt).push({top:Q,gap:w.gap})}});else{var tt=new Map,st=new Map;this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var $=O.has(w.left)?O.get(w.left):w.left,k=O.has(w.right)?O.get(w.right):w.right;tt.has($)?tt.get($).push(k):tt.set($,[k]),tt.has(k)?tt.get(k).push($):tt.set(k,[$])}else{var Q=W.has(w.top)?W.get(w.top):w.top,mt=W.has(w.bottom)?W.get(w.bottom):w.bottom;st.has(Q)?st.get(Q).push(mt):st.set(Q,[mt]),st.has(mt)?st.get(mt).push(Q):st.set(mt,[Q])}});var B=function($,k){var Q=[],mt=[],it=new Et,Pt=new Set,Mt=0;return $.forEach(function(Ht,Gt){if(!Pt.has(Gt)){Q[Mt]=[],mt[Mt]=!1;var dt=Gt;for(it.push(dt),Pt.add(dt),Q[Mt].push(dt);it.length!=0;){dt=it.shift(),k.has(dt)&&(mt[Mt]=!0);var ct=$.get(dt);ct.forEach(function(xt){Pt.has(xt)||(it.push(xt),Pt.add(xt),Q[Mt].push(xt))})}Mt++}}),{components:Q,isFixed:mt}},ht=B(tt,r.fixedNodesOnHorizontal);this.componentsOnHorizontal=ht.components,this.fixedComponentsOnHorizontal=ht.isFixed;var j=B(st,r.fixedNodesOnVertical);this.componentsOnVertical=j.components,this.fixedComponentsOnVertical=j.isFixed}}},Y.prototype.updateDisplacements=function(){var r=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(j){var w=r.idToNodeMap.get(j.nodeId);w.displacementX=0,w.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,n=0;n<E.length;n++){for(var m=0,p=0;p<E[n].length;p++){if(this.fixedNodeSet.has(E[n][p])){m=0;break}m+=this.idToNodeMap.get(E[n][p]).displacementX}for(var S=m/E[n].length,p=0;p<E[n].length;p++)this.idToNodeMap.get(E[n][p]).displacementX=S}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,n=0;n<O.length;n++){for(var W=0,p=0;p<O[n].length;p++){if(this.fixedNodeSet.has(O[n][p])){W=0;break}W+=this.idToNodeMap.get(O[n][p]).displacementY}for(var X=W/O[n].length,p=0;p<O[n].length;p++)this.idToNodeMap.get(O[n][p]).displacementY=X}}if(this.constraints.relativePlacementConstraint)if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(j){if(!r.fixedNodesOnHorizontal.has(j)){var w=0;r.dummyToNodeForVerticalAlignment.has(j)?w=r.idToNodeMap.get(r.dummyToNodeForVerticalAlignment.get(j)[0]).displacementX:w=r.idToNodeMap.get(j).displacementX,r.nodeToRelativeConstraintMapHorizontal.get(j).forEach(function($){if($.right){var k=r.nodeToTempPositionMapHorizontal.get($.right)-r.nodeToTempPositionMapHorizontal.get(j)-w;k<$.gap&&(w-=$.gap-k)}else{var k=r.nodeToTempPositionMapHorizontal.get(j)-r.nodeToTempPositionMapHorizontal.get($.left)+w;k<$.gap&&(w+=$.gap-k)}}),r.nodeToTempPositionMapHorizontal.set(j,r.nodeToTempPositionMapHorizontal.get(j)+w),r.dummyToNodeForVerticalAlignment.has(j)?r.dummyToNodeForVerticalAlignment.get(j).forEach(function($){r.idToNodeMap.get($).displacementX=w}):r.idToNodeMap.get(j).displacementX=w}}),this.nodesInRelativeVertical.forEach(function(j){if(!r.fixedNodesOnHorizontal.has(j)){var w=0;r.dummyToNodeForHorizontalAlignment.has(j)?w=r.idToNodeMap.get(r.dummyToNodeForHorizontalAlignment.get(j)[0]).displacementY:w=r.idToNodeMap.get(j).displacementY,r.nodeToRelativeConstraintMapVertical.get(j).forEach(function($){if($.bottom){var k=r.nodeToTempPositionMapVertical.get($.bottom)-r.nodeToTempPositionMapVertical.get(j)-w;k<$.gap&&(w-=$.gap-k)}else{var k=r.nodeToTempPositionMapVertical.get(j)-r.nodeToTempPositionMapVertical.get($.top)+w;k<$.gap&&(w+=$.gap-k)}}),r.nodeToTempPositionMapVertical.set(j,r.nodeToTempPositionMapVertical.get(j)+w),r.dummyToNodeForHorizontalAlignment.has(j)?r.dummyToNodeForHorizontalAlignment.get(j).forEach(function($){r.idToNodeMap.get($).displacementY=w}):r.idToNodeMap.get(j).displacementY=w}});else{for(var n=0;n<this.componentsOnHorizontal.length;n++){var G=this.componentsOnHorizontal[n];if(this.fixedComponentsOnHorizontal[n])for(var p=0;p<G.length;p++)this.dummyToNodeForVerticalAlignment.has(G[p])?this.dummyToNodeForVerticalAlignment.get(G[p]).forEach(function($){r.idToNodeMap.get($).displacementX=0}):this.idToNodeMap.get(G[p]).displacementX=0;else{for(var tt=0,st=0,p=0;p<G.length;p++)if(this.dummyToNodeForVerticalAlignment.has(G[p])){var B=this.dummyToNodeForVerticalAlignment.get(G[p]);tt+=B.length*this.idToNodeMap.get(B[0]).displacementX,st+=B.length}else tt+=this.idToNodeMap.get(G[p]).displacementX,st++;for(var ht=tt/st,p=0;p<G.length;p++)this.dummyToNodeForVerticalAlignment.has(G[p])?this.dummyToNodeForVerticalAlignment.get(G[p]).forEach(function($){r.idToNodeMap.get($).displacementX=ht}):this.idToNodeMap.get(G[p]).displacementX=ht}}for(var n=0;n<this.componentsOnVertical.length;n++){var G=this.componentsOnVertical[n];if(this.fixedComponentsOnVertical[n])for(var p=0;p<G.length;p++)this.dummyToNodeForHorizontalAlignment.has(G[p])?this.dummyToNodeForHorizontalAlignment.get(G[p]).forEach(function(k){r.idToNodeMap.get(k).displacementY=0}):this.idToNodeMap.get(G[p]).displacementY=0;else{for(var tt=0,st=0,p=0;p<G.length;p++)if(this.dummyToNodeForHorizontalAlignment.has(G[p])){var B=this.dummyToNodeForHorizontalAlignment.get(G[p]);tt+=B.length*this.idToNodeMap.get(B[0]).displacementY,st+=B.length}else tt+=this.idToNodeMap.get(G[p]).displacementY,st++;for(var ht=tt/st,p=0;p<G.length;p++)this.dummyToNodeForHorizontalAlignment.has(G[p])?this.dummyToNodeForHorizontalAlignment.get(G[p]).forEach(function(it){r.idToNodeMap.get(it).displacementY=ht}):this.idToNodeMap.get(G[p]).displacementY=ht}}}},Y.prototype.calculateNodesToApplyGravitationTo=function(){var r=[],E,n=this.graphManager.getGraphs(),m=n.length,p;for(p=0;p<m;p++)E=n[p],E.updateConnected(),E.isConnected||(r=r.concat(E.getNodes()));return r},Y.prototype.createBendpoints=function(){var r=[];r=r.concat(this.graphManager.getAllEdges());var E=new Set,n;for(n=0;n<r.length;n++){var m=r[n];if(!E.has(m)){var p=m.getSource(),S=m.getTarget();if(p==S)m.getBendpoints().push(new L),m.getBendpoints().push(new L),this.createDummyNodesForBendpoints(m),E.add(m);else{var O=[];if(O=O.concat(p.getEdgeListToNode(S)),O=O.concat(S.getEdgeListToNode(p)),!E.has(O[0])){if(O.length>1){var W;for(W=0;W<O.length;W++){var X=O[W];X.getBendpoints().push(new L),this.createDummyNodesForBendpoints(X)}}O.forEach(function(G){E.add(G)})}}}if(E.size==r.length)break}},Y.prototype.positionNodesRadially=function(r){for(var E=new N(0,0),n=Math.ceil(Math.sqrt(r.length)),m=0,p=0,S=0,O=new L(0,0),W=0;W<r.length;W++){W%n==0&&(S=0,p=m,W!=0&&(p+=u.DEFAULT_COMPONENT_SEPERATION),m=0);var X=r[W],G=rt.findCenterOfTree(X);E.x=S,E.y=p,O=Y.radialLayout(X,G,E),O.y>m&&(m=Math.floor(O.y)),S=Math.floor(O.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new L(M.WORLD_CENTER_X-O.x/2,M.WORLD_CENTER_Y-O.y/2))},Y.radialLayout=function(r,E,n){var m=Math.max(this.maxDiagonalInTree(r),u.DEFAULT_RADIAL_SEPARATION);Y.branchRadialLayout(E,null,0,359,0,m);var p=gt.calculateBounds(r),S=new ft;S.setDeviceOrgX(p.getMinX()),S.setDeviceOrgY(p.getMinY()),S.setWorldOrgX(n.x),S.setWorldOrgY(n.y);for(var O=0;O<r.length;O++){var W=r[O];W.transform(S)}var X=new L(p.getMaxX(),p.getMaxY());return S.inverseTransformPoint(X)},Y.branchRadialLayout=function(r,E,n,m,p,S){var O=(m-n+1)/2;O<0&&(O+=180);var W=(O+n)%360,X=W*nt.TWO_PI/360,G=Math.cos(X),tt=p*Math.cos(X),st=p*Math.sin(X);r.setCenter(tt,st);var B=[];B=B.concat(r.getEdges());var ht=B.length;E!=null&&ht--;for(var j=0,w=B.length,$,k=r.getEdgesBetween(E);k.length>1;){var Q=k[0];k.splice(0,1);var mt=B.indexOf(Q);mt>=0&&B.splice(mt,1),w--,ht--}E!=null?$=(B.indexOf(k[0])+1)%w:$=0;for(var it=Math.abs(m-n)/ht,Pt=$;j!=ht;Pt=++Pt%w){var Mt=B[Pt].getOtherEnd(r);if(Mt!=E){var Ht=(n+j*it)%360,Gt=(Ht+it)%360;Y.branchRadialLayout(Mt,r,Ht,Gt,p+S,S),j++}}},Y.maxDiagonalInTree=function(r){for(var E=I.MIN_VALUE,n=0;n<r.length;n++){var m=r[n],p=m.getDiagonal();p>E&&(E=p)}return E},Y.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},Y.prototype.groupZeroDegreeMembers=function(){var r=this,E={};this.memberGroups={},this.idToDummyNode={};for(var n=[],m=this.graphManager.getAllNodes(),p=0;p<m.length;p++){var S=m[p],O=S.getParent();this.getNodeDegreeWithChildren(S)===0&&(O.id==null||!this.getToBeTiled(O))&&n.push(S)}for(var p=0;p<n.length;p++){var S=n[p],W=S.getParent().id;typeof E[W]>"u"&&(E[W]=[]),E[W]=E[W].concat(S)}Object.keys(E).forEach(function(X){if(E[X].length>1){var G="DummyCompound_"+X;r.memberGroups[G]=E[X];var tt=E[X][0].getParent(),st=new l(r.graphManager);st.id=G,st.paddingLeft=tt.paddingLeft||0,st.paddingRight=tt.paddingRight||0,st.paddingBottom=tt.paddingBottom||0,st.paddingTop=tt.paddingTop||0,r.idToDummyNode[G]=st;var B=r.getGraphManager().add(r.newGraph(),st),ht=tt.getChild();ht.add(st);for(var j=0;j<E[X].length;j++){var w=E[X][j];ht.remove(w),B.add(w)}}})},Y.prototype.clearCompounds=function(){var r={},E={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)E[this.compoundOrder[n].id]=this.compoundOrder[n],r[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(r,E)},Y.prototype.clearZeroDegreeMembers=function(){var r=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var m=r.idToDummyNode[n];if(E[n]=r.tileNodes(r.memberGroups[n],m.paddingLeft+m.paddingRight),m.rect.width=E[n].width,m.rect.height=E[n].height,m.setCenter(E[n].centerX,E[n].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var p=m.rect.width,S=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(p+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>p?(m.rect.x-=(m.labelWidth-p)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-p)/2):m.labelPosHorizontal=="right"&&m.setWidth(p+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(S+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>S?(m.rect.y-=(m.labelHeight-S)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-S)/2):m.labelPosVertical=="bottom"&&m.setHeight(S+m.labelHeight))}})},Y.prototype.repopulateCompounds=function(){for(var r=this.compoundOrder.length-1;r>=0;r--){var E=this.compoundOrder[r],n=E.id,m=E.paddingLeft,p=E.paddingTop,S=E.labelMarginLeft,O=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[n],E.rect.x,E.rect.y,m,p,S,O)}},Y.prototype.repopulateZeroDegreeMembers=function(){var r=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach(function(n){var m=r.idToDummyNode[n],p=m.paddingLeft,S=m.paddingTop,O=m.labelMarginLeft,W=m.labelMarginTop;r.adjustLocations(E[n],m.rect.x,m.rect.y,p,S,O,W)})},Y.prototype.getToBeTiled=function(r){var E=r.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var n=r.getChild();if(n==null)return this.toBeTiled[E]=!1,!1;for(var m=n.getNodes(),p=0;p<m.length;p++){var S=m[p];if(this.getNodeDegree(S)>0)return this.toBeTiled[E]=!1,!1;if(S.getChild()==null){this.toBeTiled[S.id]=!1;continue}if(!this.getToBeTiled(S))return this.toBeTiled[E]=!1,!1}return this.toBeTiled[E]=!0,!0},Y.prototype.getNodeDegree=function(r){for(var E=r.id,n=r.getEdges(),m=0,p=0;p<n.length;p++){var S=n[p];S.getSource().id!==S.getTarget().id&&(m=m+1)}return m},Y.prototype.getNodeDegreeWithChildren=function(r){var E=this.getNodeDegree(r);if(r.getChild()==null)return E;for(var n=r.getChild().getNodes(),m=0;m<n.length;m++){var p=n[m];E+=this.getNodeDegreeWithChildren(p)}return E},Y.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},Y.prototype.fillCompexOrderByDFS=function(r){for(var E=0;E<r.length;E++){var n=r[E];n.getChild()!=null&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},Y.prototype.adjustLocations=function(r,E,n,m,p,S,O){E+=m+S,n+=p+O;for(var W=E,X=0;X<r.rows.length;X++){var G=r.rows[X];E=W;for(var tt=0,st=0;st<G.length;st++){var B=G[st];B.rect.x=E,B.rect.y=n,E+=B.rect.width+r.horizontalPadding,B.rect.height>tt&&(tt=B.rect.height)}n+=tt+r.verticalPadding}},Y.prototype.tileCompoundMembers=function(r,E){var n=this;this.tiledMemberPack=[],Object.keys(r).forEach(function(m){var p=E[m];if(n.tiledMemberPack[m]=n.tileNodes(r[m],p.paddingLeft+p.paddingRight),p.rect.width=n.tiledMemberPack[m].width,p.rect.height=n.tiledMemberPack[m].height,p.setCenter(n.tiledMemberPack[m].centerX,n.tiledMemberPack[m].centerY),p.labelMarginLeft=0,p.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var S=p.rect.width,O=p.rect.height;p.labelWidth&&(p.labelPosHorizontal=="left"?(p.rect.x-=p.labelWidth,p.setWidth(S+p.labelWidth),p.labelMarginLeft=p.labelWidth):p.labelPosHorizontal=="center"&&p.labelWidth>S?(p.rect.x-=(p.labelWidth-S)/2,p.setWidth(p.labelWidth),p.labelMarginLeft=(p.labelWidth-S)/2):p.labelPosHorizontal=="right"&&p.setWidth(S+p.labelWidth)),p.labelHeight&&(p.labelPosVertical=="top"?(p.rect.y-=p.labelHeight,p.setHeight(O+p.labelHeight),p.labelMarginTop=p.labelHeight):p.labelPosVertical=="center"&&p.labelHeight>O?(p.rect.y-=(p.labelHeight-O)/2,p.setHeight(p.labelHeight),p.labelMarginTop=(p.labelHeight-O)/2):p.labelPosVertical=="bottom"&&p.setHeight(O+p.labelHeight))}})},Y.prototype.tileNodes=function(r,E){var n=this.tileNodesByFavoringDim(r,E,!0),m=this.tileNodesByFavoringDim(r,E,!1),p=this.getOrgRatio(n),S=this.getOrgRatio(m),O;return S<p?O=m:O=n,O},Y.prototype.getOrgRatio=function(r){var E=r.width,n=r.height,m=E/n;return m<1&&(m=1/m),m},Y.prototype.calcIdealRowWidth=function(r,E){var n=u.TILING_PADDING_VERTICAL,m=u.TILING_PADDING_HORIZONTAL,p=r.length,S=0,O=0,W=0;r.forEach(function(j){S+=j.getWidth(),O+=j.getHeight(),j.getWidth()>W&&(W=j.getWidth())});var X=S/p,G=O/p,tt=Math.pow(n-m,2)+4*(X+m)*(G+n)*p,st=(m-n+Math.sqrt(tt))/(2*(X+m)),B;E?(B=Math.ceil(st),B==st&&B++):B=Math.floor(st);var ht=B*(X+m)-m;return W>ht&&(ht=W),ht+=m*2,ht},Y.prototype.tileNodesByFavoringDim=function(r,E,n){var m=u.TILING_PADDING_VERTICAL,p=u.TILING_PADDING_HORIZONTAL,S=u.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:m,horizontalPadding:p,centerX:0,centerY:0};S&&(O.idealRowWidth=this.calcIdealRowWidth(r,n));var W=function(w){return w.rect.width*w.rect.height},X=function(w,$){return W($)-W(w)};r.sort(function(j,w){var $=X;return O.idealRowWidth?($=S,$(j.id,w.id)):$(j,w)});for(var G=0,tt=0,st=0;st<r.length;st++){var B=r[st];G+=B.getCenterX(),tt+=B.getCenterY()}O.centerX=G/r.length,O.centerY=tt/r.length;for(var st=0;st<r.length;st++){var B=r[st];if(O.rows.length==0)this.insertNodeToRow(O,B,0,E);else if(this.canAddHorizontal(O,B.rect.width,B.rect.height)){var ht=O.rows.length-1;O.idealRowWidth||(ht=this.getShortestRowIndex(O)),this.insertNodeToRow(O,B,ht,E)}else this.insertNodeToRow(O,B,O.rows.length,E);this.shiftToLastRow(O)}return O},Y.prototype.insertNodeToRow=function(r,E,n,m){var p=m;if(n==r.rows.length){var S=[];r.rows.push(S),r.rowWidth.push(p),r.rowHeight.push(0)}var O=r.rowWidth[n]+E.rect.width;r.rows[n].length>0&&(O+=r.horizontalPadding),r.rowWidth[n]=O,r.width<O&&(r.width=O);var W=E.rect.height;n>0&&(W+=r.verticalPadding);var X=0;W>r.rowHeight[n]&&(X=r.rowHeight[n],r.rowHeight[n]=W,X=r.rowHeight[n]-X),r.height+=X,r.rows[n].push(E)},Y.prototype.getShortestRowIndex=function(r){for(var E=-1,n=Number.MAX_VALUE,m=0;m<r.rows.length;m++)r.rowWidth[m]<n&&(E=m,n=r.rowWidth[m]);return E},Y.prototype.getLongestRowIndex=function(r){for(var E=-1,n=Number.MIN_VALUE,m=0;m<r.rows.length;m++)r.rowWidth[m]>n&&(E=m,n=r.rowWidth[m]);return E},Y.prototype.canAddHorizontal=function(r,E,n){if(r.idealRowWidth){var m=r.rows.length-1,p=r.rowWidth[m];return p+E+r.horizontalPadding<=r.idealRowWidth}var S=this.getShortestRowIndex(r);if(S<0)return!0;var O=r.rowWidth[S];if(O+r.horizontalPadding+E<=r.width)return!0;var W=0;r.rowHeight[S]<n&&S>0&&(W=n+r.verticalPadding-r.rowHeight[S]);var X;r.width-O>=E+r.horizontalPadding?X=(r.height+W)/(O+E+r.horizontalPadding):X=(r.height+W)/r.width,W=n+r.verticalPadding;var G;return r.width<E?G=(r.height+W)/E:G=(r.height+W)/r.width,G<1&&(G=1/G),X<1&&(X=1/X),X<G},Y.prototype.shiftToLastRow=function(r){var E=this.getLongestRowIndex(r),n=r.rowWidth.length-1,m=r.rows[E],p=m[m.length-1],S=p.width+r.horizontalPadding;if(r.width-r.rowWidth[n]>S&&E!=n){m.splice(-1,1),r.rows[n].push(p),r.rowWidth[E]=r.rowWidth[E]-S,r.rowWidth[n]=r.rowWidth[n]+S,r.width=r.rowWidth[instance.getLongestRowIndex(r)];for(var O=Number.MIN_VALUE,W=0;W<m.length;W++)m[W].height>O&&(O=m[W].height);E>0&&(O+=r.verticalPadding);var X=r.rowHeight[E]+r.rowHeight[n];r.rowHeight[E]=O,r.rowHeight[n]<p.height+r.verticalPadding&&(r.rowHeight[n]=p.height+r.verticalPadding);var G=r.rowHeight[E]+r.rowHeight[n];r.height+=G-X,this.shiftToLastRow(r)}},Y.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},Y.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},Y.prototype.reduceTrees=function(){for(var r=[],E=!0,n;E;){var m=this.graphManager.getAllNodes(),p=[];E=!1;for(var S=0;S<m.length;S++)if(n=m[S],n.getEdges().length==1&&!n.getEdges()[0].isInterGraph&&n.getChild()==null){if(u.PURE_INCREMENTAL){var O=n.getEdges()[0].getOtherEnd(n),W=new x(n.getCenterX()-O.getCenterX(),n.getCenterY()-O.getCenterY());p.push([n,n.getEdges()[0],n.getOwner(),W])}else p.push([n,n.getEdges()[0],n.getOwner()]);E=!0}if(E==!0){for(var X=[],G=0;G<p.length;G++)p[G][0].getEdges().length==1&&(X.push(p[G]),p[G][0].getOwner().remove(p[G][0]));r.push(X),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=r},Y.prototype.growTree=function(r){for(var E=r.length,n=r[E-1],m,p=0;p<n.length;p++)m=n[p],this.findPlaceforPrunedNode(m),m[2].add(m[0]),m[2].add(m[1],m[1].source,m[1].target);r.splice(r.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},Y.prototype.findPlaceforPrunedNode=function(r){var E,n,m=r[0];if(m==r[1].source?n=r[1].target:n=r[1].source,u.PURE_INCREMENTAL)m.setCenter(n.getCenterX()+r[3].getWidth(),n.getCenterY()+r[3].getHeight());else{var p=n.startX,S=n.finishX,O=n.startY,W=n.finishY,X=0,G=0,tt=0,st=0,B=[X,tt,G,st];if(O>0)for(var ht=p;ht<=S;ht++)B[0]+=this.grid[ht][O-1].length+this.grid[ht][O].length-1;if(S<this.grid.length-1)for(var ht=O;ht<=W;ht++)B[1]+=this.grid[S+1][ht].length+this.grid[S][ht].length-1;if(W<this.grid[0].length-1)for(var ht=p;ht<=S;ht++)B[2]+=this.grid[ht][W+1].length+this.grid[ht][W].length-1;if(p>0)for(var ht=O;ht<=W;ht++)B[3]+=this.grid[p-1][ht].length+this.grid[p][ht].length-1;for(var j=I.MAX_VALUE,w,$,k=0;k<B.length;k++)B[k]<j?(j=B[k],w=1,$=k):B[k]==j&&w++;if(w==3&&j==0)B[0]==0&&B[1]==0&&B[2]==0?E=1:B[0]==0&&B[1]==0&&B[3]==0?E=0:B[0]==0&&B[2]==0&&B[3]==0?E=3:B[1]==0&&B[2]==0&&B[3]==0&&(E=2);else if(w==2&&j==0){var Q=Math.floor(Math.random()*2);B[0]==0&&B[1]==0?Q==0?E=0:E=1:B[0]==0&&B[2]==0?Q==0?E=0:E=2:B[0]==0&&B[3]==0?Q==0?E=0:E=3:B[1]==0&&B[2]==0?Q==0?E=1:E=2:B[1]==0&&B[3]==0?Q==0?E=1:E=3:Q==0?E=2:E=3}else if(w==4&&j==0){var Q=Math.floor(Math.random()*4);E=Q}else E=$;E==0?m.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-c.DEFAULT_EDGE_LENGTH-m.getHeight()/2):E==1?m.setCenter(n.getCenterX()+n.getWidth()/2+c.DEFAULT_EDGE_LENGTH+m.getWidth()/2,n.getCenterY()):E==2?m.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+c.DEFAULT_EDGE_LENGTH+m.getHeight()/2):m.setCenter(n.getCenterX()-n.getWidth()/2-c.DEFAULT_EDGE_LENGTH-m.getWidth()/2,n.getCenterY())}},h.exports=Y},991:(h,f,e)=>{var v=e(551).FDLayoutNode,t=e(551).IMath;function a(g,u,T,c){v.call(this,g,u,T,c)}a.prototype=Object.create(v.prototype);for(var l in v)a[l]=v[l];a.prototype.calculateDisplacement=function(){var g=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementX=g.coolingFactor*g.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementY=g.coolingFactor*g.maxNodeDisplacement*t.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(g,u){for(var T=this.getChild().getNodes(),c,M=0;M<T.length;M++)c=T[M],c.getChild()==null?(c.displacementX+=g,c.displacementY+=u):c.propogateDisplacementToChildren(g,u)},a.prototype.move=function(){var g=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),g.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(g){this.pred1=g},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(g){this.next=g},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(g){this.processed=g},a.prototype.isProcessed=function(){return processed},h.exports=a},902:(h,f,e)=>{function v(T){if(Array.isArray(T)){for(var c=0,M=Array(T.length);c<T.length;c++)M[c]=T[c];return M}else return Array.from(T)}var t=e(806),a=e(551).LinkedList,l=e(551).Matrix,g=e(551).SVD;function u(){}u.handleConstraints=function(T){var c={};c.fixedNodeConstraint=T.constraints.fixedNodeConstraint,c.alignmentConstraint=T.constraints.alignmentConstraint,c.relativePlacementConstraint=T.constraints.relativePlacementConstraint;for(var M=new Map,N=new Map,L=[],x=[],rt=T.getAllNodes(),I=0,nt=0;nt<rt.length;nt++){var gt=rt[nt];gt.getChild()==null&&(N.set(gt.id,I++),L.push(gt.getCenterX()),x.push(gt.getCenterY()),M.set(gt.id,gt))}c.relativePlacementConstraint&&c.relativePlacementConstraint.forEach(function(K){!K.gap&&K.gap!=0&&(K.left?K.gap=t.DEFAULT_EDGE_LENGTH+M.get(K.left).getWidth()/2+M.get(K.right).getWidth()/2:K.gap=t.DEFAULT_EDGE_LENGTH+M.get(K.top).getHeight()/2+M.get(K.bottom).getHeight()/2)});var ft=function(q,d){return{x:q.x-d.x,y:q.y-d.y}},Et=function(q){var d=0,C=0;return q.forEach(function(A){d+=L[N.get(A)],C+=x[N.get(A)]}),{x:d/q.size,y:C/q.size}},Y=function(q,d,C,A,D){function H(et,P){var _=new Set(et),at=!0,ot=!1,At=void 0;try{for(var vt=P[Symbol.iterator](),yt;!(at=(yt=vt.next()).done);at=!0){var Rt=yt.value;_.add(Rt)}}catch(Lt){ot=!0,At=Lt}finally{try{!at&&vt.return&&vt.return()}finally{if(ot)throw At}}return _}var V=new Map;q.forEach(function(et,P){V.set(P,0)}),q.forEach(function(et,P){et.forEach(function(_){V.set(_.id,V.get(_.id)+1)})});var U=new Map,b=new Map,Z=new a;V.forEach(function(et,P){et==0?(Z.push(P),C||(d=="horizontal"?U.set(P,N.has(P)?L[N.get(P)]:A.get(P)):U.set(P,N.has(P)?x[N.get(P)]:A.get(P)))):U.set(P,Number.NEGATIVE_INFINITY),C&&b.set(P,new Set([P]))}),C&&D.forEach(function(et){var P=[];if(et.forEach(function(ot){C.has(ot)&&P.push(ot)}),P.length>0){var _=0;P.forEach(function(ot){d=="horizontal"?(U.set(ot,N.has(ot)?L[N.get(ot)]:A.get(ot)),_+=U.get(ot)):(U.set(ot,N.has(ot)?x[N.get(ot)]:A.get(ot)),_+=U.get(ot))}),_=_/P.length,et.forEach(function(ot){C.has(ot)||U.set(ot,_)})}else{var at=0;et.forEach(function(ot){d=="horizontal"?at+=N.has(ot)?L[N.get(ot)]:A.get(ot):at+=N.has(ot)?x[N.get(ot)]:A.get(ot)}),at=at/et.length,et.forEach(function(ot){U.set(ot,at)})}});for(var F=function(){var P=Z.shift(),_=q.get(P);_.forEach(function(at){if(U.get(at.id)<U.get(P)+at.gap)if(C&&C.has(at.id)){var ot=void 0;if(d=="horizontal"?ot=N.has(at.id)?L[N.get(at.id)]:A.get(at.id):ot=N.has(at.id)?x[N.get(at.id)]:A.get(at.id),U.set(at.id,ot),ot<U.get(P)+at.gap){var At=U.get(P)+at.gap-ot;b.get(P).forEach(function(vt){U.set(vt,U.get(vt)-At)})}}else U.set(at.id,U.get(P)+at.gap);V.set(at.id,V.get(at.id)-1),V.get(at.id)==0&&Z.push(at.id),C&&b.set(at.id,H(b.get(P),b.get(at.id)))})};Z.length!=0;)F();if(C){var z=new Set;q.forEach(function(et,P){et.length==0&&z.add(P)});var ut=[];b.forEach(function(et,P){if(z.has(P)){var _=!1,at=!0,ot=!1,At=void 0;try{for(var vt=et[Symbol.iterator](),yt;!(at=(yt=vt.next()).done);at=!0){var Rt=yt.value;C.has(Rt)&&(_=!0)}}catch(wt){ot=!0,At=wt}finally{try{!at&&vt.return&&vt.return()}finally{if(ot)throw At}}if(!_){var Lt=!1,St=void 0;ut.forEach(function(wt,Vt){wt.has([].concat(v(et))[0])&&(Lt=!0,St=Vt)}),Lt?et.forEach(function(wt){ut[St].add(wt)}):ut.push(new Set(et))}}}),ut.forEach(function(et,P){var _=Number.POSITIVE_INFINITY,at=Number.POSITIVE_INFINITY,ot=Number.NEGATIVE_INFINITY,At=Number.NEGATIVE_INFINITY,vt=!0,yt=!1,Rt=void 0;try{for(var Lt=et[Symbol.iterator](),St;!(vt=(St=Lt.next()).done);vt=!0){var wt=St.value,Vt=void 0;d=="horizontal"?Vt=N.has(wt)?L[N.get(wt)]:A.get(wt):Vt=N.has(wt)?x[N.get(wt)]:A.get(wt);var Ut=U.get(wt);Vt<_&&(_=Vt),Vt>ot&&(ot=Vt),Ut<at&&(at=Ut),Ut>At&&(At=Ut)}}catch(ee){yt=!0,Rt=ee}finally{try{!vt&&Lt.return&&Lt.return()}finally{if(yt)throw Rt}}var zt=(_+ot)/2-(at+At)/2,Kt=!0,Jt=!1,Qt=void 0;try{for(var Zt=et[Symbol.iterator](),_t;!(Kt=(_t=Zt.next()).done);Kt=!0){var qt=_t.value;U.set(qt,U.get(qt)+zt)}}catch(ee){Jt=!0,Qt=ee}finally{try{!Kt&&Zt.return&&Zt.return()}finally{if(Jt)throw Qt}}})}return U},J=function(q){var d=0,C=0,A=0,D=0;if(q.forEach(function(b){b.left?L[N.get(b.left)]-L[N.get(b.right)]>=0?d++:C++:x[N.get(b.top)]-x[N.get(b.bottom)]>=0?A++:D++}),d>C&&A>D)for(var H=0;H<N.size;H++)L[H]=-1*L[H],x[H]=-1*x[H];else if(d>C)for(var V=0;V<N.size;V++)L[V]=-1*L[V];else if(A>D)for(var U=0;U<N.size;U++)x[U]=-1*x[U]},r=function(q){var d=[],C=new a,A=new Set,D=0;return q.forEach(function(H,V){if(!A.has(V)){d[D]=[];var U=V;for(C.push(U),A.add(U),d[D].push(U);C.length!=0;){U=C.shift();var b=q.get(U);b.forEach(function(Z){A.has(Z.id)||(C.push(Z.id),A.add(Z.id),d[D].push(Z.id))})}D++}}),d},E=function(q){var d=new Map;return q.forEach(function(C,A){d.set(A,[])}),q.forEach(function(C,A){C.forEach(function(D){d.get(A).push(D),d.get(D.id).push({id:A,gap:D.gap,direction:D.direction})})}),d},n=function(q){var d=new Map;return q.forEach(function(C,A){d.set(A,[])}),q.forEach(function(C,A){C.forEach(function(D){d.get(D.id).push({id:A,gap:D.gap,direction:D.direction})})}),d},m=[],p=[],S=!1,O=!1,W=new Set,X=new Map,G=new Map,tt=[];if(c.fixedNodeConstraint&&c.fixedNodeConstraint.forEach(function(K){W.add(K.nodeId)}),c.relativePlacementConstraint&&(c.relativePlacementConstraint.forEach(function(K){K.left?(X.has(K.left)?X.get(K.left).push({id:K.right,gap:K.gap,direction:"horizontal"}):X.set(K.left,[{id:K.right,gap:K.gap,direction:"horizontal"}]),X.has(K.right)||X.set(K.right,[])):(X.has(K.top)?X.get(K.top).push({id:K.bottom,gap:K.gap,direction:"vertical"}):X.set(K.top,[{id:K.bottom,gap:K.gap,direction:"vertical"}]),X.has(K.bottom)||X.set(K.bottom,[]))}),G=E(X),tt=r(G)),t.TRANSFORM_ON_CONSTRAINT_HANDLING){if(c.fixedNodeConstraint&&c.fixedNodeConstraint.length>1)c.fixedNodeConstraint.forEach(function(K,q){m[q]=[K.position.x,K.position.y],p[q]=[L[N.get(K.nodeId)],x[N.get(K.nodeId)]]}),S=!0;else if(c.alignmentConstraint)(function(){var K=0;if(c.alignmentConstraint.vertical){for(var q=c.alignmentConstraint.vertical,d=function(U){var b=new Set;q[U].forEach(function(z){b.add(z)});var Z=new Set([].concat(v(b)).filter(function(z){return W.has(z)})),F=void 0;Z.size>0?F=L[N.get(Z.values().next().value)]:F=Et(b).x,q[U].forEach(function(z){m[K]=[F,x[N.get(z)]],p[K]=[L[N.get(z)],x[N.get(z)]],K++})},C=0;C<q.length;C++)d(C);S=!0}if(c.alignmentConstraint.horizontal){for(var A=c.alignmentConstraint.horizontal,D=function(U){var b=new Set;A[U].forEach(function(z){b.add(z)});var Z=new Set([].concat(v(b)).filter(function(z){return W.has(z)})),F=void 0;Z.size>0?F=L[N.get(Z.values().next().value)]:F=Et(b).y,A[U].forEach(function(z){m[K]=[L[N.get(z)],F],p[K]=[L[N.get(z)],x[N.get(z)]],K++})},H=0;H<A.length;H++)D(H);S=!0}c.relativePlacementConstraint&&(O=!0)})();else if(c.relativePlacementConstraint){for(var st=0,B=0,ht=0;ht<tt.length;ht++)tt[ht].length>st&&(st=tt[ht].length,B=ht);if(st<G.size/2)J(c.relativePlacementConstraint),S=!1,O=!1;else{var j=new Map,w=new Map,$=[];tt[B].forEach(function(K){X.get(K).forEach(function(q){q.direction=="horizontal"?(j.has(K)?j.get(K).push(q):j.set(K,[q]),j.has(q.id)||j.set(q.id,[]),$.push({left:K,right:q.id})):(w.has(K)?w.get(K).push(q):w.set(K,[q]),w.has(q.id)||w.set(q.id,[]),$.push({top:K,bottom:q.id}))})}),J($),O=!1;var k=Y(j,"horizontal"),Q=Y(w,"vertical");tt[B].forEach(function(K,q){p[q]=[L[N.get(K)],x[N.get(K)]],m[q]=[],k.has(K)?m[q][0]=k.get(K):m[q][0]=L[N.get(K)],Q.has(K)?m[q][1]=Q.get(K):m[q][1]=x[N.get(K)]}),S=!0}}if(S){for(var mt=void 0,it=l.transpose(m),Pt=l.transpose(p),Mt=0;Mt<it.length;Mt++)it[Mt]=l.multGamma(it[Mt]),Pt[Mt]=l.multGamma(Pt[Mt]);var Ht=l.multMat(it,l.transpose(Pt)),Gt=g.svd(Ht);mt=l.multMat(Gt.V,l.transpose(Gt.U));for(var dt=0;dt<N.size;dt++){var ct=[L[dt],x[dt]],xt=[mt[0][0],mt[1][0]],Dt=[mt[0][1],mt[1][1]];L[dt]=l.dotProduct(ct,xt),x[dt]=l.dotProduct(ct,Dt)}O&&J(c.relativePlacementConstraint)}}if(t.ENFORCE_CONSTRAINTS){if(c.fixedNodeConstraint&&c.fixedNodeConstraint.length>0){var Nt={x:0,y:0};c.fixedNodeConstraint.forEach(function(K,q){var d={x:L[N.get(K.nodeId)],y:x[N.get(K.nodeId)]},C=K.position,A=ft(C,d);Nt.x+=A.x,Nt.y+=A.y}),Nt.x/=c.fixedNodeConstraint.length,Nt.y/=c.fixedNodeConstraint.length,L.forEach(function(K,q){L[q]+=Nt.x}),x.forEach(function(K,q){x[q]+=Nt.y}),c.fixedNodeConstraint.forEach(function(K){L[N.get(K.nodeId)]=K.position.x,x[N.get(K.nodeId)]=K.position.y})}if(c.alignmentConstraint){if(c.alignmentConstraint.vertical)for(var Ot=c.alignmentConstraint.vertical,Ct=function(q){var d=new Set;Ot[q].forEach(function(D){d.add(D)});var C=new Set([].concat(v(d)).filter(function(D){return W.has(D)})),A=void 0;C.size>0?A=L[N.get(C.values().next().value)]:A=Et(d).x,d.forEach(function(D){W.has(D)||(L[N.get(D)]=A)})},It=0;It<Ot.length;It++)Ct(It);if(c.alignmentConstraint.horizontal)for(var Wt=c.alignmentConstraint.horizontal,$t=function(q){var d=new Set;Wt[q].forEach(function(D){d.add(D)});var C=new Set([].concat(v(d)).filter(function(D){return W.has(D)})),A=void 0;C.size>0?A=x[N.get(C.values().next().value)]:A=Et(d).y,d.forEach(function(D){W.has(D)||(x[N.get(D)]=A)})},bt=0;bt<Wt.length;bt++)$t(bt)}c.relativePlacementConstraint&&function(){var K=new Map,q=new Map,d=new Map,C=new Map,A=new Map,D=new Map,H=new Set,V=new Set;if(W.forEach(function(Bt){H.add(Bt),V.add(Bt)}),c.alignmentConstraint){if(c.alignmentConstraint.vertical)for(var U=c.alignmentConstraint.vertical,b=function(Tt){d.set("dummy"+Tt,[]),U[Tt].forEach(function(Ft){K.set(Ft,"dummy"+Tt),d.get("dummy"+Tt).push(Ft),W.has(Ft)&&H.add("dummy"+Tt)}),A.set("dummy"+Tt,L[N.get(U[Tt][0])])},Z=0;Z<U.length;Z++)b(Z);if(c.alignmentConstraint.horizontal)for(var F=c.alignmentConstraint.horizontal,z=function(Tt){C.set("dummy"+Tt,[]),F[Tt].forEach(function(Ft){q.set(Ft,"dummy"+Tt),C.get("dummy"+Tt).push(Ft),W.has(Ft)&&V.add("dummy"+Tt)}),D.set("dummy"+Tt,x[N.get(F[Tt][0])])},ut=0;ut<F.length;ut++)z(ut)}var et=new Map,P=new Map,_=function(Tt){X.get(Tt).forEach(function(Ft){var te=void 0,kt=void 0;Ft.direction=="horizontal"?(te=K.get(Tt)?K.get(Tt):Tt,K.get(Ft.id)?kt={id:K.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:kt=Ft,et.has(te)?et.get(te).push(kt):et.set(te,[kt]),et.has(kt.id)||et.set(kt.id,[])):(te=q.get(Tt)?q.get(Tt):Tt,q.get(Ft.id)?kt={id:q.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:kt=Ft,P.has(te)?P.get(te).push(kt):P.set(te,[kt]),P.has(kt.id)||P.set(kt.id,[]))})},at=!0,ot=!1,At=void 0;try{for(var vt=X.keys()[Symbol.iterator](),yt;!(at=(yt=vt.next()).done);at=!0){var Rt=yt.value;_(Rt)}}catch(Bt){ot=!0,At=Bt}finally{try{!at&&vt.return&&vt.return()}finally{if(ot)throw At}}var Lt=E(et),St=E(P),wt=r(Lt),Vt=r(St),Ut=n(et),zt=n(P),Kt=[],Jt=[];wt.forEach(function(Bt,Tt){Kt[Tt]=[],Bt.forEach(function(Ft){Ut.get(Ft).length==0&&Kt[Tt].push(Ft)})}),Vt.forEach(function(Bt,Tt){Jt[Tt]=[],Bt.forEach(function(Ft){zt.get(Ft).length==0&&Jt[Tt].push(Ft)})});var Qt=Y(et,"horizontal",H,A,Kt),Zt=Y(P,"vertical",V,D,Jt),_t=function(Tt){d.get(Tt)?d.get(Tt).forEach(function(Ft){L[N.get(Ft)]=Qt.get(Tt)}):L[N.get(Tt)]=Qt.get(Tt)},qt=!0,ee=!1,oe=void 0;try{for(var re=Qt.keys()[Symbol.iterator](),se;!(qt=(se=re.next()).done);qt=!0){var ie=se.value;_t(ie)}}catch(Bt){ee=!0,oe=Bt}finally{try{!qt&&re.return&&re.return()}finally{if(ee)throw oe}}var ce=function(Tt){C.get(Tt)?C.get(Tt).forEach(function(Ft){x[N.get(Ft)]=Zt.get(Tt)}):x[N.get(Tt)]=Zt.get(Tt)},ae=!0,he=!1,le=void 0;try{for(var ne=Zt.keys()[Symbol.iterator](),fe;!(ae=(fe=ne.next()).done);ae=!0){var ie=fe.value;ce(ie)}}catch(Bt){he=!0,le=Bt}finally{try{!ae&&ne.return&&ne.return()}finally{if(he)throw le}}}()}for(var Yt=0;Yt<rt.length;Yt++){var Xt=rt[Yt];Xt.getChild()==null&&Xt.setCenter(L[N.get(Xt.id)],x[N.get(Xt.id)])}},h.exports=u},551:h=>{h.exports=R}},o={};function s(h){var f=o[h];if(f!==void 0)return f.exports;var e=o[h]={exports:{}};return y[h](e,e.exports,s),e.exports}var i=s(45);return i})()})},"./node_modules/cytoscape-fcose/node_modules/layout-base/layout-base.js":function(jt){(function(pt,R){jt.exports=R()})(this,function(){return function(lt){var pt={};function R(y){if(pt[y])return pt[y].exports;var o=pt[y]={i:y,l:!1,exports:{}};return lt[y].call(o.exports,o,o.exports,R),o.l=!0,o.exports}return R.m=lt,R.c=pt,R.i=function(y){return y},R.d=function(y,o,s){R.o(y,o)||Object.defineProperty(y,o,{configurable:!1,enumerable:!0,get:s})},R.n=function(y){var o=y&&y.__esModule?function(){return y.default}:function(){return y};return R.d(o,"a",o),o},R.o=function(y,o){return Object.prototype.hasOwnProperty.call(y,o)},R.p="",R(R.s=28)}([function(lt,pt,R){"use strict";function y(){}y.QUALITY=1,y.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,y.DEFAULT_INCREMENTAL=!1,y.DEFAULT_ANIMATION_ON_LAYOUT=!0,y.DEFAULT_ANIMATION_DURING_LAYOUT=!1,y.DEFAULT_ANIMATION_PERIOD=50,y.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,y.DEFAULT_GRAPH_MARGIN=15,y.NODE_DIMENSIONS_INCLUDE_LABELS=!1,y.SIMPLE_NODE_SIZE=40,y.SIMPLE_NODE_HALF_SIZE=y.SIMPLE_NODE_SIZE/2,y.EMPTY_COMPOUND_NODE_SIZE=40,y.MIN_EDGE_LENGTH=1,y.WORLD_BOUNDARY=1e6,y.INITIAL_WORLD_BOUNDARY=y.WORLD_BOUNDARY/1e3,y.WORLD_CENTER_X=1200,y.WORLD_CENTER_Y=900,lt.exports=y},function(lt,pt,R){"use strict";var y=R(2),o=R(8),s=R(9);function i(f,e,v){y.call(this,v),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=v,this.bendpoints=[],this.source=f,this.target=e}i.prototype=Object.create(y.prototype);for(var h in y)i[h]=y[h];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(f,e){for(var v=this.getOtherEnd(f),t=e.getGraphManager().getRoot();;){if(v.getOwner()==e)return v;if(v.getOwner()==t)break;v=v.getOwner().getParent()}return null},i.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},lt.exports=i},function(lt,pt,R){"use strict";function y(o){this.vGraphObject=o}lt.exports=y},function(lt,pt,R){"use strict";var y=R(2),o=R(10),s=R(13),i=R(0),h=R(16),f=R(5);function e(t,a,l,g){l==null&&g==null&&(g=a),y.call(this,g),t.graphManager!=null&&(t=t.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=g,this.edges=[],this.graphManager=t,l!=null&&a!=null?this.rect=new s(a.x,a.y,l.width,l.height):this.rect=new s}e.prototype=Object.create(y.prototype);for(var v in y)e[v]=y[v];e.prototype.getEdges=function(){return this.edges},e.prototype.getChild=function(){return this.child},e.prototype.getOwner=function(){return this.owner},e.prototype.getWidth=function(){return this.rect.width},e.prototype.setWidth=function(t){this.rect.width=t},e.prototype.getHeight=function(){return this.rect.height},e.prototype.setHeight=function(t){this.rect.height=t},e.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},e.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},e.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},e.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},e.prototype.getRect=function(){return this.rect},e.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},e.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},e.prototype.setRect=function(t,a){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=a.width,this.rect.height=a.height},e.prototype.setCenter=function(t,a){this.rect.x=t-this.rect.width/2,this.rect.y=a-this.rect.height/2},e.prototype.setLocation=function(t,a){this.rect.x=t,this.rect.y=a},e.prototype.moveBy=function(t,a){this.rect.x+=t,this.rect.y+=a},e.prototype.getEdgeListToNode=function(t){var a=[],l,g=this;return g.edges.forEach(function(u){if(u.target==t){if(u.source!=g)throw"Incorrect edge source!";a.push(u)}}),a},e.prototype.getEdgesBetween=function(t){var a=[],l,g=this;return g.edges.forEach(function(u){if(!(u.source==g||u.target==g))throw"Incorrect edge source and/or target";(u.target==t||u.source==t)&&a.push(u)}),a},e.prototype.getNeighborsList=function(){var t=new Set,a=this;return a.edges.forEach(function(l){if(l.source==a)t.add(l.target);else{if(l.target!=a)throw"Incorrect incidency!";t.add(l.source)}}),t},e.prototype.withChildren=function(){var t=new Set,a,l;if(t.add(this),this.child!=null)for(var g=this.child.getNodes(),u=0;u<g.length;u++)a=g[u],l=a.withChildren(),l.forEach(function(T){t.add(T)});return t},e.prototype.getNoOfChildren=function(){var t=0,a;if(this.child==null)t=1;else for(var l=this.child.getNodes(),g=0;g<l.length;g++)a=l[g],t+=a.getNoOfChildren();return t==0&&(t=1),t},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},e.prototype.scatter=function(){var t,a,l=-i.INITIAL_WORLD_BOUNDARY,g=i.INITIAL_WORLD_BOUNDARY;t=i.WORLD_CENTER_X+h.nextDouble()*(g-l)+l;var u=-i.INITIAL_WORLD_BOUNDARY,T=i.INITIAL_WORLD_BOUNDARY;a=i.WORLD_CENTER_Y+h.nextDouble()*(T-u)+u,this.rect.x=t,this.rect.y=a},e.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var t=this.getChild();if(t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),i.NODE_DIMENSIONS_INCLUDE_LABELS){var a=t.getRight()-t.getLeft(),l=t.getBottom()-t.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(a+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>a?(this.rect.x-=(this.labelWidth-a)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(a+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(l+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>l?(this.rect.y-=(this.labelHeight-l)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(l+this.labelHeight))}}},e.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},e.prototype.transform=function(t){var a=this.rect.x;a>i.WORLD_BOUNDARY?a=i.WORLD_BOUNDARY:a<-i.WORLD_BOUNDARY&&(a=-i.WORLD_BOUNDARY);var l=this.rect.y;l>i.WORLD_BOUNDARY?l=i.WORLD_BOUNDARY:l<-i.WORLD_BOUNDARY&&(l=-i.WORLD_BOUNDARY);var g=new f(a,l),u=t.inverseTransformPoint(g);this.setLocation(u.x,u.y)},e.prototype.getLeft=function(){return this.rect.x},e.prototype.getRight=function(){return this.rect.x+this.rect.width},e.prototype.getTop=function(){return this.rect.y},e.prototype.getBottom=function(){return this.rect.y+this.rect.height},e.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},lt.exports=e},function(lt,pt,R){"use strict";var y=R(0);function o(){}for(var s in y)o[s]=y[s];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,lt.exports=o},function(lt,pt,R){"use strict";function y(o,s){o==null&&s==null?(this.x=0,this.y=0):(this.x=o,this.y=s)}y.prototype.getX=function(){return this.x},y.prototype.getY=function(){return this.y},y.prototype.setX=function(o){this.x=o},y.prototype.setY=function(o){this.y=o},y.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},y.prototype.getCopy=function(){return new y(this.x,this.y)},y.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},lt.exports=y},function(lt,pt,R){"use strict";var y=R(2),o=R(10),s=R(0),i=R(7),h=R(3),f=R(1),e=R(13),v=R(12),t=R(11);function a(g,u,T){y.call(this,T),this.estimatedSize=o.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=g,u!=null&&u instanceof i?this.graphManager=u:u!=null&&u instanceof Layout&&(this.graphManager=u.graphManager)}a.prototype=Object.create(y.prototype);for(var l in y)a[l]=y[l];a.prototype.getNodes=function(){return this.nodes},a.prototype.getEdges=function(){return this.edges},a.prototype.getGraphManager=function(){return this.graphManager},a.prototype.getParent=function(){return this.parent},a.prototype.getLeft=function(){return this.left},a.prototype.getRight=function(){return this.right},a.prototype.getTop=function(){return this.top},a.prototype.getBottom=function(){return this.bottom},a.prototype.isConnected=function(){return this.isConnected},a.prototype.add=function(g,u,T){if(u==null&&T==null){var c=g;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(c)>-1)throw"Node already in graph!";return c.owner=this,this.getNodes().push(c),c}else{var M=g;if(!(this.getNodes().indexOf(u)>-1&&this.getNodes().indexOf(T)>-1))throw"Source or target not in graph!";if(!(u.owner==T.owner&&u.owner==this))throw"Both owners must be this graph!";return u.owner!=T.owner?null:(M.source=u,M.target=T,M.isInterGraph=!1,this.getEdges().push(M),u.edges.push(M),T!=u&&T.edges.push(M),M)}},a.prototype.remove=function(g){var u=g;if(g instanceof h){if(u==null)throw"Node is null!";if(!(u.owner!=null&&u.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var T=u.edges.slice(),c,M=T.length,N=0;N<M;N++)c=T[N],c.isInterGraph?this.graphManager.remove(c):c.source.owner.remove(c);var L=this.nodes.indexOf(u);if(L==-1)throw"Node not in owner node list!";this.nodes.splice(L,1)}else if(g instanceof f){var c=g;if(c==null)throw"Edge is null!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.owner!=null&&c.target.owner!=null&&c.source.owner==this&&c.target.owner==this))throw"Source and/or target owner is invalid!";var x=c.source.edges.indexOf(c),rt=c.target.edges.indexOf(c);if(!(x>-1&&rt>-1))throw"Source and/or target doesn't know this edge!";c.source.edges.splice(x,1),c.target!=c.source&&c.target.edges.splice(rt,1);var L=c.source.owner.getEdges().indexOf(c);if(L==-1)throw"Not in owner's edge list!";c.source.owner.getEdges().splice(L,1)}},a.prototype.updateLeftTop=function(){for(var g=o.MAX_VALUE,u=o.MAX_VALUE,T,c,M,N=this.getNodes(),L=N.length,x=0;x<L;x++){var rt=N[x];T=rt.getTop(),c=rt.getLeft(),g>T&&(g=T),u>c&&(u=c)}return g==o.MAX_VALUE?null:(N[0].getParent().paddingLeft!=null?M=N[0].getParent().paddingLeft:M=this.margin,this.left=u-M,this.top=g-M,new v(this.left,this.top))},a.prototype.updateBounds=function(g){for(var u=o.MAX_VALUE,T=-o.MAX_VALUE,c=o.MAX_VALUE,M=-o.MAX_VALUE,N,L,x,rt,I,nt=this.nodes,gt=nt.length,ft=0;ft<gt;ft++){var Et=nt[ft];g&&Et.child!=null&&Et.updateBounds(),N=Et.getLeft(),L=Et.getRight(),x=Et.getTop(),rt=Et.getBottom(),u>N&&(u=N),T<L&&(T=L),c>x&&(c=x),M<rt&&(M=rt)}var Y=new e(u,c,T-u,M-c);u==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),nt[0].getParent().paddingLeft!=null?I=nt[0].getParent().paddingLeft:I=this.margin,this.left=Y.x-I,this.right=Y.x+Y.width+I,this.top=Y.y-I,this.bottom=Y.y+Y.height+I},a.calculateBounds=function(g){for(var u=o.MAX_VALUE,T=-o.MAX_VALUE,c=o.MAX_VALUE,M=-o.MAX_VALUE,N,L,x,rt,I=g.length,nt=0;nt<I;nt++){var gt=g[nt];N=gt.getLeft(),L=gt.getRight(),x=gt.getTop(),rt=gt.getBottom(),u>N&&(u=N),T<L&&(T=L),c>x&&(c=x),M<rt&&(M=rt)}var ft=new e(u,c,T-u,M-c);return ft},a.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},a.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},a.prototype.calcEstimatedSize=function(){for(var g=0,u=this.nodes,T=u.length,c=0;c<T;c++){var M=u[c];g+=M.calcEstimatedSize()}return g==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=g/Math.sqrt(this.nodes.length),this.estimatedSize},a.prototype.updateConnected=function(){var g=this;if(this.nodes.length==0){this.isConnected=!0;return}var u=new t,T=new Set,c=this.nodes[0],M,N,L=c.withChildren();for(L.forEach(function(ft){u.push(ft),T.add(ft)});u.length!==0;){c=u.shift(),M=c.getEdges();for(var x=M.length,rt=0;rt<x;rt++){var I=M[rt];if(N=I.getOtherEndInGraph(c,this),N!=null&&!T.has(N)){var nt=N.withChildren();nt.forEach(function(ft){u.push(ft),T.add(ft)})}}}if(this.isConnected=!1,T.size>=this.nodes.length){var gt=0;T.forEach(function(ft){ft.owner==g&&gt++}),gt==this.nodes.length&&(this.isConnected=!0)}},lt.exports=a},function(lt,pt,R){"use strict";var y,o=R(1);function s(i){y=R(6),this.layout=i,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var i=this.layout.newGraph(),h=this.layout.newNode(null),f=this.add(i,h);return this.setRootGraph(f),this.rootGraph},s.prototype.add=function(i,h,f,e,v){if(f==null&&e==null&&v==null){if(i==null)throw"Graph is null!";if(h==null)throw"Parent node is null!";if(this.graphs.indexOf(i)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(i),i.parent!=null)throw"Already has a parent!";if(h.child!=null)throw"Already has a child!";return i.parent=h,h.child=i,i}else{v=f,e=h,f=i;var t=e.getOwner(),a=v.getOwner();if(!(t!=null&&t.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(a!=null&&a.getGraphManager()==this))throw"Target not in this graph mgr!";if(t==a)return f.isInterGraph=!1,t.add(f,e,v);if(f.isInterGraph=!0,f.source=e,f.target=v,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},s.prototype.remove=function(i){if(i instanceof y){var h=i;if(h.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(h==this.rootGraph||h.parent!=null&&h.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(h.getEdges());for(var e,v=f.length,t=0;t<v;t++)e=f[t],h.remove(e);var a=[];a=a.concat(h.getNodes());var l;v=a.length;for(var t=0;t<v;t++)l=a[t],h.remove(l);h==this.rootGraph&&this.setRootGraph(null);var g=this.graphs.indexOf(h);this.graphs.splice(g,1),h.parent=null}else if(i instanceof o){if(e=i,e==null)throw"Edge is null!";if(!e.isInterGraph)throw"Not an inter-graph edge!";if(!(e.source!=null&&e.target!=null))throw"Source and/or target is null!";if(!(e.source.edges.indexOf(e)!=-1&&e.target.edges.indexOf(e)!=-1))throw"Source and/or target doesn't know this edge!";var g=e.source.edges.indexOf(e);if(e.source.edges.splice(g,1),g=e.target.edges.indexOf(e),e.target.edges.splice(g,1),!(e.source.owner!=null&&e.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(e.source.owner.getGraphManager().edges.indexOf(e)==-1)throw"Not in owner graph manager's edge list!";var g=e.source.owner.getGraphManager().edges.indexOf(e);e.source.owner.getGraphManager().edges.splice(g,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var i=[],h=this.getGraphs(),f=h.length,e=0;e<f;e++)i=i.concat(h[e].getNodes());this.allNodes=i}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){for(var i=[],h=this.getGraphs(),f=h.length,e=0;e<h.length;e++)i=i.concat(h[e].getEdges());i=i.concat(this.edges),this.allEdges=i}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(i){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=i},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(i){if(i.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=i,i.parent==null&&(i.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(i,h){if(!(i!=null&&h!=null))throw"assert failed";if(i==h)return!0;var f=i.getOwner(),e;do{if(e=f.getParent(),e==null)break;if(e==h)return!0;if(f=e.getOwner(),f==null)break}while(!0);f=h.getOwner();do{if(e=f.getParent(),e==null)break;if(e==i)return!0;if(f=e.getOwner(),f==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var i,h,f,e,v,t=this.getAllEdges(),a=t.length,l=0;l<a;l++){if(i=t[l],h=i.source,f=i.target,i.lca=null,i.sourceInLca=h,i.targetInLca=f,h==f){i.lca=h.getOwner();continue}for(e=h.getOwner();i.lca==null;){for(i.targetInLca=f,v=f.getOwner();i.lca==null;){if(v==e){i.lca=v;break}if(v==this.rootGraph)break;if(i.lca!=null)throw"assert failed";i.targetInLca=v.getParent(),v=i.targetInLca.getOwner()}if(e==this.rootGraph)break;i.lca==null&&(i.sourceInLca=e.getParent(),e=i.sourceInLca.getOwner())}if(i.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(i,h){if(i==h)return i.getOwner();var f=i.getOwner();do{if(f==null)break;var e=h.getOwner();do{if(e==null)break;if(e==f)return e;e=e.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},s.prototype.calcInclusionTreeDepths=function(i,h){i==null&&h==null&&(i=this.rootGraph,h=1);for(var f,e=i.getNodes(),v=e.length,t=0;t<v;t++)f=e[t],f.inclusionTreeDepth=h,f.child!=null&&this.calcInclusionTreeDepths(f.child,h+1)},s.prototype.includesInvalidEdge=function(){for(var i,h=[],f=this.edges.length,e=0;e<f;e++)i=this.edges[e],this.isOneAncestorOfOther(i.source,i.target)&&h.push(i);for(var e=0;e<h.length;e++)this.remove(h[e]);return!1},lt.exports=s},function(lt,pt,R){"use strict";var y=R(12);function o(){}o.calcSeparationAmount=function(s,i,h,f){if(!s.intersects(i))throw"assert failed";var e=new Array(2);this.decideDirectionsForOverlappingNodes(s,i,e),h[0]=Math.min(s.getRight(),i.getRight())-Math.max(s.x,i.x),h[1]=Math.min(s.getBottom(),i.getBottom())-Math.max(s.y,i.y),s.getX()<=i.getX()&&s.getRight()>=i.getRight()?h[0]+=Math.min(i.getX()-s.getX(),s.getRight()-i.getRight()):i.getX()<=s.getX()&&i.getRight()>=s.getRight()&&(h[0]+=Math.min(s.getX()-i.getX(),i.getRight()-s.getRight())),s.getY()<=i.getY()&&s.getBottom()>=i.getBottom()?h[1]+=Math.min(i.getY()-s.getY(),s.getBottom()-i.getBottom()):i.getY()<=s.getY()&&i.getBottom()>=s.getBottom()&&(h[1]+=Math.min(s.getY()-i.getY(),i.getBottom()-s.getBottom()));var v=Math.abs((i.getCenterY()-s.getCenterY())/(i.getCenterX()-s.getCenterX()));i.getCenterY()===s.getCenterY()&&i.getCenterX()===s.getCenterX()&&(v=1);var t=v*h[0],a=h[1]/v;h[0]<a?a=h[0]:t=h[1],h[0]=-1*e[0]*(a/2+f),h[1]=-1*e[1]*(t/2+f)},o.decideDirectionsForOverlappingNodes=function(s,i,h){s.getCenterX()<i.getCenterX()?h[0]=-1:h[0]=1,s.getCenterY()<i.getCenterY()?h[1]=-1:h[1]=1},o.getIntersection2=function(s,i,h){var f=s.getCenterX(),e=s.getCenterY(),v=i.getCenterX(),t=i.getCenterY();if(s.intersects(i))return h[0]=f,h[1]=e,h[2]=v,h[3]=t,!0;var a=s.getX(),l=s.getY(),g=s.getRight(),u=s.getX(),T=s.getBottom(),c=s.getRight(),M=s.getWidthHalf(),N=s.getHeightHalf(),L=i.getX(),x=i.getY(),rt=i.getRight(),I=i.getX(),nt=i.getBottom(),gt=i.getRight(),ft=i.getWidthHalf(),Et=i.getHeightHalf(),Y=!1,J=!1;if(f===v){if(e>t)return h[0]=f,h[1]=l,h[2]=v,h[3]=nt,!1;if(e<t)return h[0]=f,h[1]=T,h[2]=v,h[3]=x,!1}else if(e===t){if(f>v)return h[0]=a,h[1]=e,h[2]=rt,h[3]=t,!1;if(f<v)return h[0]=g,h[1]=e,h[2]=L,h[3]=t,!1}else{var r=s.height/s.width,E=i.height/i.width,n=(t-e)/(v-f),m=void 0,p=void 0,S=void 0,O=void 0,W=void 0,X=void 0;if(-r===n?f>v?(h[0]=u,h[1]=T,Y=!0):(h[0]=g,h[1]=l,Y=!0):r===n&&(f>v?(h[0]=a,h[1]=l,Y=!0):(h[0]=c,h[1]=T,Y=!0)),-E===n?v>f?(h[2]=I,h[3]=nt,J=!0):(h[2]=rt,h[3]=x,J=!0):E===n&&(v>f?(h[2]=L,h[3]=x,J=!0):(h[2]=gt,h[3]=nt,J=!0)),Y&&J)return!1;if(f>v?e>t?(m=this.getCardinalDirection(r,n,4),p=this.getCardinalDirection(E,n,2)):(m=this.getCardinalDirection(-r,n,3),p=this.getCardinalDirection(-E,n,1)):e>t?(m=this.getCardinalDirection(-r,n,1),p=this.getCardinalDirection(-E,n,3)):(m=this.getCardinalDirection(r,n,2),p=this.getCardinalDirection(E,n,4)),!Y)switch(m){case 1:O=l,S=f+-N/n,h[0]=S,h[1]=O;break;case 2:S=c,O=e+M*n,h[0]=S,h[1]=O;break;case 3:O=T,S=f+N/n,h[0]=S,h[1]=O;break;case 4:S=u,O=e+-M*n,h[0]=S,h[1]=O;break}if(!J)switch(p){case 1:X=x,W=v+-Et/n,h[2]=W,h[3]=X;break;case 2:W=gt,X=t+ft*n,h[2]=W,h[3]=X;break;case 3:X=nt,W=v+Et/n,h[2]=W,h[3]=X;break;case 4:W=I,X=t+-ft*n,h[2]=W,h[3]=X;break}}return!1},o.getCardinalDirection=function(s,i,h){return s>i?h:1+h%4},o.getIntersection=function(s,i,h,f){if(f==null)return this.getIntersection2(s,i,h);var e=s.x,v=s.y,t=i.x,a=i.y,l=h.x,g=h.y,u=f.x,T=f.y,c=void 0,M=void 0,N=void 0,L=void 0,x=void 0,rt=void 0,I=void 0,nt=void 0,gt=void 0;return N=a-v,x=e-t,I=t*v-e*a,L=T-g,rt=l-u,nt=u*g-l*T,gt=N*rt-L*x,gt===0?null:(c=(x*nt-rt*I)/gt,M=(L*I-N*nt)/gt,new y(c,M))},o.angleOfVector=function(s,i,h,f){var e=void 0;return s!==h?(e=Math.atan((f-i)/(h-s)),h<s?e+=Math.PI:f<i&&(e+=this.TWO_PI)):f<i?e=this.ONE_AND_HALF_PI:e=this.HALF_PI,e},o.doIntersect=function(s,i,h,f){var e=s.x,v=s.y,t=i.x,a=i.y,l=h.x,g=h.y,u=f.x,T=f.y,c=(t-e)*(T-g)-(u-l)*(a-v);if(c===0)return!1;var M=((T-g)*(u-e)+(l-u)*(T-v))/c,N=((v-a)*(u-e)+(t-e)*(T-v))/c;return 0<M&&M<1&&0<N&&N<1},o.findCircleLineIntersections=function(s,i,h,f,e,v,t){var a=(h-s)*(h-s)+(f-i)*(f-i),l=2*((s-e)*(h-s)+(i-v)*(f-i)),g=(s-e)*(s-e)+(i-v)*(i-v)-t*t,u=l*l-4*a*g;if(u>=0){var T=(-l+Math.sqrt(l*l-4*a*g))/(2*a),c=(-l-Math.sqrt(l*l-4*a*g))/(2*a),M=null;return T>=0&&T<=1?[T]:c>=0&&c<=1?[c]:M}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,lt.exports=o},function(lt,pt,R){"use strict";function y(){}y.sign=function(o){return o>0?1:o<0?-1:0},y.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},y.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},lt.exports=y},function(lt,pt,R){"use strict";function y(){}y.MAX_VALUE=2147483647,y.MIN_VALUE=-2147483648,lt.exports=y},function(lt,pt,R){"use strict";var y=function(){function e(v,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(v,l.key,l)}}return function(v,t,a){return t&&e(v.prototype,t),a&&e(v,a),v}}();function o(e,v){if(!(e instanceof v))throw new TypeError("Cannot call a class as a function")}var s=function(v){return{value:v,next:null,prev:null}},i=function(v,t,a,l){return v!==null?v.next=t:l.head=t,a!==null?a.prev=t:l.tail=t,t.prev=v,t.next=a,l.length++,t},h=function(v,t){var a=v.prev,l=v.next;return a!==null?a.next=l:t.head=l,l!==null?l.prev=a:t.tail=a,v.prev=v.next=null,t.length--,v},f=function(){function e(v){var t=this;o(this,e),this.length=0,this.head=null,this.tail=null,v?.forEach(function(a){return t.push(a)})}return y(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(t,a){return i(a.prev,s(t),a,this)}},{key:"insertAfter",value:function(t,a){return i(a,s(t),a.next,this)}},{key:"insertNodeBefore",value:function(t,a){return i(a.prev,t,a,this)}},{key:"insertNodeAfter",value:function(t,a){return i(a,t,a.next,this)}},{key:"push",value:function(t){return i(this.tail,s(t),null,this)}},{key:"unshift",value:function(t){return i(null,s(t),this.head,this)}},{key:"remove",value:function(t){return h(t,this)}},{key:"pop",value:function(){return h(this.tail,this).value}},{key:"popNode",value:function(){return h(this.tail,this)}},{key:"shift",value:function(){return h(this.head,this).value}},{key:"shiftNode",value:function(){return h(this.head,this)}},{key:"get_object_at",value:function(t){if(t<=this.length()){for(var a=1,l=this.head;a<t;)l=l.next,a++;return l.value}}},{key:"set_object_at",value:function(t,a){if(t<=this.length()){for(var l=1,g=this.head;l<t;)g=g.next,l++;g.value=a}}}]),e}();lt.exports=f},function(lt,pt,R){"use strict";function y(o,s,i){this.x=null,this.y=null,o==null&&s==null&&i==null?(this.x=0,this.y=0):typeof o=="number"&&typeof s=="number"&&i==null?(this.x=o,this.y=s):o.constructor.name=="Point"&&s==null&&i==null&&(i=o,this.x=i.x,this.y=i.y)}y.prototype.getX=function(){return this.x},y.prototype.getY=function(){return this.y},y.prototype.getLocation=function(){return new y(this.x,this.y)},y.prototype.setLocation=function(o,s,i){o.constructor.name=="Point"&&s==null&&i==null?(i=o,this.setLocation(i.x,i.y)):typeof o=="number"&&typeof s=="number"&&i==null&&(parseInt(o)==o&&parseInt(s)==s?this.move(o,s):(this.x=Math.floor(o+.5),this.y=Math.floor(s+.5)))},y.prototype.move=function(o,s){this.x=o,this.y=s},y.prototype.translate=function(o,s){this.x+=o,this.y+=s},y.prototype.equals=function(o){if(o.constructor.name=="Point"){var s=o;return this.x==s.x&&this.y==s.y}return this==o},y.prototype.toString=function(){return new y().constructor.name+"[x="+this.x+",y="+this.y+"]"},lt.exports=y},function(lt,pt,R){"use strict";function y(o,s,i,h){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&s!=null&&i!=null&&h!=null&&(this.x=o,this.y=s,this.width=i,this.height=h)}y.prototype.getX=function(){return this.x},y.prototype.setX=function(o){this.x=o},y.prototype.getY=function(){return this.y},y.prototype.setY=function(o){this.y=o},y.prototype.getWidth=function(){return this.width},y.prototype.setWidth=function(o){this.width=o},y.prototype.getHeight=function(){return this.height},y.prototype.setHeight=function(o){this.height=o},y.prototype.getRight=function(){return this.x+this.width},y.prototype.getBottom=function(){return this.y+this.height},y.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},y.prototype.getCenterX=function(){return this.x+this.width/2},y.prototype.getMinX=function(){return this.getX()},y.prototype.getMaxX=function(){return this.getX()+this.width},y.prototype.getCenterY=function(){return this.y+this.height/2},y.prototype.getMinY=function(){return this.getY()},y.prototype.getMaxY=function(){return this.getY()+this.height},y.prototype.getWidthHalf=function(){return this.width/2},y.prototype.getHeightHalf=function(){return this.height/2},lt.exports=y},function(lt,pt,R){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function o(){}o.lastID=0,o.createID=function(s){return o.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=o.getString(),o.lastID++),s.uniqueID)},o.getString=function(s){return s==null&&(s=o.lastID),"Object#"+s},o.isPrimitive=function(s){var i=typeof s>"u"?"undefined":y(s);return s==null||i!="object"&&i!="function"},lt.exports=o},function(lt,pt,R){"use strict";function y(l){if(Array.isArray(l)){for(var g=0,u=Array(l.length);g<l.length;g++)u[g]=l[g];return u}else return Array.from(l)}var o=R(0),s=R(7),i=R(3),h=R(1),f=R(6),e=R(5),v=R(17),t=R(29);function a(l){t.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,l!=null&&(this.isRemoteUse=l)}a.RANDOM_SEED=1,a.prototype=Object.create(t.prototype),a.prototype.getGraphManager=function(){return this.graphManager},a.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},a.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},a.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},a.prototype.newGraphManager=function(){var l=new s(this);return this.graphManager=l,l},a.prototype.newGraph=function(l){return new f(null,this.graphManager,l)},a.prototype.newNode=function(l){return new i(this.graphManager,l)},a.prototype.newEdge=function(l){return new h(null,null,l)},a.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},a.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var l;return this.checkLayoutSuccess()?l=!1:l=this.layout(),o.ANIMATE==="during"?!1:(l&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,l)},a.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},a.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var l,g=this.graphManager.getAllEdges(),u=0;u<g.length;u++)l=g[u];for(var T,c=this.graphManager.getRoot().getNodes(),u=0;u<c.length;u++)T=c[u];this.update(this.graphManager.getRoot())}},a.prototype.update=function(l){if(l==null)this.update2();else if(l instanceof i){var g=l;if(g.getChild()!=null)for(var u=g.getChild().getNodes(),T=0;T<u.length;T++)update(u[T]);if(g.vGraphObject!=null){var c=g.vGraphObject;c.update(g)}}else if(l instanceof h){var M=l;if(M.vGraphObject!=null){var N=M.vGraphObject;N.update(M)}}else if(l instanceof f){var L=l;if(L.vGraphObject!=null){var x=L.vGraphObject;x.update(L)}}},a.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},a.prototype.transform=function(l){if(l==null)this.transform(new e(0,0));else{var g=new v,u=this.graphManager.getRoot().updateLeftTop();if(u!=null){g.setWorldOrgX(l.x),g.setWorldOrgY(l.y),g.setDeviceOrgX(u.x),g.setDeviceOrgY(u.y);for(var T=this.getAllNodes(),c,M=0;M<T.length;M++)c=T[M],c.transform(g)}}},a.prototype.positionNodesRandomly=function(l){if(l==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var g,u,T=l.getNodes(),c=0;c<T.length;c++)g=T[c],u=g.getChild(),u==null||u.getNodes().length==0?g.scatter():(this.positionNodesRandomly(u),g.updateBounds())},a.prototype.getFlatForest=function(){for(var l=[],g=!0,u=this.graphManager.getRoot().getNodes(),T=!0,c=0;c<u.length;c++)u[c].getChild()!=null&&(T=!1);if(!T)return l;var M=new Set,N=[],L=new Map,x=[];for(x=x.concat(u);x.length>0&&g;){for(N.push(x[0]);N.length>0&&g;){var rt=N[0];N.splice(0,1),M.add(rt);for(var I=rt.getEdges(),c=0;c<I.length;c++){var nt=I[c].getOtherEnd(rt);if(L.get(rt)!=nt)if(!M.has(nt))N.push(nt),L.set(nt,rt);else{g=!1;break}}}if(!g)l=[];else{var gt=[].concat(y(M));l.push(gt);for(var c=0;c<gt.length;c++){var ft=gt[c],Et=x.indexOf(ft);Et>-1&&x.splice(Et,1)}M=new Set,L=new Map}}return l},a.prototype.createDummyNodesForBendpoints=function(l){for(var g=[],u=l.source,T=this.graphManager.calcLowestCommonAncestor(l.source,l.target),c=0;c<l.bendpoints.length;c++){var M=this.newNode(null);M.setRect(new Point(0,0),new Dimension(1,1)),T.add(M);var N=this.newEdge(null);this.graphManager.add(N,u,M),g.add(M),u=M}var N=this.newEdge(null);return this.graphManager.add(N,u,l.target),this.edgeToDummyNodes.set(l,g),l.isInterGraph()?this.graphManager.remove(l):T.remove(l),g},a.prototype.createBendpointsFromDummyNodes=function(){var l=[];l=l.concat(this.graphManager.getAllEdges()),l=[].concat(y(this.edgeToDummyNodes.keys())).concat(l);for(var g=0;g<l.length;g++){var u=l[g];if(u.bendpoints.length>0){for(var T=this.edgeToDummyNodes.get(u),c=0;c<T.length;c++){var M=T[c],N=new e(M.getCenterX(),M.getCenterY()),L=u.bendpoints.get(c);L.x=N.x,L.y=N.y,M.getOwner().remove(M)}this.graphManager.add(u,u.source,u.target)}}},a.transform=function(l,g,u,T){if(u!=null&&T!=null){var c=g;if(l<=50){var M=g/u;c-=(g-M)/50*(50-l)}else{var N=g*T;c+=(N-g)/50*(l-50)}return c}else{var L,x;return l<=50?(L=9*g/500,x=g/10):(L=9*g/50,x=-8*g),L*l+x}},a.findCenterOfTree=function(l){var g=[];g=g.concat(l);var u=[],T=new Map,c=!1,M=null;(g.length==1||g.length==2)&&(c=!0,M=g[0]);for(var N=0;N<g.length;N++){var L=g[N],x=L.getNeighborsList().size;T.set(L,L.getNeighborsList().size),x==1&&u.push(L)}var rt=[];for(rt=rt.concat(u);!c;){var I=[];I=I.concat(rt),rt=[];for(var N=0;N<g.length;N++){var L=g[N],nt=g.indexOf(L);nt>=0&&g.splice(nt,1);var gt=L.getNeighborsList();gt.forEach(function(Y){if(u.indexOf(Y)<0){var J=T.get(Y),r=J-1;r==1&&rt.push(Y),T.set(Y,r)}})}u=u.concat(rt),(g.length==1||g.length==2)&&(c=!0,M=g[0])}return M},a.prototype.setGraphManager=function(l){this.graphManager=l},lt.exports=a},function(lt,pt,R){"use strict";function y(){}y.seed=1,y.x=0,y.nextDouble=function(){return y.x=Math.sin(y.seed++)*1e4,y.x-Math.floor(y.x)},lt.exports=y},function(lt,pt,R){"use strict";var y=R(5);function o(s,i){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(s){this.lworldExtX=s},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(s){this.lworldExtY=s},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},o.prototype.transformX=function(s){var i=0,h=this.lworldExtX;return h!=0&&(i=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/h),i},o.prototype.transformY=function(s){var i=0,h=this.lworldExtY;return h!=0&&(i=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/h),i},o.prototype.inverseTransformX=function(s){var i=0,h=this.ldeviceExtX;return h!=0&&(i=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/h),i},o.prototype.inverseTransformY=function(s){var i=0,h=this.ldeviceExtY;return h!=0&&(i=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/h),i},o.prototype.inverseTransformPoint=function(s){var i=new y(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return i},lt.exports=o},function(lt,pt,R){"use strict";function y(t){if(Array.isArray(t)){for(var a=0,l=Array(t.length);a<t.length;a++)l[a]=t[a];return l}else return Array.from(t)}var o=R(15),s=R(4),i=R(0),h=R(8),f=R(9);function e(){o.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}e.prototype=Object.create(o.prototype);for(var v in o)e[v]=o[v];e.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},e.prototype.calcIdealEdgeLengths=function(){for(var t,a,l,g,u,T,c,M=this.getGraphManager().getAllEdges(),N=0;N<M.length;N++)t=M[N],a=t.idealLength,t.isInterGraph&&(g=t.getSource(),u=t.getTarget(),T=t.getSourceInLca().getEstimatedSize(),c=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=T+c-2*i.SIMPLE_NODE_SIZE),l=t.getLca().getInclusionTreeDepth(),t.idealLength+=a*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+u.getInclusionTreeDepth()-2*l))},e.prototype.initSpringEmbedder=function(){var t=this.getAllNodes().length;this.incremental?(t>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(t-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(t>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(t-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},e.prototype.calcSpringForces=function(){for(var t=this.getAllEdges(),a,l=0;l<t.length;l++)a=t[l],this.calcSpringForce(a,a.idealLength)},e.prototype.calcRepulsionForces=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l,g,u,T,c=this.getAllNodes(),M;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&t&&this.updateGrid(),M=new Set,l=0;l<c.length;l++)u=c[l],this.calculateRepulsionForceOfANode(u,M,t,a),M.add(u);else for(l=0;l<c.length;l++)for(u=c[l],g=l+1;g<c.length;g++)T=c[g],u.getOwner()==T.getOwner()&&this.calcRepulsionForce(u,T)},e.prototype.calcGravitationalForces=function(){for(var t,a=this.getAllNodesToApplyGravitation(),l=0;l<a.length;l++)t=a[l],this.calcGravitationalForce(t)},e.prototype.moveNodes=function(){for(var t=this.getAllNodes(),a,l=0;l<t.length;l++)a=t[l],a.move()},e.prototype.calcSpringForce=function(t,a){var l=t.getSource(),g=t.getTarget(),u,T,c,M;if(this.uniformLeafNodeSizes&&l.getChild()==null&&g.getChild()==null)t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;u=t.getLength(),u!=0&&(T=t.edgeElasticity*(u-a),c=T*(t.lengthX/u),M=T*(t.lengthY/u),l.springForceX+=c,l.springForceY+=M,g.springForceX-=c,g.springForceY-=M)},e.prototype.calcRepulsionForce=function(t,a){var l=t.getRect(),g=a.getRect(),u=new Array(2),T=new Array(4),c,M,N,L,x,rt,I;if(l.intersects(g)){h.calcSeparationAmount(l,g,u,s.DEFAULT_EDGE_LENGTH/2),rt=2*u[0],I=2*u[1];var nt=t.noOfChildren*a.noOfChildren/(t.noOfChildren+a.noOfChildren);t.repulsionForceX-=nt*rt,t.repulsionForceY-=nt*I,a.repulsionForceX+=nt*rt,a.repulsionForceY+=nt*I}else this.uniformLeafNodeSizes&&t.getChild()==null&&a.getChild()==null?(c=g.getCenterX()-l.getCenterX(),M=g.getCenterY()-l.getCenterY()):(h.getIntersection(l,g,T),c=T[2]-T[0],M=T[3]-T[1]),Math.abs(c)<s.MIN_REPULSION_DIST&&(c=f.sign(c)*s.MIN_REPULSION_DIST),Math.abs(M)<s.MIN_REPULSION_DIST&&(M=f.sign(M)*s.MIN_REPULSION_DIST),N=c*c+M*M,L=Math.sqrt(N),x=(t.nodeRepulsion/2+a.nodeRepulsion/2)*t.noOfChildren*a.noOfChildren/N,rt=x*c/L,I=x*M/L,t.repulsionForceX-=rt,t.repulsionForceY-=I,a.repulsionForceX+=rt,a.repulsionForceY+=I},e.prototype.calcGravitationalForce=function(t){var a,l,g,u,T,c,M,N;a=t.getOwner(),l=(a.getRight()+a.getLeft())/2,g=(a.getTop()+a.getBottom())/2,u=t.getCenterX()-l,T=t.getCenterY()-g,c=Math.abs(u)+t.getWidth()/2,M=Math.abs(T)+t.getHeight()/2,t.getOwner()==this.graphManager.getRoot()?(N=a.getEstimatedSize()*this.gravityRangeFactor,(c>N||M>N)&&(t.gravitationForceX=-this.gravityConstant*u,t.gravitationForceY=-this.gravityConstant*T)):(N=a.getEstimatedSize()*this.compoundGravityRangeFactor,(c>N||M>N)&&(t.gravitationForceX=-this.gravityConstant*u*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*T*this.compoundGravityConstant))},e.prototype.isConverged=function(){var t,a=!1;return this.totalIterations>this.maxIterations/3&&(a=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||a},e.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},e.prototype.calcNoOfChildrenForAllNodes=function(){for(var t,a=this.graphManager.getAllNodes(),l=0;l<a.length;l++)t=a[l],t.noOfChildren=t.getNoOfChildren()},e.prototype.calcGrid=function(t){var a=0,l=0;a=parseInt(Math.ceil((t.getRight()-t.getLeft())/this.repulsionRange)),l=parseInt(Math.ceil((t.getBottom()-t.getTop())/this.repulsionRange));for(var g=new Array(a),u=0;u<a;u++)g[u]=new Array(l);for(var u=0;u<a;u++)for(var T=0;T<l;T++)g[u][T]=new Array;return g},e.prototype.addNodeToGrid=function(t,a,l){var g=0,u=0,T=0,c=0;g=parseInt(Math.floor((t.getRect().x-a)/this.repulsionRange)),u=parseInt(Math.floor((t.getRect().width+t.getRect().x-a)/this.repulsionRange)),T=parseInt(Math.floor((t.getRect().y-l)/this.repulsionRange)),c=parseInt(Math.floor((t.getRect().height+t.getRect().y-l)/this.repulsionRange));for(var M=g;M<=u;M++)for(var N=T;N<=c;N++)this.grid[M][N].push(t),t.setGridCoordinates(g,u,T,c)},e.prototype.updateGrid=function(){var t,a,l=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),t=0;t<l.length;t++)a=l[t],this.addNodeToGrid(a,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},e.prototype.calculateRepulsionForceOfANode=function(t,a,l,g){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&l||g){var u=new Set;t.surrounding=new Array;for(var T,c=this.grid,M=t.startX-1;M<t.finishX+2;M++)for(var N=t.startY-1;N<t.finishY+2;N++)if(!(M<0||N<0||M>=c.length||N>=c[0].length)){for(var L=0;L<c[M][N].length;L++)if(T=c[M][N][L],!(t.getOwner()!=T.getOwner()||t==T)&&!a.has(T)&&!u.has(T)){var x=Math.abs(t.getCenterX()-T.getCenterX())-(t.getWidth()/2+T.getWidth()/2),rt=Math.abs(t.getCenterY()-T.getCenterY())-(t.getHeight()/2+T.getHeight()/2);x<=this.repulsionRange&&rt<=this.repulsionRange&&u.add(T)}}t.surrounding=[].concat(y(u))}for(M=0;M<t.surrounding.length;M++)this.calcRepulsionForce(t,t.surrounding[M])},e.prototype.calcRepulsionRange=function(){return 0},lt.exports=e},function(lt,pt,R){"use strict";var y=R(1),o=R(4);function s(h,f,e){y.call(this,h,f,e),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}s.prototype=Object.create(y.prototype);for(var i in y)s[i]=y[i];lt.exports=s},function(lt,pt,R){"use strict";var y=R(3),o=R(4);function s(h,f,e,v){y.call(this,h,f,e,v),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(y.prototype);for(var i in y)s[i]=y[i];s.prototype.setGridCoordinates=function(h,f,e,v){this.startX=h,this.finishX=f,this.startY=e,this.finishY=v},lt.exports=s},function(lt,pt,R){"use strict";function y(o,s){this.width=0,this.height=0,o!==null&&s!==null&&(this.height=s,this.width=o)}y.prototype.getWidth=function(){return this.width},y.prototype.setWidth=function(o){this.width=o},y.prototype.getHeight=function(){return this.height},y.prototype.setHeight=function(o){this.height=o},lt.exports=y},function(lt,pt,R){"use strict";var y=R(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(s,i){var h=y.createID(s);this.contains(h)||(this.map[h]=i,this.keys.push(s))},o.prototype.contains=function(s){var i=y.createID(s);return this.map[s]!=null},o.prototype.get=function(s){var i=y.createID(s);return this.map[i]},o.prototype.keySet=function(){return this.keys},lt.exports=o},function(lt,pt,R){"use strict";var y=R(14);function o(){this.set={}}o.prototype.add=function(s){var i=y.createID(s);this.contains(i)||(this.set[i]=s)},o.prototype.remove=function(s){delete this.set[y.createID(s)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(s){return this.set[y.createID(s)]==s},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(s){for(var i=Object.keys(this.set),h=i.length,f=0;f<h;f++)s.push(this.set[i[f]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(s){for(var i=s.length,h=0;h<i;h++){var f=s[h];this.add(f)}},lt.exports=o},function(lt,pt,R){"use strict";function y(){}y.multMat=function(o,s){for(var i=[],h=0;h<o.length;h++){i[h]=[];for(var f=0;f<s[0].length;f++){i[h][f]=0;for(var e=0;e<o[0].length;e++)i[h][f]+=o[h][e]*s[e][f]}}return i},y.transpose=function(o){for(var s=[],i=0;i<o[0].length;i++){s[i]=[];for(var h=0;h<o.length;h++)s[i][h]=o[h][i]}return s},y.multCons=function(o,s){for(var i=[],h=0;h<o.length;h++)i[h]=o[h]*s;return i},y.minusOp=function(o,s){for(var i=[],h=0;h<o.length;h++)i[h]=o[h]-s[h];return i},y.dotProduct=function(o,s){for(var i=0,h=0;h<o.length;h++)i+=o[h]*s[h];return i},y.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},y.normalize=function(o){for(var s=[],i=this.mag(o),h=0;h<o.length;h++)s[h]=o[h]/i;return s},y.multGamma=function(o){for(var s=[],i=0,h=0;h<o.length;h++)i+=o[h];i*=-1/o.length;for(var f=0;f<o.length;f++)s[f]=i+o[f];return s},y.multL=function(o,s,i){for(var h=[],f=[],e=[],v=0;v<s[0].length;v++){for(var t=0,a=0;a<s.length;a++)t+=-.5*s[a][v]*o[a];f[v]=t}for(var l=0;l<i.length;l++){for(var g=0,u=0;u<i.length;u++)g+=i[l][u]*f[u];e[l]=g}for(var T=0;T<s.length;T++){for(var c=0,M=0;M<s[0].length;M++)c+=s[T][M]*e[M];h[T]=c}return h},lt.exports=y},function(lt,pt,R){"use strict";var y=function(){function h(f,e){for(var v=0;v<e.length;v++){var t=e[v];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}return function(f,e,v){return e&&h(f.prototype,e),v&&h(f,v),f}}();function o(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}var s=R(11),i=function(){function h(f,e){o(this,h),(e!==null||e!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var v=void 0;f instanceof s?v=f.size():v=f.length,this._quicksort(f,0,v-1)}return y(h,[{key:"_quicksort",value:function(e,v,t){if(v<t){var a=this._partition(e,v,t);this._quicksort(e,v,a),this._quicksort(e,a+1,t)}}},{key:"_partition",value:function(e,v,t){for(var a=this._get(e,v),l=v,g=t;;){for(;this.compareFunction(a,this._get(e,g));)g--;for(;this.compareFunction(this._get(e,l),a);)l++;if(l<g)this._swap(e,l,g),l++,g--;else return g}}},{key:"_get",value:function(e,v){return e instanceof s?e.get_object_at(v):e[v]}},{key:"_set",value:function(e,v,t){e instanceof s?e.set_object_at(v,t):e[v]=t}},{key:"_swap",value:function(e,v,t){var a=this._get(e,v);this._set(e,v,this._get(e,t)),this._set(e,t,a)}},{key:"_defaultCompareFunction",value:function(e,v){return v>e}}]),h}();lt.exports=i},function(lt,pt,R){"use strict";function y(){}y.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var s=Math.min(this.m,this.n);this.s=function(vt){for(var yt=[];vt-- >0;)yt.push(0);return yt}(Math.min(this.m+1,this.n)),this.U=function(vt){var yt=function Rt(Lt){if(Lt.length==0)return 0;for(var St=[],wt=0;wt<Lt[0];wt++)St.push(Rt(Lt.slice(1)));return St};return yt(vt)}([this.m,s]),this.V=function(vt){var yt=function Rt(Lt){if(Lt.length==0)return 0;for(var St=[],wt=0;wt<Lt[0];wt++)St.push(Rt(Lt.slice(1)));return St};return yt(vt)}([this.n,this.n]);for(var i=function(vt){for(var yt=[];vt-- >0;)yt.push(0);return yt}(this.n),h=function(vt){for(var yt=[];vt-- >0;)yt.push(0);return yt}(this.m),f=!0,e=!0,v=Math.min(this.m-1,this.n),t=Math.max(0,Math.min(this.n-2,this.m)),a=0;a<Math.max(v,t);a++){if(a<v){this.s[a]=0;for(var l=a;l<this.m;l++)this.s[a]=y.hypot(this.s[a],o[l][a]);if(this.s[a]!==0){o[a][a]<0&&(this.s[a]=-this.s[a]);for(var g=a;g<this.m;g++)o[g][a]/=this.s[a];o[a][a]+=1}this.s[a]=-this.s[a]}for(var u=a+1;u<this.n;u++){if(function(vt,yt){return vt&&yt}(a<v,this.s[a]!==0)){for(var T=0,c=a;c<this.m;c++)T+=o[c][a]*o[c][u];T=-T/o[a][a];for(var M=a;M<this.m;M++)o[M][u]+=T*o[M][a]}i[u]=o[a][u]}if(function(vt,yt){return vt&&yt}(f,a<v))for(var N=a;N<this.m;N++)this.U[N][a]=o[N][a];if(a<t){i[a]=0;for(var L=a+1;L<this.n;L++)i[a]=y.hypot(i[a],i[L]);if(i[a]!==0){i[a+1]<0&&(i[a]=-i[a]);for(var x=a+1;x<this.n;x++)i[x]/=i[a];i[a+1]+=1}if(i[a]=-i[a],function(vt,yt){return vt&&yt}(a+1<this.m,i[a]!==0)){for(var rt=a+1;rt<this.m;rt++)h[rt]=0;for(var I=a+1;I<this.n;I++)for(var nt=a+1;nt<this.m;nt++)h[nt]+=i[I]*o[nt][I];for(var gt=a+1;gt<this.n;gt++)for(var ft=-i[gt]/i[a+1],Et=a+1;Et<this.m;Et++)o[Et][gt]+=ft*h[Et]}if(e)for(var Y=a+1;Y<this.n;Y++)this.V[Y][a]=i[Y]}}var J=Math.min(this.n,this.m+1);if(v<this.n&&(this.s[v]=o[v][v]),this.m<J&&(this.s[J-1]=0),t+1<J&&(i[t]=o[t][J-1]),i[J-1]=0,f){for(var r=v;r<s;r++){for(var E=0;E<this.m;E++)this.U[E][r]=0;this.U[r][r]=1}for(var n=v-1;n>=0;n--)if(this.s[n]!==0){for(var m=n+1;m<s;m++){for(var p=0,S=n;S<this.m;S++)p+=this.U[S][n]*this.U[S][m];p=-p/this.U[n][n];for(var O=n;O<this.m;O++)this.U[O][m]+=p*this.U[O][n]}for(var W=n;W<this.m;W++)this.U[W][n]=-this.U[W][n];this.U[n][n]=1+this.U[n][n];for(var X=0;X<n-1;X++)this.U[X][n]=0}else{for(var G=0;G<this.m;G++)this.U[G][n]=0;this.U[n][n]=1}}if(e)for(var tt=this.n-1;tt>=0;tt--){if(function(vt,yt){return vt&&yt}(tt<t,i[tt]!==0))for(var st=tt+1;st<s;st++){for(var B=0,ht=tt+1;ht<this.n;ht++)B+=this.V[ht][tt]*this.V[ht][st];B=-B/this.V[tt+1][tt];for(var j=tt+1;j<this.n;j++)this.V[j][st]+=B*this.V[j][tt]}for(var w=0;w<this.n;w++)this.V[w][tt]=0;this.V[tt][tt]=1}for(var $=J-1,k=0,Q=Math.pow(2,-52),mt=Math.pow(2,-966);J>0;){var it=void 0,Pt=void 0;for(it=J-2;it>=-1&&it!==-1;it--)if(Math.abs(i[it])<=mt+Q*(Math.abs(this.s[it])+Math.abs(this.s[it+1]))){i[it]=0;break}if(it===J-2)Pt=4;else{var Mt=void 0;for(Mt=J-1;Mt>=it&&Mt!==it;Mt--){var Ht=(Mt!==J?Math.abs(i[Mt]):0)+(Mt!==it+1?Math.abs(i[Mt-1]):0);if(Math.abs(this.s[Mt])<=mt+Q*Ht){this.s[Mt]=0;break}}Mt===it?Pt=3:Mt===J-1?Pt=1:(Pt=2,it=Mt)}switch(it++,Pt){case 1:{var Gt=i[J-2];i[J-2]=0;for(var dt=J-2;dt>=it;dt--){var ct=y.hypot(this.s[dt],Gt),xt=this.s[dt]/ct,Dt=Gt/ct;if(this.s[dt]=ct,dt!==it&&(Gt=-Dt*i[dt-1],i[dt-1]=xt*i[dt-1]),e)for(var Nt=0;Nt<this.n;Nt++)ct=xt*this.V[Nt][dt]+Dt*this.V[Nt][J-1],this.V[Nt][J-1]=-Dt*this.V[Nt][dt]+xt*this.V[Nt][J-1],this.V[Nt][dt]=ct}}break;case 2:{var Ot=i[it-1];i[it-1]=0;for(var Ct=it;Ct<J;Ct++){var It=y.hypot(this.s[Ct],Ot),Wt=this.s[Ct]/It,$t=Ot/It;if(this.s[Ct]=It,Ot=-$t*i[Ct],i[Ct]=Wt*i[Ct],f)for(var bt=0;bt<this.m;bt++)It=Wt*this.U[bt][Ct]+$t*this.U[bt][it-1],this.U[bt][it-1]=-$t*this.U[bt][Ct]+Wt*this.U[bt][it-1],this.U[bt][Ct]=It}}break;case 3:{var Yt=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[J-1]),Math.abs(this.s[J-2])),Math.abs(i[J-2])),Math.abs(this.s[it])),Math.abs(i[it])),Xt=this.s[J-1]/Yt,K=this.s[J-2]/Yt,q=i[J-2]/Yt,d=this.s[it]/Yt,C=i[it]/Yt,A=((K+Xt)*(K-Xt)+q*q)/2,D=Xt*q*(Xt*q),H=0;(function(vt,yt){return vt||yt})(A!==0,D!==0)&&(H=Math.sqrt(A*A+D),A<0&&(H=-H),H=D/(A+H));for(var V=(d+Xt)*(d-Xt)+H,U=d*C,b=it;b<J-1;b++){var Z=y.hypot(V,U),F=V/Z,z=U/Z;if(b!==it&&(i[b-1]=Z),V=F*this.s[b]+z*i[b],i[b]=F*i[b]-z*this.s[b],U=z*this.s[b+1],this.s[b+1]=F*this.s[b+1],e)for(var ut=0;ut<this.n;ut++)Z=F*this.V[ut][b]+z*this.V[ut][b+1],this.V[ut][b+1]=-z*this.V[ut][b]+F*this.V[ut][b+1],this.V[ut][b]=Z;if(Z=y.hypot(V,U),F=V/Z,z=U/Z,this.s[b]=Z,V=F*i[b]+z*this.s[b+1],this.s[b+1]=-z*i[b]+F*this.s[b+1],U=z*i[b+1],i[b+1]=F*i[b+1],f&&b<this.m-1)for(var et=0;et<this.m;et++)Z=F*this.U[et][b]+z*this.U[et][b+1],this.U[et][b+1]=-z*this.U[et][b]+F*this.U[et][b+1],this.U[et][b]=Z}i[J-2]=V,k=k+1}break;case 4:{if(this.s[it]<=0&&(this.s[it]=this.s[it]<0?-this.s[it]:0,e))for(var P=0;P<=$;P++)this.V[P][it]=-this.V[P][it];for(;it<$&&!(this.s[it]>=this.s[it+1]);){var _=this.s[it];if(this.s[it]=this.s[it+1],this.s[it+1]=_,e&&it<this.n-1)for(var at=0;at<this.n;at++)_=this.V[at][it+1],this.V[at][it+1]=this.V[at][it],this.V[at][it]=_;if(f&&it<this.m-1)for(var ot=0;ot<this.m;ot++)_=this.U[ot][it+1],this.U[ot][it+1]=this.U[ot][it],this.U[ot][it]=_;it++}k=0,J--}break}}var At={U:this.U,V:this.V,S:this.s};return At},y.hypot=function(o,s){var i=void 0;return Math.abs(o)>Math.abs(s)?(i=s/o,i=Math.abs(o)*Math.sqrt(1+i*i)):s!=0?(i=o/s,i=Math.abs(s)*Math.sqrt(1+i*i)):i=0,i},lt.exports=y},function(lt,pt,R){"use strict";var y=function(){function i(h,f){for(var e=0;e<f.length;e++){var v=f[e];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}return function(h,f,e){return f&&i(h.prototype,f),e&&i(h,e),h}}();function o(i,h){if(!(i instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function(){function i(h,f){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,i),this.sequence1=h,this.sequence2=f,this.match_score=e,this.mismatch_penalty=v,this.gap_penalty=t,this.iMax=h.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var a=0;a<this.iMax;a++){this.grid[a]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[a][l]=0}this.tracebackGrid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=new Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[g][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return y(i,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var v=1;v<this.iMax;v++)for(var t=1;t<this.jMax;t++){var a=void 0;this.sequence1[v-1]===this.sequence2[t-1]?a=this.grid[v-1][t-1]+this.match_score:a=this.grid[v-1][t-1]+this.mismatch_penalty;var l=this.grid[v-1][t]+this.gap_penalty,g=this.grid[v][t-1]+this.gap_penalty,u=[a,l,g],T=this.arrayAllMaxIndexes(u);this.grid[v][t]=u[T[0]],this.tracebackGrid[v][t]=[T.includes(0),T.includes(1),T.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var e=f[0],v=this.tracebackGrid[e.pos[0]][e.pos[1]];v[0]&&f.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),v[1]&&f.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),v[2]&&f.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),e.pos[0]===0&&e.pos[1]===0&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,e){for(var v=[],t=-1;(t=f.indexOf(e,t+1))!==-1;)v.push(t);return v}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),i}();lt.exports=s},function(lt,pt,R){"use strict";var y=function(){};y.FDLayout=R(18),y.FDLayoutConstants=R(4),y.FDLayoutEdge=R(19),y.FDLayoutNode=R(20),y.DimensionD=R(21),y.HashMap=R(22),y.HashSet=R(23),y.IGeometry=R(8),y.IMath=R(9),y.Integer=R(10),y.Point=R(12),y.PointD=R(5),y.RandomSeed=R(16),y.RectangleD=R(13),y.Transform=R(17),y.UniqueIDGeneretor=R(14),y.Quicksort=R(25),y.LinkedList=R(11),y.LGraphObject=R(2),y.LGraph=R(6),y.LEdge=R(1),y.LGraphManager=R(7),y.LNode=R(3),y.Layout=R(15),y.LayoutConstants=R(0),y.NeedlemanWunsch=R(27),y.Matrix=R(24),y.SVD=R(26),lt.exports=y},function(lt,pt,R){"use strict";function y(){this.listeners=[]}var o=y.prototype;o.addListener=function(s,i){this.listeners.push({event:s,callback:i})},o.removeListener=function(s,i){for(var h=this.listeners.length;h>=0;h--){var f=this.listeners[h];f.event===s&&f.callback===i&&this.listeners.splice(h,1)}},o.emit=function(s,i){for(var h=0;h<this.listeners.length;h++){var f=this.listeners[h];s===f.event&&f.callback(i)}},lt.exports=y}])})},"./node_modules/mermaid/dist/chunks/mermaid.core/architectureDiagram-IEHRJDOE.mjs":function(jt,lt,pt){"use strict";pt.d(lt,{diagram:function(){return q}});var R=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-H2D2JQ3I.mjs"),y=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-C3MQ5ANM.mjs"),o=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs"),s=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-XZIHB7SX.mjs"),i=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-O4NI6UNU.mjs"),h=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-7B677QYD.mjs"),f=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs"),e=pt("./node_modules/@mermaid-js/parser/dist/mermaid-parser.core.mjs"),v=pt("./node_modules/cytoscape/dist/cytoscape.esm.mjs"),t=pt("./node_modules/cytoscape-fcose/cytoscape-fcose.js"),a=pt("./node_modules/d3/src/index.js"),l={L:"left",R:"right",T:"top",B:"bottom"},g={L:(0,f.K2)(d=>`${d},${d/2} 0,${d} 0,0`,"L"),R:(0,f.K2)(d=>`0,${d/2} ${d},0 ${d},${d}`,"R"),T:(0,f.K2)(d=>`0,0 ${d},0 ${d/2},${d}`,"T"),B:(0,f.K2)(d=>`${d/2},0 ${d},${d} 0,${d}`,"B")},u={L:(0,f.K2)((d,C)=>d-C+2,"L"),R:(0,f.K2)((d,C)=>d-2,"R"),T:(0,f.K2)((d,C)=>d-C+2,"T"),B:(0,f.K2)((d,C)=>d-2,"B")},T=(0,f.K2)(function(d){return M(d)?d==="L"?"R":"L":d==="T"?"B":"T"},"getOppositeArchitectureDirection"),c=(0,f.K2)(function(d){const C=d;return C==="L"||C==="R"||C==="T"||C==="B"},"isArchitectureDirection"),M=(0,f.K2)(function(d){const C=d;return C==="L"||C==="R"},"isArchitectureDirectionX"),N=(0,f.K2)(function(d){const C=d;return C==="T"||C==="B"},"isArchitectureDirectionY"),L=(0,f.K2)(function(d,C){const A=M(d)&&N(C),D=N(d)&&M(C);return A||D},"isArchitectureDirectionXY"),x=(0,f.K2)(function(d){const C=d[0],A=d[1],D=M(C)&&N(A),H=N(C)&&M(A);return D||H},"isArchitecturePairXY"),rt=(0,f.K2)(function(d){return d!=="LL"&&d!=="RR"&&d!=="TT"&&d!=="BB"},"isValidArchitectureDirectionPair"),I=(0,f.K2)(function(d,C){const A=`${d}${C}`;return rt(A)?A:void 0},"getArchitectureDirectionPair"),nt=(0,f.K2)(function([d,C],A){const D=A[0],H=A[1];return M(D)?N(H)?[d+(D==="L"?-1:1),C+(H==="T"?1:-1)]:[d+(D==="L"?-1:1),C]:M(H)?[d+(H==="L"?1:-1),C+(D==="T"?1:-1)]:[d,C+(D==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),gt=(0,f.K2)(function(d){return d==="LT"||d==="TL"?[1,1]:d==="BL"||d==="LB"?[1,-1]:d==="BR"||d==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),ft=(0,f.K2)(function(d,C){return L(d,C)?"bend":M(d)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),Et=(0,f.K2)(function(d){return d.type==="service"},"isArchitectureService"),Y=(0,f.K2)(function(d){return d.type==="junction"},"isArchitectureJunction"),J=(0,f.K2)(d=>d.data(),"edgeData"),r=(0,f.K2)(d=>d.data(),"nodeData"),E=f.UI.architecture,n=new s.m(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:E,dataStructures:void 0,elements:{}})),m=(0,f.K2)(()=>{n.reset(),(0,f.IU)()},"clear"),p=(0,f.K2)(function({id:d,icon:C,in:A,title:D,iconText:H}){if(n.records.registeredIds[d]!==void 0)throw new Error(`The service id [${d}] is already in use by another ${n.records.registeredIds[d]}`);if(A!==void 0){if(d===A)throw new Error(`The service [${d}] cannot be placed within itself`);if(n.records.registeredIds[A]===void 0)throw new Error(`The service [${d}]'s parent does not exist. Please make sure the parent is created before this service`);if(n.records.registeredIds[A]==="node")throw new Error(`The service [${d}]'s parent is not a group`)}n.records.registeredIds[d]="node",n.records.nodes[d]={id:d,type:"service",icon:C,iconText:H,title:D,edges:[],in:A}},"addService"),S=(0,f.K2)(()=>Object.values(n.records.nodes).filter(Et),"getServices"),O=(0,f.K2)(function({id:d,in:C}){n.records.registeredIds[d]="node",n.records.nodes[d]={id:d,type:"junction",edges:[],in:C}},"addJunction"),W=(0,f.K2)(()=>Object.values(n.records.nodes).filter(Y),"getJunctions"),X=(0,f.K2)(()=>Object.values(n.records.nodes),"getNodes"),G=(0,f.K2)(d=>n.records.nodes[d],"getNode"),tt=(0,f.K2)(function({id:d,icon:C,in:A,title:D}){if(n.records.registeredIds[d]!==void 0)throw new Error(`The group id [${d}] is already in use by another ${n.records.registeredIds[d]}`);if(A!==void 0){if(d===A)throw new Error(`The group [${d}] cannot be placed within itself`);if(n.records.registeredIds[A]===void 0)throw new Error(`The group [${d}]'s parent does not exist. Please make sure the parent is created before this group`);if(n.records.registeredIds[A]==="node")throw new Error(`The group [${d}]'s parent is not a group`)}n.records.registeredIds[d]="group",n.records.groups[d]={id:d,icon:C,title:D,in:A}},"addGroup"),st=(0,f.K2)(()=>Object.values(n.records.groups),"getGroups"),B=(0,f.K2)(function({lhsId:d,rhsId:C,lhsDir:A,rhsDir:D,lhsInto:H,rhsInto:V,lhsGroup:U,rhsGroup:b,title:Z}){if(!c(A))throw new Error(`Invalid direction given for left hand side of edge ${d}--${C}. Expected (L,R,T,B) got ${A}`);if(!c(D))throw new Error(`Invalid direction given for right hand side of edge ${d}--${C}. Expected (L,R,T,B) got ${D}`);if(n.records.nodes[d]===void 0&&n.records.groups[d]===void 0)throw new Error(`The left-hand id [${d}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(n.records.nodes[C]===void 0&&n.records.groups[d]===void 0)throw new Error(`The right-hand id [${C}] does not yet exist. Please create the service/group before declaring an edge to it.`);const F=n.records.nodes[d].in,z=n.records.nodes[C].in;if(U&&F&&z&&F==z)throw new Error(`The left-hand id [${d}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(b&&F&&z&&F==z)throw new Error(`The right-hand id [${C}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const ut={lhsId:d,lhsDir:A,lhsInto:H,lhsGroup:U,rhsId:C,rhsDir:D,rhsInto:V,rhsGroup:b,title:Z};n.records.edges.push(ut),n.records.nodes[d]&&n.records.nodes[C]&&(n.records.nodes[d].edges.push(n.records.edges[n.records.edges.length-1]),n.records.nodes[C].edges.push(n.records.edges[n.records.edges.length-1]))},"addEdge"),ht=(0,f.K2)(()=>n.records.edges,"getEdges"),j=(0,f.K2)(()=>{if(n.records.dataStructures===void 0){const d={},C=Object.entries(n.records.nodes).reduce((b,[Z,F])=>(b[Z]=F.edges.reduce((z,ut)=>{const et=G(ut.lhsId)?.in,P=G(ut.rhsId)?.in;if(et&&P&&et!==P){const _=ft(ut.lhsDir,ut.rhsDir);_!=="bend"&&(d[et]??(d[et]={}),d[et][P]=_,d[P]??(d[P]={}),d[P][et]=_)}if(ut.lhsId===Z){const _=I(ut.lhsDir,ut.rhsDir);_&&(z[_]=ut.rhsId)}else{const _=I(ut.rhsDir,ut.lhsDir);_&&(z[_]=ut.lhsId)}return z},{}),b),{}),A=Object.keys(C)[0],D={[A]:1},H=Object.keys(C).reduce((b,Z)=>Z===A?b:{...b,[Z]:1},{}),V=(0,f.K2)(b=>{const Z={[b]:[0,0]},F=[b];for(;F.length>0;){const z=F.shift();if(z){D[z]=1,delete H[z];const ut=C[z],[et,P]=Z[z];Object.entries(ut).forEach(([_,at])=>{D[at]||(Z[at]=nt([et,P],_),F.push(at))})}}return Z},"BFS"),U=[V(A)];for(;Object.keys(H).length>0;)U.push(V(Object.keys(H)[0]));n.records.dataStructures={adjList:C,spatialMaps:U,groupAlignments:d}}return n.records.dataStructures},"getDataStructures"),w=(0,f.K2)((d,C)=>{n.records.elements[d]=C},"setElementForId"),$=(0,f.K2)(d=>n.records.elements[d],"getElementById"),k={clear:m,setDiagramTitle:f.ke,getDiagramTitle:f.ab,setAccTitle:f.SV,getAccTitle:f.iN,setAccDescription:f.EI,getAccDescription:f.m7,addService:p,getServices:S,addJunction:O,getJunctions:W,getNodes:X,getNode:G,addGroup:tt,getGroups:st,addEdge:B,getEdges:ht,setElementForId:w,getElementById:$,getDataStructures:j};function Q(d){const C=(0,f.D7)().architecture;return C?.[d]?C[d]:E[d]}(0,f.K2)(Q,"getConfigField");var mt=(0,f.K2)((d,C)=>{(0,o.S)(d,C),d.groups.map(C.addGroup),d.services.map(A=>C.addService({...A,type:"service"})),d.junctions.map(A=>C.addJunction({...A,type:"junction"})),d.edges.map(C.addEdge)},"populateDb"),it={parse:(0,f.K2)(async d=>{const C=await(0,e.qg)("architecture",d);f.Rm.debug(C),mt(C,k)},"parse")},Pt=(0,f.K2)(d=>`
  .edge {
    stroke-width: ${d.archEdgeWidth};
    stroke: ${d.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${d.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${d.archGroupBorderColor};
    stroke-width: ${d.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Mt=Pt,Ht=(0,f.K2)(d=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${d}</g>`,"wrapIcon"),Gt={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Ht('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Ht('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Ht('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Ht('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Ht('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:R.Gc,blank:{body:Ht("")}}},dt=(0,f.K2)(async function(d,C){const A=Q("padding"),D=Q("iconSize"),H=D/2,V=D/6,U=V/2;await Promise.all(C.edges().map(async b=>{const{source:Z,sourceDir:F,sourceArrow:z,sourceGroup:ut,target:et,targetDir:P,targetArrow:_,targetGroup:at,label:ot}=J(b);let{x:At,y:vt}=b[0].sourceEndpoint();const{x:yt,y:Rt}=b[0].midpoint();let{x:Lt,y:St}=b[0].targetEndpoint();const wt=A+4;if(ut&&(M(F)?At+=F==="L"?-wt:wt:vt+=F==="T"?-wt:wt+18),at&&(M(P)?Lt+=P==="L"?-wt:wt:St+=P==="T"?-wt:wt+18),!ut&&k.getNode(Z)?.type==="junction"&&(M(F)?At+=F==="L"?H:-H:vt+=F==="T"?H:-H),!at&&k.getNode(et)?.type==="junction"&&(M(P)?Lt+=P==="L"?H:-H:St+=P==="T"?H:-H),b[0]._private.rscratch){const Vt=d.insert("g");if(Vt.insert("path").attr("d",`M ${At},${vt} L ${yt},${Rt} L${Lt},${St} `).attr("class","edge"),z){const Ut=M(F)?u[F](At,V):At-U,zt=N(F)?u[F](vt,V):vt-U;Vt.insert("polygon").attr("points",g[F](V)).attr("transform",`translate(${Ut},${zt})`).attr("class","arrow")}if(_){const Ut=M(P)?u[P](Lt,V):Lt-U,zt=N(P)?u[P](St,V):St-U;Vt.insert("polygon").attr("points",g[P](V)).attr("transform",`translate(${Ut},${zt})`).attr("class","arrow")}if(ot){const Ut=L(F,P)?"XY":M(F)?"X":"Y";let zt=0;Ut==="X"?zt=Math.abs(At-Lt):Ut==="Y"?zt=Math.abs(vt-St)/1.5:zt=Math.abs(At-Lt)/2;const Kt=Vt.append("g");if(await(0,y.GZ)(Kt,ot,{useHtmlLabels:!1,width:zt,classes:"architecture-service-label"},(0,f.D7)()),Kt.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),Ut==="X")Kt.attr("transform","translate("+yt+", "+Rt+")");else if(Ut==="Y")Kt.attr("transform","translate("+yt+", "+Rt+") rotate(-90)");else if(Ut==="XY"){const Jt=I(F,P);if(Jt&&x(Jt)){const Qt=Kt.node().getBoundingClientRect(),[Zt,_t]=gt(Jt);Kt.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*Zt*_t*45})`);const qt=Kt.node().getBoundingClientRect();Kt.attr("transform",`
                translate(${yt}, ${Rt-Qt.height/2})
                translate(${Zt*qt.width/2}, ${_t*qt.height/2})
                rotate(${-1*Zt*_t*45}, 0, ${Qt.height/2})
              `)}}}}}))},"drawEdges"),ct=(0,f.K2)(async function(d,C){const D=Q("padding")*.75,H=Q("fontSize"),U=Q("iconSize")/2;await Promise.all(C.nodes().map(async b=>{const Z=r(b);if(Z.type==="group"){const{h:F,w:z,x1:ut,y1:et}=b.boundingBox();d.append("rect").attr("x",ut+U).attr("y",et+U).attr("width",z).attr("height",F).attr("class","node-bkg");const P=d.append("g");let _=ut,at=et;if(Z.icon){const ot=P.append("g");ot.html(`<g>${await(0,R.WY)(Z.icon,{height:D,width:D,fallbackPrefix:Gt.prefix})}</g>`),ot.attr("transform","translate("+(_+U+1)+", "+(at+U+1)+")"),_+=D,at+=H/2-1-2}if(Z.label){const ot=P.append("g");await(0,y.GZ)(ot,Z.label,{useHtmlLabels:!1,width:z,classes:"architecture-service-label"},(0,f.D7)()),ot.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),ot.attr("transform","translate("+(_+U+4)+", "+(at+U+2)+")")}}}))},"drawGroups"),xt=(0,f.K2)(async function(d,C,A){for(const D of A){const H=C.append("g"),V=Q("iconSize");if(D.title){const F=H.append("g");await(0,y.GZ)(F,D.title,{useHtmlLabels:!1,width:V*1.5,classes:"architecture-service-label"},(0,f.D7)()),F.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),F.attr("transform","translate("+V/2+", "+V+")")}const U=H.append("g");if(D.icon)U.html(`<g>${await(0,R.WY)(D.icon,{height:V,width:V,fallbackPrefix:Gt.prefix})}</g>`);else if(D.iconText){U.html(`<g>${await(0,R.WY)("blank",{height:V,width:V,fallbackPrefix:Gt.prefix})}</g>`);const ut=U.append("g").append("foreignObject").attr("width",V).attr("height",V).append("div").attr("class","node-icon-text").attr("style",`height: ${V}px;`).append("div").html(D.iconText),et=parseInt(window.getComputedStyle(ut.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;ut.attr("style",`-webkit-line-clamp: ${Math.floor((V-2)/et)};`)}else U.append("path").attr("class","node-bkg").attr("id","node-"+D.id).attr("d",`M0 ${V} v${-V} q0,-5 5,-5 h${V} q5,0 5,5 v${V} H0 Z`);H.attr("class","architecture-service");const{width:b,height:Z}=H._groups[0][0].getBBox();D.width=b,D.height=Z,d.setElementForId(D.id,H)}return 0},"drawServices"),Dt=(0,f.K2)(function(d,C,A){A.forEach(D=>{const H=C.append("g"),V=Q("iconSize");H.append("g").append("rect").attr("id","node-"+D.id).attr("fill-opacity","0").attr("width",V).attr("height",V),H.attr("class","architecture-junction");const{width:b,height:Z}=H._groups[0][0].getBBox();H.width=b,H.height=Z,d.setElementForId(D.id,H)})},"drawJunctions");(0,R.pC)([{name:Gt.prefix,icons:Gt}]),v.A.use(t);function Nt(d,C){d.forEach(A=>{C.add({group:"nodes",data:{type:"service",id:A.id,icon:A.icon,label:A.title,parent:A.in,width:Q("iconSize"),height:Q("iconSize")},classes:"node-service"})})}(0,f.K2)(Nt,"addServices");function Ot(d,C){d.forEach(A=>{C.add({group:"nodes",data:{type:"junction",id:A.id,parent:A.in,width:Q("iconSize"),height:Q("iconSize")},classes:"node-junction"})})}(0,f.K2)(Ot,"addJunctions");function Ct(d,C){C.nodes().map(A=>{const D=r(A);if(D.type==="group")return;D.x=A.position().x,D.y=A.position().y,d.getElementById(D.id).attr("transform","translate("+(D.x||0)+","+(D.y||0)+")")})}(0,f.K2)(Ct,"positionNodes");function It(d,C){d.forEach(A=>{C.add({group:"nodes",data:{type:"group",id:A.id,icon:A.icon,label:A.title,parent:A.in},classes:"node-group"})})}(0,f.K2)(It,"addGroups");function Wt(d,C){d.forEach(A=>{const{lhsId:D,rhsId:H,lhsInto:V,lhsGroup:U,rhsInto:b,lhsDir:Z,rhsDir:F,rhsGroup:z,title:ut}=A,et=L(A.lhsDir,A.rhsDir)?"segments":"straight",P={id:`${D}-${H}`,label:ut,source:D,sourceDir:Z,sourceArrow:V,sourceGroup:U,sourceEndpoint:Z==="L"?"0 50%":Z==="R"?"100% 50%":Z==="T"?"50% 0":"50% 100%",target:H,targetDir:F,targetArrow:b,targetGroup:z,targetEndpoint:F==="L"?"0 50%":F==="R"?"100% 50%":F==="T"?"50% 0":"50% 100%"};C.add({group:"edges",data:P,classes:et})})}(0,f.K2)(Wt,"addEdges");function $t(d,C,A){const D=(0,f.K2)((b,Z)=>Object.entries(b).reduce((F,[z,ut])=>{let et=0;const P=Object.entries(ut);if(P.length===1)return F[z]=P[0][1],F;for(let _=0;_<P.length-1;_++)for(let at=_+1;at<P.length;at++){const[ot,At]=P[_],[vt,yt]=P[at];if(A[ot]?.[vt]===Z)F[z]??(F[z]=[]),F[z]=[...F[z],...At,...yt];else if(ot==="default"||vt==="default")F[z]??(F[z]=[]),F[z]=[...F[z],...At,...yt];else{const Lt=`${z}-${et++}`;F[Lt]=At;const St=`${z}-${et++}`;F[St]=yt}}return F},{}),"flattenAlignments"),H=C.map(b=>{const Z={},F={};return Object.entries(b).forEach(([z,[ut,et]])=>{var _,at;const P=d.getNode(z)?.in??"default";Z[et]??(Z[et]={}),(_=Z[et])[P]??(_[P]=[]),Z[et][P].push(z),F[ut]??(F[ut]={}),(at=F[ut])[P]??(at[P]=[]),F[ut][P].push(z)}),{horiz:Object.values(D(Z,"horizontal")).filter(z=>z.length>1),vert:Object.values(D(F,"vertical")).filter(z=>z.length>1)}}),[V,U]=H.reduce(([b,Z],{horiz:F,vert:z})=>[[...b,...F],[...Z,...z]],[[],[]]);return{horizontal:V,vertical:U}}(0,f.K2)($t,"getAlignments");function bt(d){const C=[],A=(0,f.K2)(H=>`${H[0]},${H[1]}`,"posToStr"),D=(0,f.K2)(H=>H.split(",").map(V=>parseInt(V)),"strToPos");return d.forEach(H=>{const V=Object.fromEntries(Object.entries(H).map(([F,z])=>[A(z),F])),U=[A([0,0])],b={},Z={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;U.length>0;){const F=U.shift();if(F){b[F]=1;const z=V[F];if(z){const ut=D(F);Object.entries(Z).forEach(([et,P])=>{const _=A([ut[0]+P[0],ut[1]+P[1]]),at=V[_];at&&!b[_]&&(U.push(_),C.push({[l[et]]:at,[l[T(et)]]:z,gap:1.5*Q("iconSize")}))})}}}}),C}(0,f.K2)(bt,"getRelativeConstraints");function Yt(d,C,A,D,H,{spatialMaps:V,groupAlignments:U}){return new Promise(b=>{const Z=(0,a.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),F=(0,v.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${Q("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${Q("padding")}px`}}]});Z.remove(),It(A,F),Nt(d,F),Ot(C,F),Wt(D,F);const z=$t(H,V,U),ut=bt(V),et=F.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(P){const[_,at]=P.connectedNodes(),{parent:ot}=r(_),{parent:At}=r(at);return ot===At?1.5*Q("iconSize"):.5*Q("iconSize")},edgeElasticity(P){const[_,at]=P.connectedNodes(),{parent:ot}=r(_),{parent:At}=r(at);return ot===At?.45:.001},alignmentConstraint:z,relativePlacementConstraint:ut});et.one("layoutstop",()=>{function P(_,at,ot,At){let vt,yt;const{x:Rt,y:Lt}=_,{x:St,y:wt}=at;yt=(At-Lt+(Rt-ot)*(Lt-wt)/(Rt-St))/Math.sqrt(1+Math.pow((Lt-wt)/(Rt-St),2)),vt=Math.sqrt(Math.pow(At-Lt,2)+Math.pow(ot-Rt,2)-Math.pow(yt,2));const Vt=Math.sqrt(Math.pow(St-Rt,2)+Math.pow(wt-Lt,2));vt=vt/Vt;let Ut=(St-Rt)*(At-Lt)-(wt-Lt)*(ot-Rt);switch(!0){case Ut>=0:Ut=1;break;case Ut<0:Ut=-1;break}let zt=(St-Rt)*(ot-Rt)+(wt-Lt)*(At-Lt);switch(!0){case zt>=0:zt=1;break;case zt<0:zt=-1;break}return yt=Math.abs(yt)*Ut,vt=vt*zt,{distances:yt,weights:vt}}(0,f.K2)(P,"getSegmentWeights"),F.startBatch();for(const _ of Object.values(F.edges()))if(_.data?.()){const{x:at,y:ot}=_.source().position(),{x:At,y:vt}=_.target().position();if(at!==At&&ot!==vt){const yt=_.sourceEndpoint(),Rt=_.targetEndpoint(),{sourceDir:Lt}=J(_),[St,wt]=N(Lt)?[yt.x,Rt.y]:[Rt.x,yt.y],{weights:Vt,distances:Ut}=P(yt,Rt,St,wt);_.style("segment-distances",Ut),_.style("segment-weights",Vt)}}F.endBatch(),et.run()}),et.run(),F.ready(P=>{f.Rm.info("Ready",P),b(F)})})}(0,f.K2)(Yt,"layoutArchitecture");var Xt=(0,f.K2)(async(d,C,A,D)=>{const H=D.db,V=H.getServices(),U=H.getJunctions(),b=H.getGroups(),Z=H.getEdges(),F=H.getDataStructures(),z=(0,h.D)(C),ut=z.append("g");ut.attr("class","architecture-edges");const et=z.append("g");et.attr("class","architecture-services");const P=z.append("g");P.attr("class","architecture-groups"),await xt(H,et,V),Dt(H,et,U);const _=await Yt(V,U,b,Z,H,F);await dt(ut,_),await ct(P,_),Ct(H,_),(0,f.ot)(void 0,z,Q("padding"),Q("useMaxWidth"))},"draw"),K={draw:Xt},q={parser:it,db:k,renderer:K,styles:Mt}},"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs":function(jt,lt,pt){"use strict";pt.d(lt,{S:function(){return y}});var R=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs");function y(o,s){o.accDescr&&s.setAccDescription?.(o.accDescr),o.accTitle&&s.setAccTitle?.(o.accTitle),o.title&&s.setDiagramTitle?.(o.title)}(0,R.K2)(y,"populateCommonDb")},"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-XZIHB7SX.mjs":function(jt,lt,pt){"use strict";var o;pt.d(lt,{m:function(){return y}});var R=pt("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs"),y=(o=class{constructor(i){this.init=i,this.records=this.init()}reset(){this.records=this.init()}},(0,R.K2)(o,"ImperativeState"),o)}}]);
