(self.webpackChunkforgejo=self.webpackChunkforgejo||[]).push([["code-frequency-graph"],{"./node_modules/chartjs-adapter-dayjs-4/dist/chartjs-adapter-dayjs-4.esm.js":function(D,v,n){"use strict";var a=n("./node_modules/chart.js/dist/chart.js"),s=n("./node_modules/dayjs/dayjs.min.js"),l=n("./node_modules/dayjs/plugin/customParseFormat.js"),i=n("./node_modules/dayjs/plugin/advancedFormat.js"),y=n("./node_modules/dayjs/plugin/quarterOfYear.js"),e=n("./node_modules/dayjs/plugin/localizedFormat.js"),f=n("./node_modules/dayjs/plugin/isoWeek.js");s.extend(i),s.extend(y),s.extend(e),s.extend(l),s.extend(f);var h={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};a.ij._date.override({formats:function(){return h},parse:function(r,p){var t=typeof r;return r===null||t==="undefined"?null:t==="string"&&typeof p=="string"?s(r,p).isValid()?s(r,p).valueOf():null:r instanceof s?null:s(r).isValid()?s(r).valueOf():null},format:function(r,p){return s(r).format(p)},add:function(r,p,t){return s(r).add(p,t).valueOf()},diff:function(r,p,t){return s(r).diff(s(p),t)},startOf:function(r,p,t){if(p==="isoWeek"){var o=typeof t=="number"&&t>0&&t<7?t:1;return s(r).isoWeekday(o).startOf("day").valueOf()}return s(r).startOf(p).valueOf()},endOf:function(r,p){return s(r).endOf(p).valueOf()}})},"./node_modules/dayjs/plugin/advancedFormat.js":function(D){(function(v,n){D.exports=n()})(this,function(){"use strict";return function(v,n){var a=n.prototype,s=a.format;a.format=function(l){var i=this,y=this.$locale();if(!this.isValid())return s.bind(this)(l);var e=this.$utils(),f=(l||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(h){switch(h){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return y.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return y.ordinal(i.week(),"W");case"w":case"ww":return e.s(i.week(),h==="w"?1:2,"0");case"W":case"WW":return e.s(i.isoWeek(),h==="W"?1:2,"0");case"k":case"kk":return e.s(String(i.$H===0?24:i.$H),h==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return h}});return s.bind(this)(f)}}})},"./node_modules/dayjs/plugin/customParseFormat.js":function(D){(function(v,n){D.exports=n()})(this,function(){"use strict";var v={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,s=/\d\d?/,l=/\d*[^-_:/,()\s\d]+/,i={},y=function(t){return(t=+t)+(t>68?1900:2e3)},e=function(t){return function(o){this[t]=+o}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(o){if(!o||o==="Z")return 0;var u=o.match(/([+-]|\d\d)/g),c=60*u[1]+(+u[2]||0);return c===0?0:u[0]==="+"?-c:c}(t)}],h=function(t){var o=i[t];return o&&(o.indexOf?o:o.s.concat(o.f))},m=function(t,o){var u,c=i.meridiem;if(c){for(var Y=1;Y<=24;Y+=1)if(t.indexOf(c(Y,0,o))>-1){u=Y>12;break}}else u=t===(o?"pm":"PM");return u},r={A:[l,function(t){this.afternoon=m(t,!1)}],a:[l,function(t){this.afternoon=m(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[a,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[s,e("seconds")],ss:[s,e("seconds")],m:[s,e("minutes")],mm:[s,e("minutes")],H:[s,e("hours")],h:[s,e("hours")],HH:[s,e("hours")],hh:[s,e("hours")],D:[s,e("day")],DD:[a,e("day")],Do:[l,function(t){var o=i.ordinal,u=t.match(/\d+/);if(this.day=u[0],o)for(var c=1;c<=31;c+=1)o(c).replace(/\[|\]/g,"")===t&&(this.day=c)}],M:[s,e("month")],MM:[a,e("month")],MMM:[l,function(t){var o=h("months"),u=(h("monthsShort")||o.map(function(c){return c.slice(0,3)})).indexOf(t)+1;if(u<1)throw new Error;this.month=u%12||u}],MMMM:[l,function(t){var o=h("months").indexOf(t)+1;if(o<1)throw new Error;this.month=o%12||o}],Y:[/[+-]?\d+/,e("year")],YY:[a,function(t){this.year=y(t)}],YYYY:[/\d{4}/,e("year")],Z:f,ZZ:f};function p(t){var o,u;o=t,u=i&&i.formats;for(var c=(t=o.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(d,g,M){var j=M&&M.toUpperCase();return g||u[M]||v[M]||u[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(O,k,W){return k||W.slice(1)})})).match(n),Y=c.length,_=0;_<Y;_+=1){var $=c[_],T=r[$],x=T&&T[0],L=T&&T[1];c[_]=L?{regex:x,parser:L}:$.replace(/^\[|\]$/g,"")}return function(d){for(var g={},M=0,j=0;M<Y;M+=1){var O=c[M];if(typeof O=="string")j+=O.length;else{var k=O.regex,W=O.parser,C=d.slice(j),A=k.exec(C)[0];W.call(g,A),d=d.replace(A,"")}}return function(E){var w=E.afternoon;if(w!==void 0){var b=E.hours;w?b<12&&(E.hours+=12):b===12&&(E.hours=0),delete E.afternoon}}(g),g}}return function(t,o,u){u.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(y=t.parseTwoDigitYear);var c=o.prototype,Y=c.parse;c.parse=function(_){var $=_.date,T=_.utc,x=_.args;this.$u=T;var L=x[1];if(typeof L=="string"){var d=x[2]===!0,g=x[3]===!0,M=d||g,j=x[2];g&&(j=x[2]),i=this.$locale(),!d&&j&&(i=u.Ls[j]),this.$d=function(C,A,E){try{if(["x","X"].indexOf(A)>-1)return new Date((A==="X"?1e3:1)*C);var w=p(A)(C),b=w.year,S=w.month,Z=w.day,X=w.hours,B=w.minutes,N=w.seconds,Q=w.milliseconds,K=w.zone,P=new Date,R=Z||(b||S?1:P.getDate()),z=b||P.getFullYear(),F=0;b&&!S||(F=S>0?S-1:P.getMonth());var H=X||0,U=B||0,G=N||0,I=Q||0;return K?new Date(Date.UTC(z,F,R,H,U,G,I+60*K.offset*1e3)):E?new Date(Date.UTC(z,F,R,H,U,G,I)):new Date(z,F,R,H,U,G,I)}catch{return new Date("")}}($,L,T),this.init(),j&&j!==!0&&(this.$L=this.locale(j).$L),M&&$!=this.format(L)&&(this.$d=new Date("")),i={}}else if(L instanceof Array)for(var O=L.length,k=1;k<=O;k+=1){x[1]=L[k-1];var W=u.apply(this,x);if(W.isValid()){this.$d=W.$d,this.$L=W.$L,this.init();break}k===O&&(this.$d=new Date(""))}else Y.call(this,_)}}})},"./node_modules/dayjs/plugin/isoWeek.js":function(D){(function(v,n){D.exports=n()})(this,function(){"use strict";var v="day";return function(n,a,s){var l=function(e){return e.add(4-e.isoWeekday(),v)},i=a.prototype;i.isoWeekYear=function(){return l(this).year()},i.isoWeek=function(e){if(!this.$utils().u(e))return this.add(7*(e-this.isoWeek()),v);var f,h,m,r,p=l(this),t=(f=this.isoWeekYear(),h=this.$u,m=(h?s.utc:s)().year(f).startOf("year"),r=4-m.isoWeekday(),m.isoWeekday()>4&&(r+=7),m.add(r,v));return p.diff(t,"week")+1},i.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var y=i.startOf;i.startOf=function(e,f){var h=this.$utils(),m=!!h.u(f)||f;return h.p(e)==="isoweek"?m?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):y.bind(this)(e,f)}}})},"./node_modules/dayjs/plugin/localizedFormat.js":function(D){(function(v,n){D.exports=n()})(this,function(){"use strict";var v={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,s){var l=a.prototype,i=l.format;s.en.formats=v,l.format=function(y){y===void 0&&(y="YYYY-MM-DDTHH:mm:ssZ");var e=this.$locale().formats,f=function(h,m){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(r,p,t){var o=t&&t.toUpperCase();return p||m[t]||v[t]||m[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(u,c,Y){return c||Y.slice(1)})})}(y,e===void 0?{}:e);return i.call(this,f)}}})},"./node_modules/dayjs/plugin/quarterOfYear.js":function(D){(function(v,n){D.exports=n()})(this,function(){"use strict";var v="month",n="quarter";return function(a,s){var l=s.prototype;l.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=l.add;l.add=function(e,f){return e=Number(e),this.$utils().p(f)===n?this.add(3*e,v):i.bind(this)(e,f)};var y=l.startOf;l.startOf=function(e,f){var h=this.$utils(),m=!!h.u(f)||f;if(h.p(e)===n){var r=this.quarter()-1;return m?this.month(3*r).startOf(v).startOf("day"):this.month(3*r+2).endOf(v).endOf("day")}return y.bind(this)(e,f)}}})},"./web_src/js/components/RepoCodeFrequency.vue":function(D,v,n){"use strict";n.d(v,{default:function(){return L}});var a=n("./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js"),s=n("./node_modules/@vue/shared/dist/shared.esm-bundler.js");const l={class:"ui header tw-flex tw-items-center tw-justify-between"},i={class:"tw-flex ui segment main-graph"},y={key:0,class:"gt-tc tw-m-auto"},e={key:0},f={key:1,class:"text red"};function h(d,g,M,j,O,k){const W=(0,a.g2)("SvgIcon"),C=(0,a.g2)("ChartLine");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",l,(0,s.v_)(d.isLoading?M.locale.loadingTitle:d.errorText?M.locale.loadingTitleFailed:`Code frequency over the history of ${d.repoLink.slice(1)}`),1),(0,a.Lk)("div",i,[d.isLoading||d.errorText!==""?((0,a.uX)(),(0,a.CE)("div",y,[d.isLoading?((0,a.uX)(),(0,a.CE)("div",e,[(0,a.bF)(W,{name:"octicon-sync",class:"tw-mr-2 job-status-rotate"}),(0,a.eW)(" "+(0,s.v_)(M.locale.loadingInfo),1)])):((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(W,{name:"octicon-x-circle-fill"}),(0,a.eW)(" "+(0,s.v_)(d.errorText),1)]))])):(0,a.Q3)("v-if",!0),d.data.length!==0?(0,a.bU)(d.data,()=>((0,a.uX)(),(0,a.Wv)(C,{key:1,data:k.toGraphData(d.data),options:k.getOptions()},null,8,["data","options"])),g,0):(0,a.Q3)("v-if",!0)])])}var m=n("./web_src/js/svg.js"),r=n("./node_modules/chart.js/dist/chart.js"),p=n("./web_src/js/modules/fetch.js"),t=n("./node_modules/vue-chartjs/dist/index.js"),o=n("./web_src/js/utils/time.js"),u=n("./web_src/js/utils/color.js"),c=n("./web_src/js/utils.js"),Y=n("./node_modules/chartjs-adapter-dayjs-4/dist/chartjs-adapter-dayjs-4.esm.js");const{pageData:_}=window.config;r.t1.defaults.color=u.K.text,r.t1.defaults.borderColor=u.K.border,r.t1.register(r.UA,r.kc,r.s$,r.FN,r.No,r.dN);var $={components:{ChartLine:t.N1,SvgIcon:m.Ah},props:{locale:{type:Object,required:!0}},data:()=>({isLoading:!1,errorText:"",repoLink:_.repoLink||[],data:[]}),mounted(){this.fetchGraphData()},methods:{async fetchGraphData(){this.isLoading=!0;try{let d;do d=await(0,p.fG)(`${this.repoLink}/activity/code-frequency/data`),d.status===202&&await(0,c.yy)(1e3);while(d.status===202);if(d.ok){this.data=await d.json();const M=Object.values(this.data)[0].week,j=(0,o.Z1)(new Date),O=(0,o.Ex)(M,j);this.data=(0,o.a$)(O,this.data),this.errorText=""}else this.errorText=d.statusText}catch(d){this.errorText=d.message}finally{this.isLoading=!1}},toGraphData(d){return{datasets:[{data:d.map(g=>({x:g.week,y:g.additions})),pointRadius:0,pointHitRadius:0,fill:!0,label:"Additions",backgroundColor:u.K.additions,borderWidth:0,tension:.3},{data:d.map(g=>({x:g.week,y:-g.deletions})),pointRadius:0,pointHitRadius:0,fill:!0,label:"Deletions",backgroundColor:u.K.deletions,borderWidth:0,tension:.3}]}},getOptions(){return{responsive:!0,maintainAspectRatio:!1,animation:!0,plugins:{legend:{display:!0}},scales:{x:{type:"time",grid:{display:!1},time:{minUnit:"month"},ticks:{maxRotation:0,maxTicksLimit:12}},y:{ticks:{maxTicksLimit:6}}}}}}},T=n("./node_modules/vue-loader/dist/exportHelper.js"),L=(0,T.A)($,[["render",h],["__scopeId","data-v-8f699cd6"]])}}]);
