(self.webpackChunkforgejo=self.webpackChunkforgejo||[]).push([["recent-commits-graph"],{"./node_modules/chartjs-adapter-dayjs-4/dist/chartjs-adapter-dayjs-4.esm.js":function(_,p,r){"use strict";var n=r("./node_modules/chart.js/dist/chart.js"),s=r("./node_modules/dayjs/dayjs.min.js"),f=r("./node_modules/dayjs/plugin/customParseFormat.js"),a=r("./node_modules/dayjs/plugin/advancedFormat.js"),y=r("./node_modules/dayjs/plugin/quarterOfYear.js"),e=r("./node_modules/dayjs/plugin/localizedFormat.js"),l=r("./node_modules/dayjs/plugin/isoWeek.js");s.extend(a),s.extend(y),s.extend(e),s.extend(f),s.extend(l);var h={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};n.ij._date.override({formats:function(){return h},parse:function(o,v){var t=typeof o;return o===null||t==="undefined"?null:t==="string"&&typeof v=="string"?s(o,v).isValid()?s(o,v).valueOf():null:o instanceof s?null:s(o).isValid()?s(o).valueOf():null},format:function(o,v){return s(o).format(v)},add:function(o,v,t){return s(o).add(v,t).valueOf()},diff:function(o,v,t){return s(o).diff(s(v),t)},startOf:function(o,v,t){if(v==="isoWeek"){var i=typeof t=="number"&&t>0&&t<7?t:1;return s(o).isoWeekday(i).startOf("day").valueOf()}return s(o).startOf(v).valueOf()},endOf:function(o,v){return s(o).endOf(v).valueOf()}})},"./node_modules/dayjs/plugin/advancedFormat.js":function(_){(function(p,r){_.exports=r()})(this,function(){"use strict";return function(p,r){var n=r.prototype,s=n.format;n.format=function(f){var a=this,y=this.$locale();if(!this.isValid())return s.bind(this)(f);var e=this.$utils(),l=(f||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(h){switch(h){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return y.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return y.ordinal(a.week(),"W");case"w":case"ww":return e.s(a.week(),h==="w"?1:2,"0");case"W":case"WW":return e.s(a.isoWeek(),h==="W"?1:2,"0");case"k":case"kk":return e.s(String(a.$H===0?24:a.$H),h==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return h}});return s.bind(this)(l)}}})},"./node_modules/dayjs/plugin/customParseFormat.js":function(_){(function(p,r){_.exports=r()})(this,function(){"use strict";var p={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,s=/\d\d?/,f=/\d*[^-_:/,()\s\d]+/,a={},y=function(t){return(t=+t)+(t>68?1900:2e3)},e=function(t){return function(i){this[t]=+i}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(i){if(!i||i==="Z")return 0;var u=i.match(/([+-]|\d\d)/g),c=60*u[1]+(+u[2]||0);return c===0?0:u[0]==="+"?-c:c}(t)}],h=function(t){var i=a[t];return i&&(i.indexOf?i:i.s.concat(i.f))},m=function(t,i){var u,c=a.meridiem;if(c){for(var Y=1;Y<=24;Y+=1)if(t.indexOf(c(Y,0,i))>-1){u=Y>12;break}}else u=t===(i?"pm":"PM");return u},o={A:[f,function(t){this.afternoon=m(t,!1)}],a:[f,function(t){this.afternoon=m(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[s,e("seconds")],ss:[s,e("seconds")],m:[s,e("minutes")],mm:[s,e("minutes")],H:[s,e("hours")],h:[s,e("hours")],HH:[s,e("hours")],hh:[s,e("hours")],D:[s,e("day")],DD:[n,e("day")],Do:[f,function(t){var i=a.ordinal,u=t.match(/\d+/);if(this.day=u[0],i)for(var c=1;c<=31;c+=1)i(c).replace(/\[|\]/g,"")===t&&(this.day=c)}],M:[s,e("month")],MM:[n,e("month")],MMM:[f,function(t){var i=h("months"),u=(h("monthsShort")||i.map(function(c){return c.slice(0,3)})).indexOf(t)+1;if(u<1)throw new Error;this.month=u%12||u}],MMMM:[f,function(t){var i=h("months").indexOf(t)+1;if(i<1)throw new Error;this.month=i%12||i}],Y:[/[+-]?\d+/,e("year")],YY:[n,function(t){this.year=y(t)}],YYYY:[/\d{4}/,e("year")],Z:l,ZZ:l};function v(t){var i,u;i=t,u=a&&a.formats;for(var c=(t=i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(d,M,g){var j=g&&g.toUpperCase();return M||u[g]||p[g]||u[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(O,w,W){return w||W.slice(1)})})).match(r),Y=c.length,D=0;D<Y;D+=1){var E=c[D],T=o[E],x=T&&T[0],L=T&&T[1];c[D]=L?{regex:x,parser:L}:E.replace(/^\[|\]$/g,"")}return function(d){for(var M={},g=0,j=0;g<Y;g+=1){var O=c[g];if(typeof O=="string")j+=O.length;else{var w=O.regex,W=O.parser,A=d.slice(j),C=w.exec(A)[0];W.call(M,C),d=d.replace(C,"")}}return function($){var k=$.afternoon;if(k!==void 0){var b=$.hours;k?b<12&&($.hours+=12):b===12&&($.hours=0),delete $.afternoon}}(M),M}}return function(t,i,u){u.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(y=t.parseTwoDigitYear);var c=i.prototype,Y=c.parse;c.parse=function(D){var E=D.date,T=D.utc,x=D.args;this.$u=T;var L=x[1];if(typeof L=="string"){var d=x[2]===!0,M=x[3]===!0,g=d||M,j=x[2];M&&(j=x[2]),a=this.$locale(),!d&&j&&(a=u.Ls[j]),this.$d=function(A,C,$){try{if(["x","X"].indexOf(C)>-1)return new Date((C==="X"?1e3:1)*A);var k=v(C)(A),b=k.year,S=k.month,K=k.day,Z=k.hours,X=k.minutes,Q=k.seconds,N=k.milliseconds,B=k.zone,R=new Date,z=K||(b||S?1:R.getDate()),F=b||R.getFullYear(),P=0;b&&!S||(P=S>0?S-1:R.getMonth());var U=Z||0,G=X||0,H=Q||0,I=N||0;return B?new Date(Date.UTC(F,P,z,U,G,H,I+60*B.offset*1e3)):$?new Date(Date.UTC(F,P,z,U,G,H,I)):new Date(F,P,z,U,G,H,I)}catch{return new Date("")}}(E,L,T),this.init(),j&&j!==!0&&(this.$L=this.locale(j).$L),g&&E!=this.format(L)&&(this.$d=new Date("")),a={}}else if(L instanceof Array)for(var O=L.length,w=1;w<=O;w+=1){x[1]=L[w-1];var W=u.apply(this,x);if(W.isValid()){this.$d=W.$d,this.$L=W.$L,this.init();break}w===O&&(this.$d=new Date(""))}else Y.call(this,D)}}})},"./node_modules/dayjs/plugin/isoWeek.js":function(_){(function(p,r){_.exports=r()})(this,function(){"use strict";var p="day";return function(r,n,s){var f=function(e){return e.add(4-e.isoWeekday(),p)},a=n.prototype;a.isoWeekYear=function(){return f(this).year()},a.isoWeek=function(e){if(!this.$utils().u(e))return this.add(7*(e-this.isoWeek()),p);var l,h,m,o,v=f(this),t=(l=this.isoWeekYear(),h=this.$u,m=(h?s.utc:s)().year(l).startOf("year"),o=4-m.isoWeekday(),m.isoWeekday()>4&&(o+=7),m.add(o,p));return v.diff(t,"week")+1},a.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var y=a.startOf;a.startOf=function(e,l){var h=this.$utils(),m=!!h.u(l)||l;return h.p(e)==="isoweek"?m?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):y.bind(this)(e,l)}}})},"./node_modules/dayjs/plugin/localizedFormat.js":function(_){(function(p,r){_.exports=r()})(this,function(){"use strict";var p={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,n,s){var f=n.prototype,a=f.format;s.en.formats=p,f.format=function(y){y===void 0&&(y="YYYY-MM-DDTHH:mm:ssZ");var e=this.$locale().formats,l=function(h,m){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(o,v,t){var i=t&&t.toUpperCase();return v||m[t]||p[t]||m[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(u,c,Y){return c||Y.slice(1)})})}(y,e===void 0?{}:e);return a.call(this,l)}}})},"./node_modules/dayjs/plugin/quarterOfYear.js":function(_){(function(p,r){_.exports=r()})(this,function(){"use strict";var p="month",r="quarter";return function(n,s){var f=s.prototype;f.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=f.add;f.add=function(e,l){return e=Number(e),this.$utils().p(l)===r?this.add(3*e,p):a.bind(this)(e,l)};var y=f.startOf;f.startOf=function(e,l){var h=this.$utils(),m=!!h.u(l)||l;if(h.p(e)===r){var o=this.quarter()-1;return m?this.month(3*o).startOf(p).startOf("day"):this.month(3*o+2).endOf(p).endOf("day")}return y.bind(this)(e,l)}}})},"./web_src/js/components/RepoRecentCommits.vue":function(_,p,r){"use strict";r.d(p,{default:function(){return L}});var n=r("./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js"),s=r("./node_modules/@vue/shared/dist/shared.esm-bundler.js");const f={class:"ui header tw-flex tw-items-center tw-justify-between"},a={class:"tw-flex ui segment main-graph"},y={key:0,class:"gt-tc tw-m-auto"},e={key:0},l={key:1,class:"text red"};function h(d,M,g,j,O,w){const W=(0,n.g2)("SvgIcon"),A=(0,n.g2)("Bar");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",f,(0,s.v_)(d.isLoading?g.locale.loadingTitle:d.errorText?g.locale.loadingTitleFailed:"Number of commits in the past year"),1),(0,n.Lk)("div",a,[d.isLoading||d.errorText!==""?((0,n.uX)(),(0,n.CE)("div",y,[d.isLoading?((0,n.uX)(),(0,n.CE)("div",e,[(0,n.bF)(W,{name:"octicon-sync",class:"tw-mr-2 job-status-rotate"}),(0,n.eW)(" "+(0,s.v_)(g.locale.loadingInfo),1)])):((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(W,{name:"octicon-x-circle-fill"}),(0,n.eW)(" "+(0,s.v_)(d.errorText),1)]))])):(0,n.Q3)("v-if",!0),d.data.length!==0?(0,n.bU)(d.data,()=>((0,n.uX)(),(0,n.Wv)(A,{key:1,data:w.toGraphData(d.data),options:w.getOptions()},null,8,["data","options"])),M,0):(0,n.Q3)("v-if",!0)])])}var m=r("./web_src/js/svg.js"),o=r("./node_modules/chart.js/dist/chart.js"),v=r("./web_src/js/modules/fetch.js"),t=r("./node_modules/vue-chartjs/dist/index.js"),i=r("./web_src/js/utils/time.js"),u=r("./web_src/js/utils/color.js"),c=r("./web_src/js/utils.js"),Y=r("./node_modules/chartjs-adapter-dayjs-4/dist/chartjs-adapter-dayjs-4.esm.js");const{pageData:D}=window.config;o.t1.defaults.color=u.K.text,o.t1.defaults.borderColor=u.K.border,o.t1.register(o.UA,o.kc,o.E8,o.m_);var E={components:{Bar:t.yP,SvgIcon:m.Ah},props:{locale:{type:Object,required:!0}},data:()=>({isLoading:!1,errorText:"",repoLink:D.repoLink||[],data:[]}),mounted(){this.fetchGraphData()},methods:{async fetchGraphData(){this.isLoading=!0;try{let d;do d=await(0,v.fG)(`${this.repoLink}/activity/recent-commits/data`),d.status===202&&await(0,c.yy)(1e3);while(d.status===202);if(d.ok){const M=await d.json(),g=Object.values(M)[0].week,j=(0,i.Z1)(new Date),O=(0,i.Ex)(g,j);this.data=(0,i.a$)(O,M).slice(-52),this.errorText=""}else this.errorText=d.statusText}catch(d){this.errorText=d.message}finally{this.isLoading=!1}},toGraphData(d){return{datasets:[{data:d.map(M=>({x:M.week,y:M.commits})),label:"Commits",backgroundColor:u.K.commits,borderWidth:0,tension:.3}]}},getOptions(){return{responsive:!0,maintainAspectRatio:!1,animation:!0,scales:{x:{type:"time",grid:{display:!1},time:{minUnit:"week"},ticks:{maxRotation:0,maxTicksLimit:52}},y:{ticks:{maxTicksLimit:6}}}}}}},T=r("./node_modules/vue-loader/dist/exportHelper.js"),L=(0,T.A)(E,[["render",h],["__scopeId","data-v-33ced179"]])}}]);
