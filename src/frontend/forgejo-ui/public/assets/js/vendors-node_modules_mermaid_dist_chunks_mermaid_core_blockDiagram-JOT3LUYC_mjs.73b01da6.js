"use strict";(self.webpackChunkforgejo=self.webpackChunkforgejo||[]).push([["vendors-node_modules_mermaid_dist_chunks_mermaid_core_blockDiagram-JOT3LUYC_mjs"],{"./node_modules/dagre-d3-es/src/graphlib/graph.js":function(F,L,c){c.d(L,{T:function(){return jt}});var _=c("./node_modules/lodash-es/constant.js"),S=c("./node_modules/lodash-es/isFunction.js"),x=c("./node_modules/lodash-es/keys.js"),b=c("./node_modules/lodash-es/filter.js"),s=c("./node_modules/lodash-es/isEmpty.js"),T=c("./node_modules/lodash-es/forEach.js"),I=c("./node_modules/lodash-es/isUndefined.js"),R=c("./node_modules/lodash-es/_baseFlatten.js"),C=c("./node_modules/lodash-es/_baseRest.js"),W=c("./node_modules/lodash-es/_baseUniq.js"),J=c("./node_modules/lodash-es/isArrayLikeObject.js"),P=(0,C.A)(function(lt){return(0,W.A)((0,R.A)(lt,1,J.A,!0))}),Z=P,N=c("./node_modules/lodash-es/values.js"),tt=c("./node_modules/lodash-es/reduce.js"),pt="\0",ot="\0",Rt="";class jt{constructor(g={}){this._isDirected=Object.prototype.hasOwnProperty.call(g,"directed")?g.directed:!0,this._isMultigraph=Object.prototype.hasOwnProperty.call(g,"multigraph")?g.multigraph:!1,this._isCompound=Object.prototype.hasOwnProperty.call(g,"compound")?g.compound:!1,this._label=void 0,this._defaultNodeLabelFn=_.A(void 0),this._defaultEdgeLabelFn=_.A(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[ot]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(g){return this._label=g,this}graph(){return this._label}setDefaultNodeLabel(g){return S.A(g)||(g=_.A(g)),this._defaultNodeLabelFn=g,this}nodeCount(){return this._nodeCount}nodes(){return x.A(this._nodes)}sources(){var g=this;return b.A(this.nodes(),function(v){return s.A(g._in[v])})}sinks(){var g=this;return b.A(this.nodes(),function(v){return s.A(g._out[v])})}setNodes(g,v){var K=arguments,z=this;return T.A(g,function(Q){K.length>1?z.setNode(Q,v):z.setNode(Q)}),this}setNode(g,v){return Object.prototype.hasOwnProperty.call(this._nodes,g)?(arguments.length>1&&(this._nodes[g]=v),this):(this._nodes[g]=arguments.length>1?v:this._defaultNodeLabelFn(g),this._isCompound&&(this._parent[g]=ot,this._children[g]={},this._children[ot][g]=!0),this._in[g]={},this._preds[g]={},this._out[g]={},this._sucs[g]={},++this._nodeCount,this)}node(g){return this._nodes[g]}hasNode(g){return Object.prototype.hasOwnProperty.call(this._nodes,g)}removeNode(g){if(Object.prototype.hasOwnProperty.call(this._nodes,g)){var v=K=>this.removeEdge(this._edgeObjs[K]);delete this._nodes[g],this._isCompound&&(this._removeFromParentsChildList(g),delete this._parent[g],T.A(this.children(g),K=>{this.setParent(K)}),delete this._children[g]),T.A(x.A(this._in[g]),v),delete this._in[g],delete this._preds[g],T.A(x.A(this._out[g]),v),delete this._out[g],delete this._sucs[g],--this._nodeCount}return this}setParent(g,v){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(I.A(v))v=ot;else{v+="";for(var K=v;!I.A(K);K=this.parent(K))if(K===g)throw new Error("Setting "+v+" as parent of "+g+" would create a cycle");this.setNode(v)}return this.setNode(g),this._removeFromParentsChildList(g),this._parent[g]=v,this._children[v][g]=!0,this}_removeFromParentsChildList(g){delete this._children[this._parent[g]][g]}parent(g){if(this._isCompound){var v=this._parent[g];if(v!==ot)return v}}children(g){if(I.A(g)&&(g=ot),this._isCompound){var v=this._children[g];if(v)return x.A(v)}else{if(g===ot)return this.nodes();if(this.hasNode(g))return[]}}predecessors(g){var v=this._preds[g];if(v)return x.A(v)}successors(g){var v=this._sucs[g];if(v)return x.A(v)}neighbors(g){var v=this.predecessors(g);if(v)return Z(v,this.successors(g))}isLeaf(g){var v;return this.isDirected()?v=this.successors(g):v=this.neighbors(g),v.length===0}filterNodes(g){var v=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});v.setGraph(this.graph());var K=this;T.A(this._nodes,function(q,at){g(at)&&v.setNode(at,q)}),T.A(this._edgeObjs,function(q){v.hasNode(q.v)&&v.hasNode(q.w)&&v.setEdge(q,K.edge(q))});var z={};function Q(q){var at=K.parent(q);return at===void 0||v.hasNode(at)?(z[q]=at,at):at in z?z[at]:Q(at)}return this._isCompound&&T.A(v.nodes(),function(q){v.setParent(q,Q(q))}),v}setDefaultEdgeLabel(g){return S.A(g)||(g=_.A(g)),this._defaultEdgeLabelFn=g,this}edgeCount(){return this._edgeCount}edges(){return N.A(this._edgeObjs)}setPath(g,v){var K=this,z=arguments;return tt.A(g,function(Q,q){return z.length>1?K.setEdge(Q,q,v):K.setEdge(Q,q),q}),this}setEdge(){var g,v,K,z,Q=!1,q=arguments[0];typeof q=="object"&&q!==null&&"v"in q?(g=q.v,v=q.w,K=q.name,arguments.length===2&&(z=arguments[1],Q=!0)):(g=q,v=arguments[1],K=arguments[3],arguments.length>2&&(z=arguments[2],Q=!0)),g=""+g,v=""+v,I.A(K)||(K=""+K);var at=vt(this._isDirected,g,v,K);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,at))return Q&&(this._edgeLabels[at]=z),this;if(!I.A(K)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(v),this._edgeLabels[at]=Q?z:this._defaultEdgeLabelFn(g,v,K);var Mt=Wt(this._isDirected,g,v,K);return g=Mt.v,v=Mt.w,Object.freeze(Mt),this._edgeObjs[at]=Mt,Nt(this._preds[v],g),Nt(this._sucs[g],v),this._in[v][at]=Mt,this._out[g][at]=Mt,this._edgeCount++,this}edge(g,v,K){var z=arguments.length===1?kt(this._isDirected,arguments[0]):vt(this._isDirected,g,v,K);return this._edgeLabels[z]}hasEdge(g,v,K){var z=arguments.length===1?kt(this._isDirected,arguments[0]):vt(this._isDirected,g,v,K);return Object.prototype.hasOwnProperty.call(this._edgeLabels,z)}removeEdge(g,v,K){var z=arguments.length===1?kt(this._isDirected,arguments[0]):vt(this._isDirected,g,v,K),Q=this._edgeObjs[z];return Q&&(g=Q.v,v=Q.w,delete this._edgeLabels[z],delete this._edgeObjs[z],xt(this._preds[v],g),xt(this._sucs[g],v),delete this._in[v][z],delete this._out[g][z],this._edgeCount--),this}inEdges(g,v){var K=this._in[g];if(K){var z=N.A(K);return v?b.A(z,function(Q){return Q.v===v}):z}}outEdges(g,v){var K=this._out[g];if(K){var z=N.A(K);return v?b.A(z,function(Q){return Q.w===v}):z}}nodeEdges(g,v){var K=this.inEdges(g,v);if(K)return K.concat(this.outEdges(g,v))}}jt.prototype._nodeCount=0,jt.prototype._edgeCount=0;function Nt(lt,g){lt[g]?lt[g]++:lt[g]=1}function xt(lt,g){--lt[g]||delete lt[g]}function vt(lt,g,v,K){var z=""+g,Q=""+v;if(!lt&&z>Q){var q=z;z=Q,Q=q}return z+Rt+Q+Rt+(I.A(K)?pt:K)}function Wt(lt,g,v,K){var z=""+g,Q=""+v;if(!lt&&z>Q){var q=z;z=Q,Q=q}var at={v:z,w:Q};return K&&(at.name=K),at}function kt(lt,g){return vt(lt,g.v,g.w,g.name)}},"./node_modules/dagre-d3-es/src/graphlib/index.js":function(F,L,c){c.d(L,{T:function(){return _.T}});var _=c("./node_modules/dagre-d3-es/src/graphlib/graph.js");const S="2.1.9-pre"},"./node_modules/khroma/dist/methods/channel.js":function(F,L,c){var _=c("./node_modules/khroma/dist/utils/index.js"),S=c("./node_modules/khroma/dist/color/index.js");const x=(b,s)=>_.A.lang.round(S.A.parse(b)[s]);L.A=x},"./node_modules/lodash-es/_SetCache.js":function(F,L,c){c.d(L,{A:function(){return R}});var _=c("./node_modules/lodash-es/_MapCache.js"),S="__lodash_hash_undefined__";function x(C){return this.__data__.set(C,S),this}var b=x;function s(C){return this.__data__.has(C)}var T=s;function I(C){var W=-1,J=C==null?0:C.length;for(this.__data__=new _.A;++W<J;)this.add(C[W])}I.prototype.add=I.prototype.push=b,I.prototype.has=T;var R=I},"./node_modules/lodash-es/_arrayEach.js":function(F,L){function c(_,S){for(var x=-1,b=_==null?0:_.length;++x<b&&S(_[x],x,_)!==!1;);return _}L.A=c},"./node_modules/lodash-es/_arrayFilter.js":function(F,L){function c(_,S){for(var x=-1,b=_==null?0:_.length,s=0,T=[];++x<b;){var I=_[x];S(I,x,_)&&(T[s++]=I)}return T}L.A=c},"./node_modules/lodash-es/_arrayIncludes.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseIndexOf.js");function S(x,b){var s=x==null?0:x.length;return!!s&&(0,_.A)(x,b,0)>-1}L.A=S},"./node_modules/lodash-es/_arrayIncludesWith.js":function(F,L){function c(_,S,x){for(var b=-1,s=_==null?0:_.length;++b<s;)if(x(S,_[b]))return!0;return!1}L.A=c},"./node_modules/lodash-es/_arrayMap.js":function(F,L){function c(_,S){for(var x=-1,b=_==null?0:_.length,s=Array(b);++x<b;)s[x]=S(_[x],x,_);return s}L.A=c},"./node_modules/lodash-es/_arrayPush.js":function(F,L){function c(_,S){for(var x=-1,b=S.length,s=_.length;++x<b;)_[s+x]=S[x];return _}L.A=c},"./node_modules/lodash-es/_arraySome.js":function(F,L){function c(_,S){for(var x=-1,b=_==null?0:_.length;++x<b;)if(S(_[x],x,_))return!0;return!1}L.A=c},"./node_modules/lodash-es/_baseClone.js":function(F,L,c){c.d(L,{A:function(){return cs}});var _=c("./node_modules/lodash-es/_Stack.js"),S=c("./node_modules/lodash-es/_arrayEach.js"),x=c("./node_modules/lodash-es/_assignValue.js"),b=c("./node_modules/lodash-es/_copyObject.js"),s=c("./node_modules/lodash-es/keys.js");function T(D,dt){return D&&(0,b.A)(dt,(0,s.A)(dt),D)}var I=T,R=c("./node_modules/lodash-es/keysIn.js");function C(D,dt){return D&&(0,b.A)(dt,(0,R.A)(dt),D)}var W=C,J=c("./node_modules/lodash-es/_cloneBuffer.js"),P=c("./node_modules/lodash-es/_copyArray.js"),Z=c("./node_modules/lodash-es/_getSymbols.js");function N(D,dt){return(0,b.A)(D,(0,Z.A)(D),dt)}var tt=N,pt=c("./node_modules/lodash-es/_getSymbolsIn.js");function ot(D,dt){return(0,b.A)(D,(0,pt.A)(D),dt)}var Rt=ot,jt=c("./node_modules/lodash-es/_getAllKeys.js"),Nt=c("./node_modules/lodash-es/_getAllKeysIn.js"),xt=c("./node_modules/lodash-es/_getTag.js"),vt=Object.prototype,Wt=vt.hasOwnProperty;function kt(D){var dt=D.length,Tt=new D.constructor(dt);return dt&&typeof D[0]=="string"&&Wt.call(D,"index")&&(Tt.index=D.index,Tt.input=D.input),Tt}var lt=kt,g=c("./node_modules/lodash-es/_cloneArrayBuffer.js");function v(D,dt){var Tt=dt?(0,g.A)(D.buffer):D.buffer;return new D.constructor(Tt,D.byteOffset,D.byteLength)}var K=v,z=/\w*$/;function Q(D){var dt=new D.constructor(D.source,z.exec(D));return dt.lastIndex=D.lastIndex,dt}var q=Q,at=c("./node_modules/lodash-es/_Symbol.js"),Mt=at.A?at.A.prototype:void 0,he=Mt?Mt.valueOf:void 0;function je(D){return he?Object(he.call(D)):{}}var Ce=je,Re=c("./node_modules/lodash-es/_cloneTypedArray.js"),ue="[object Boolean]",ie="[object Date]",ge="[object Map]",Me="[object Number]",Ke="[object RegExp]",fe="[object Set]",_e="[object String]",qt="[object Symbol]",te="[object ArrayBuffer]",pe="[object DataView]",Pe="[object Float32Array]",Be="[object Float64Array]",be="[object Int8Array]",ye="[object Int16Array]",me="[object Int32Array]",Ne="[object Uint8Array]",Ue="[object Uint8ClampedArray]",ze="[object Uint16Array]",Fe="[object Uint32Array]";function We(D,dt,Tt){var ae=D.constructor;switch(dt){case te:return(0,g.A)(D);case ue:case ie:return new ae(+D);case pe:return K(D,Tt);case Pe:case Be:case be:case ye:case me:case Ne:case Ue:case ze:case Fe:return(0,Re.A)(D,Tt);case ge:return new ae;case Me:case _e:return new ae(D);case Ke:return q(D);case fe:return new ae;case qt:return Ce(D)}}var Ye=We,xe=c("./node_modules/lodash-es/_initCloneObject.js"),He=c("./node_modules/lodash-es/isArray.js"),ht=c("./node_modules/lodash-es/isBuffer.js"),oe=c("./node_modules/lodash-es/isObjectLike.js"),Ge="[object Map]";function Zt(D){return(0,oe.A)(D)&&(0,xt.A)(D)==Ge}var le=Zt,ee=c("./node_modules/lodash-es/_baseUnary.js"),Yt=c("./node_modules/lodash-es/_nodeUtil.js"),se=Yt.A&&Yt.A.isMap,ve=se?(0,ee.A)(se):le,Xe=ve,Dt=c("./node_modules/lodash-es/isObject.js"),Ae="[object Set]";function Ze(D){return(0,oe.A)(D)&&(0,xt.A)(D)==Ae}var Le=Ze,re=Yt.A&&Yt.A.isSet,At=re?(0,ee.A)(re):Le,Ve=At,Vt=1,Je=2,Qe=4,Ee="[object Arguments]",Se="[object Array]",$e="[object Boolean]",qe="[object Date]",p="[object Error]",w="[object Function]",Y="[object GeneratorFunction]",G="[object Map]",nt="[object Number]",X="[object Object]",_t="[object RegExp]",ct="[object Set]",ut="[object String]",bt="[object Symbol]",Ot="[object WeakMap]",Lt="[object ArrayBuffer]",ft="[object DataView]",Kt="[object Float32Array]",V="[object Float64Array]",rt="[object Int8Array]",et="[object Int16Array]",yt="[object Int32Array]",zt="[object Uint8Array]",we="[object Uint8ClampedArray]",Jt="[object Uint16Array]",Et="[object Uint32Array]",it={};it[Ee]=it[Se]=it[Lt]=it[ft]=it[$e]=it[qe]=it[Kt]=it[V]=it[rt]=it[et]=it[yt]=it[G]=it[nt]=it[X]=it[_t]=it[ct]=it[ut]=it[bt]=it[zt]=it[we]=it[Jt]=it[Et]=!0,it[p]=it[w]=it[Ot]=!1;function ke(D,dt,Tt,ae,De,Ht){var It,Oe=dt&Vt,Te=dt&Je,ds=dt&Qe;if(Tt&&(It=De?Tt(D,ae,De,Ht):Tt(D)),It!==void 0)return It;if(!(0,Dt.A)(D))return D;var ts=(0,He.A)(D);if(ts){if(It=lt(D),!Oe)return(0,P.A)(D,It)}else{var Ft=(0,xt.A)(D),es=Ft==w||Ft==Y;if((0,ht.A)(D))return(0,J.A)(D,Oe);if(Ft==X||Ft==Ee||es&&!De){if(It=Te||es?{}:(0,xe.A)(D),!Oe)return Te?Rt(D,W(It,D)):tt(D,I(It,D))}else{if(!it[Ft])return De?D:{};It=Ye(D,Ft,Oe)}}Ht||(Ht=new _.A);var ss=Ht.get(D);if(ss)return ss;Ht.set(D,It),Ve(D)?D.forEach(function(Gt){It.add(ke(Gt,dt,Tt,Gt,D,Ht))}):Xe(D)&&D.forEach(function(Gt,Qt){It.set(Qt,ke(Gt,dt,Tt,Qt,D,Ht))});var hs=ds?Te?Nt.A:jt.A:Te?R.A:s.A,rs=ts?void 0:hs(D);return(0,S.A)(rs||D,function(Gt,Qt){rs&&(Qt=Gt,Gt=D[Qt]),(0,x.A)(It,Qt,ke(Gt,dt,Tt,Qt,D,Ht))}),It}var cs=ke},"./node_modules/lodash-es/_baseEach.js":function(F,L,c){c.d(L,{A:function(){return T}});var _=c("./node_modules/lodash-es/_baseForOwn.js"),S=c("./node_modules/lodash-es/isArrayLike.js");function x(I,R){return function(C,W){if(C==null)return C;if(!(0,S.A)(C))return I(C,W);for(var J=C.length,P=R?J:-1,Z=Object(C);(R?P--:++P<J)&&W(Z[P],P,Z)!==!1;);return C}}var b=x,s=b(_.A),T=s},"./node_modules/lodash-es/_baseFilter.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseEach.js");function S(x,b){var s=[];return(0,_.A)(x,function(T,I,R){b(T,I,R)&&s.push(T)}),s}L.A=S},"./node_modules/lodash-es/_baseFindIndex.js":function(F,L){function c(_,S,x,b){for(var s=_.length,T=x+(b?1:-1);b?T--:++T<s;)if(S(_[T],T,_))return T;return-1}L.A=c},"./node_modules/lodash-es/_baseFlatten.js":function(F,L,c){c.d(L,{A:function(){return C}});var _=c("./node_modules/lodash-es/_arrayPush.js"),S=c("./node_modules/lodash-es/_Symbol.js"),x=c("./node_modules/lodash-es/isArguments.js"),b=c("./node_modules/lodash-es/isArray.js"),s=S.A?S.A.isConcatSpreadable:void 0;function T(W){return(0,b.A)(W)||(0,x.A)(W)||!!(s&&W&&W[s])}var I=T;function R(W,J,P,Z,N){var tt=-1,pt=W.length;for(P||(P=I),N||(N=[]);++tt<pt;){var ot=W[tt];J>0&&P(ot)?J>1?R(ot,J-1,P,Z,N):(0,_.A)(N,ot):Z||(N[N.length]=ot)}return N}var C=R},"./node_modules/lodash-es/_baseForOwn.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseFor.js"),S=c("./node_modules/lodash-es/keys.js");function x(b,s){return b&&(0,_.A)(b,s,S.A)}L.A=x},"./node_modules/lodash-es/_baseGet.js":function(F,L,c){var _=c("./node_modules/lodash-es/_castPath.js"),S=c("./node_modules/lodash-es/_toKey.js");function x(b,s){s=(0,_.A)(s,b);for(var T=0,I=s.length;b!=null&&T<I;)b=b[(0,S.A)(s[T++])];return T&&T==I?b:void 0}L.A=x},"./node_modules/lodash-es/_baseGetAllKeys.js":function(F,L,c){var _=c("./node_modules/lodash-es/_arrayPush.js"),S=c("./node_modules/lodash-es/isArray.js");function x(b,s,T){var I=s(b);return(0,S.A)(b)?I:(0,_.A)(I,T(b))}L.A=x},"./node_modules/lodash-es/_baseIndexOf.js":function(F,L,c){c.d(L,{A:function(){return I}});var _=c("./node_modules/lodash-es/_baseFindIndex.js");function S(R){return R!==R}var x=S;function b(R,C,W){for(var J=W-1,P=R.length;++J<P;)if(R[J]===C)return J;return-1}var s=b;function T(R,C,W){return C===C?s(R,C,W):(0,_.A)(R,x,W)}var I=T},"./node_modules/lodash-es/_baseIteratee.js":function(F,L,c){c.d(L,{A:function(){return qe}});var _=c("./node_modules/lodash-es/_Stack.js"),S=c("./node_modules/lodash-es/_SetCache.js"),x=c("./node_modules/lodash-es/_arraySome.js"),b=c("./node_modules/lodash-es/_cacheHas.js"),s=1,T=2;function I(p,w,Y,G,nt,X){var _t=Y&s,ct=p.length,ut=w.length;if(ct!=ut&&!(_t&&ut>ct))return!1;var bt=X.get(p),Ot=X.get(w);if(bt&&Ot)return bt==w&&Ot==p;var Lt=-1,ft=!0,Kt=Y&T?new S.A:void 0;for(X.set(p,w),X.set(w,p);++Lt<ct;){var V=p[Lt],rt=w[Lt];if(G)var et=_t?G(rt,V,Lt,w,p,X):G(V,rt,Lt,p,w,X);if(et!==void 0){if(et)continue;ft=!1;break}if(Kt){if(!(0,x.A)(w,function(yt,zt){if(!(0,b.A)(Kt,zt)&&(V===yt||nt(V,yt,Y,G,X)))return Kt.push(zt)})){ft=!1;break}}else if(!(V===rt||nt(V,rt,Y,G,X))){ft=!1;break}}return X.delete(p),X.delete(w),ft}var R=I,C=c("./node_modules/lodash-es/_Symbol.js"),W=c("./node_modules/lodash-es/_Uint8Array.js"),J=c("./node_modules/lodash-es/eq.js");function P(p){var w=-1,Y=Array(p.size);return p.forEach(function(G,nt){Y[++w]=[nt,G]}),Y}var Z=P,N=c("./node_modules/lodash-es/_setToArray.js"),tt=1,pt=2,ot="[object Boolean]",Rt="[object Date]",jt="[object Error]",Nt="[object Map]",xt="[object Number]",vt="[object RegExp]",Wt="[object Set]",kt="[object String]",lt="[object Symbol]",g="[object ArrayBuffer]",v="[object DataView]",K=C.A?C.A.prototype:void 0,z=K?K.valueOf:void 0;function Q(p,w,Y,G,nt,X,_t){switch(Y){case v:if(p.byteLength!=w.byteLength||p.byteOffset!=w.byteOffset)return!1;p=p.buffer,w=w.buffer;case g:return!(p.byteLength!=w.byteLength||!X(new W.A(p),new W.A(w)));case ot:case Rt:case xt:return(0,J.A)(+p,+w);case jt:return p.name==w.name&&p.message==w.message;case vt:case kt:return p==w+"";case Nt:var ct=Z;case Wt:var ut=G&tt;if(ct||(ct=N.A),p.size!=w.size&&!ut)return!1;var bt=_t.get(p);if(bt)return bt==w;G|=pt,_t.set(p,w);var Ot=R(ct(p),ct(w),G,nt,X,_t);return _t.delete(p),Ot;case lt:if(z)return z.call(p)==z.call(w)}return!1}var q=Q,at=c("./node_modules/lodash-es/_getAllKeys.js"),Mt=1,he=Object.prototype,je=he.hasOwnProperty;function Ce(p,w,Y,G,nt,X){var _t=Y&Mt,ct=(0,at.A)(p),ut=ct.length,bt=(0,at.A)(w),Ot=bt.length;if(ut!=Ot&&!_t)return!1;for(var Lt=ut;Lt--;){var ft=ct[Lt];if(!(_t?ft in w:je.call(w,ft)))return!1}var Kt=X.get(p),V=X.get(w);if(Kt&&V)return Kt==w&&V==p;var rt=!0;X.set(p,w),X.set(w,p);for(var et=_t;++Lt<ut;){ft=ct[Lt];var yt=p[ft],zt=w[ft];if(G)var we=_t?G(zt,yt,ft,w,p,X):G(yt,zt,ft,p,w,X);if(!(we===void 0?yt===zt||nt(yt,zt,Y,G,X):we)){rt=!1;break}et||(et=ft=="constructor")}if(rt&&!et){var Jt=p.constructor,Et=w.constructor;Jt!=Et&&"constructor"in p&&"constructor"in w&&!(typeof Jt=="function"&&Jt instanceof Jt&&typeof Et=="function"&&Et instanceof Et)&&(rt=!1)}return X.delete(p),X.delete(w),rt}var Re=Ce,ue=c("./node_modules/lodash-es/_getTag.js"),ie=c("./node_modules/lodash-es/isArray.js"),ge=c("./node_modules/lodash-es/isBuffer.js"),Me=c("./node_modules/lodash-es/isTypedArray.js"),Ke=1,fe="[object Arguments]",_e="[object Array]",qt="[object Object]",te=Object.prototype,pe=te.hasOwnProperty;function Pe(p,w,Y,G,nt,X){var _t=(0,ie.A)(p),ct=(0,ie.A)(w),ut=_t?_e:(0,ue.A)(p),bt=ct?_e:(0,ue.A)(w);ut=ut==fe?qt:ut,bt=bt==fe?qt:bt;var Ot=ut==qt,Lt=bt==qt,ft=ut==bt;if(ft&&(0,ge.A)(p)){if(!(0,ge.A)(w))return!1;_t=!0,Ot=!1}if(ft&&!Ot)return X||(X=new _.A),_t||(0,Me.A)(p)?R(p,w,Y,G,nt,X):q(p,w,ut,Y,G,nt,X);if(!(Y&Ke)){var Kt=Ot&&pe.call(p,"__wrapped__"),V=Lt&&pe.call(w,"__wrapped__");if(Kt||V){var rt=Kt?p.value():p,et=V?w.value():w;return X||(X=new _.A),nt(rt,et,Y,G,X)}}return ft?(X||(X=new _.A),Re(p,w,Y,G,nt,X)):!1}var Be=Pe,be=c("./node_modules/lodash-es/isObjectLike.js");function ye(p,w,Y,G,nt){return p===w?!0:p==null||w==null||!(0,be.A)(p)&&!(0,be.A)(w)?p!==p&&w!==w:Be(p,w,Y,G,ye,nt)}var me=ye,Ne=1,Ue=2;function ze(p,w,Y,G){var nt=Y.length,X=nt,_t=!G;if(p==null)return!X;for(p=Object(p);nt--;){var ct=Y[nt];if(_t&&ct[2]?ct[1]!==p[ct[0]]:!(ct[0]in p))return!1}for(;++nt<X;){ct=Y[nt];var ut=ct[0],bt=p[ut],Ot=ct[1];if(_t&&ct[2]){if(bt===void 0&&!(ut in p))return!1}else{var Lt=new _.A;if(G)var ft=G(bt,Ot,ut,p,w,Lt);if(!(ft===void 0?me(Ot,bt,Ne|Ue,G,Lt):ft))return!1}}return!0}var Fe=ze,We=c("./node_modules/lodash-es/isObject.js");function Ye(p){return p===p&&!(0,We.A)(p)}var xe=Ye,He=c("./node_modules/lodash-es/keys.js");function ht(p){for(var w=(0,He.A)(p),Y=w.length;Y--;){var G=w[Y],nt=p[G];w[Y]=[G,nt,xe(nt)]}return w}var oe=ht;function Ge(p,w){return function(Y){return Y==null?!1:Y[p]===w&&(w!==void 0||p in Object(Y))}}var Zt=Ge;function le(p){var w=oe(p);return w.length==1&&w[0][2]?Zt(w[0][0],w[0][1]):function(Y){return Y===p||Fe(Y,p,w)}}var ee=le,Yt=c("./node_modules/lodash-es/_baseGet.js");function se(p,w,Y){var G=p==null?void 0:(0,Yt.A)(p,w);return G===void 0?Y:G}var ve=se,Xe=c("./node_modules/lodash-es/hasIn.js"),Dt=c("./node_modules/lodash-es/_isKey.js"),Ae=c("./node_modules/lodash-es/_toKey.js"),Ze=1,Le=2;function re(p,w){return(0,Dt.A)(p)&&xe(w)?Zt((0,Ae.A)(p),w):function(Y){var G=ve(Y,p);return G===void 0&&G===w?(0,Xe.A)(Y,p):me(w,G,Ze|Le)}}var At=re,Ve=c("./node_modules/lodash-es/identity.js"),Vt=c("./node_modules/lodash-es/_baseProperty.js");function Je(p){return function(w){return(0,Yt.A)(w,p)}}var Qe=Je;function Ee(p){return(0,Dt.A)(p)?(0,Vt.A)((0,Ae.A)(p)):Qe(p)}var Se=Ee;function $e(p){return typeof p=="function"?p:p==null?Ve.A:typeof p=="object"?(0,ie.A)(p)?At(p[0],p[1]):ee(p):Se(p)}var qe=$e},"./node_modules/lodash-es/_baseProperty.js":function(F,L){function c(_){return function(S){return S?.[_]}}L.A=c},"./node_modules/lodash-es/_baseUniq.js":function(F,L,c){c.d(L,{A:function(){return Z}});var _=c("./node_modules/lodash-es/_SetCache.js"),S=c("./node_modules/lodash-es/_arrayIncludes.js"),x=c("./node_modules/lodash-es/_arrayIncludesWith.js"),b=c("./node_modules/lodash-es/_cacheHas.js"),s=c("./node_modules/lodash-es/_Set.js"),T=c("./node_modules/lodash-es/noop.js"),I=c("./node_modules/lodash-es/_setToArray.js"),R=1/0,C=s.A&&1/(0,I.A)(new s.A([,-0]))[1]==R?function(N){return new s.A(N)}:T.A,W=C,J=200;function P(N,tt,pt){var ot=-1,Rt=S.A,jt=N.length,Nt=!0,xt=[],vt=xt;if(pt)Nt=!1,Rt=x.A;else if(jt>=J){var Wt=tt?null:W(N);if(Wt)return(0,I.A)(Wt);Nt=!1,Rt=b.A,vt=new _.A}else vt=tt?[]:xt;t:for(;++ot<jt;){var kt=N[ot],lt=tt?tt(kt):kt;if(kt=pt||kt!==0?kt:0,Nt&&lt===lt){for(var g=vt.length;g--;)if(vt[g]===lt)continue t;tt&&vt.push(lt),xt.push(kt)}else Rt(vt,lt,pt)||(vt!==xt&&vt.push(lt),xt.push(kt))}return xt}var Z=P},"./node_modules/lodash-es/_cacheHas.js":function(F,L){function c(_,S){return _.has(S)}L.A=c},"./node_modules/lodash-es/_castFunction.js":function(F,L,c){var _=c("./node_modules/lodash-es/identity.js");function S(x){return typeof x=="function"?x:_.A}L.A=S},"./node_modules/lodash-es/_castPath.js":function(F,L,c){c.d(L,{A:function(){return Z}});var _=c("./node_modules/lodash-es/isArray.js"),S=c("./node_modules/lodash-es/_isKey.js"),x=c("./node_modules/lodash-es/memoize.js"),b=500;function s(N){var tt=(0,x.A)(N,function(ot){return pt.size===b&&pt.clear(),ot}),pt=tt.cache;return tt}var T=s,I=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,C=T(function(N){var tt=[];return N.charCodeAt(0)===46&&tt.push(""),N.replace(I,function(pt,ot,Rt,jt){tt.push(Rt?jt.replace(R,"$1"):ot||pt)}),tt}),W=C,J=c("./node_modules/lodash-es/toString.js");function P(N,tt){return(0,_.A)(N)?N:(0,S.A)(N,tt)?[N]:W((0,J.A)(N))}var Z=P},"./node_modules/lodash-es/_getAllKeys.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseGetAllKeys.js"),S=c("./node_modules/lodash-es/_getSymbols.js"),x=c("./node_modules/lodash-es/keys.js");function b(s){return(0,_.A)(s,x.A,S.A)}L.A=b},"./node_modules/lodash-es/_getAllKeysIn.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseGetAllKeys.js"),S=c("./node_modules/lodash-es/_getSymbolsIn.js"),x=c("./node_modules/lodash-es/keysIn.js");function b(s){return(0,_.A)(s,x.A,S.A)}L.A=b},"./node_modules/lodash-es/_getSymbols.js":function(F,L,c){var _=c("./node_modules/lodash-es/_arrayFilter.js"),S=c("./node_modules/lodash-es/stubArray.js"),x=Object.prototype,b=x.propertyIsEnumerable,s=Object.getOwnPropertySymbols,T=s?function(I){return I==null?[]:(I=Object(I),(0,_.A)(s(I),function(R){return b.call(I,R)}))}:S.A;L.A=T},"./node_modules/lodash-es/_getSymbolsIn.js":function(F,L,c){var _=c("./node_modules/lodash-es/_arrayPush.js"),S=c("./node_modules/lodash-es/_getPrototype.js"),x=c("./node_modules/lodash-es/_getSymbols.js"),b=c("./node_modules/lodash-es/stubArray.js"),s=Object.getOwnPropertySymbols,T=s?function(I){for(var R=[];I;)(0,_.A)(R,(0,x.A)(I)),I=(0,S.A)(I);return R}:b.A;L.A=T},"./node_modules/lodash-es/_hasPath.js":function(F,L,c){var _=c("./node_modules/lodash-es/_castPath.js"),S=c("./node_modules/lodash-es/isArguments.js"),x=c("./node_modules/lodash-es/isArray.js"),b=c("./node_modules/lodash-es/_isIndex.js"),s=c("./node_modules/lodash-es/isLength.js"),T=c("./node_modules/lodash-es/_toKey.js");function I(R,C,W){C=(0,_.A)(C,R);for(var J=-1,P=C.length,Z=!1;++J<P;){var N=(0,T.A)(C[J]);if(!(Z=R!=null&&W(R,N)))break;R=R[N]}return Z||++J!=P?Z:(P=R==null?0:R.length,!!P&&(0,s.A)(P)&&(0,b.A)(N,P)&&((0,x.A)(R)||(0,S.A)(R)))}L.A=I},"./node_modules/lodash-es/_isKey.js":function(F,L,c){var _=c("./node_modules/lodash-es/isArray.js"),S=c("./node_modules/lodash-es/isSymbol.js"),x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,b=/^\w*$/;function s(T,I){if((0,_.A)(T))return!1;var R=typeof T;return R=="number"||R=="symbol"||R=="boolean"||T==null||(0,S.A)(T)?!0:b.test(T)||!x.test(T)||I!=null&&T in Object(I)}L.A=s},"./node_modules/lodash-es/_setToArray.js":function(F,L){function c(_){var S=-1,x=Array(_.size);return _.forEach(function(b){x[++S]=b}),x}L.A=c},"./node_modules/lodash-es/_toKey.js":function(F,L,c){var _=c("./node_modules/lodash-es/isSymbol.js"),S=1/0;function x(b){if(typeof b=="string"||(0,_.A)(b))return b;var s=b+"";return s=="0"&&1/b==-S?"-0":s}L.A=x},"./node_modules/lodash-es/clone.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseClone.js"),S=4;function x(b){return(0,_.A)(b,S)}L.A=x},"./node_modules/lodash-es/filter.js":function(F,L,c){var _=c("./node_modules/lodash-es/_arrayFilter.js"),S=c("./node_modules/lodash-es/_baseFilter.js"),x=c("./node_modules/lodash-es/_baseIteratee.js"),b=c("./node_modules/lodash-es/isArray.js");function s(T,I){var R=(0,b.A)(T)?_.A:S.A;return R(T,(0,x.A)(I,3))}L.A=s},"./node_modules/lodash-es/forEach.js":function(F,L,c){var _=c("./node_modules/lodash-es/_arrayEach.js"),S=c("./node_modules/lodash-es/_baseEach.js"),x=c("./node_modules/lodash-es/_castFunction.js"),b=c("./node_modules/lodash-es/isArray.js");function s(T,I){var R=(0,b.A)(T)?_.A:S.A;return R(T,(0,x.A)(I))}L.A=s},"./node_modules/lodash-es/hasIn.js":function(F,L,c){c.d(L,{A:function(){return s}});function _(T,I){return T!=null&&I in Object(T)}var S=_,x=c("./node_modules/lodash-es/_hasPath.js");function b(T,I){return T!=null&&(0,x.A)(T,I,S)}var s=b},"./node_modules/lodash-es/isSymbol.js":function(F,L,c){var _=c("./node_modules/lodash-es/_baseGetTag.js"),S=c("./node_modules/lodash-es/isObjectLike.js"),x="[object Symbol]";function b(s){return typeof s=="symbol"||(0,S.A)(s)&&(0,_.A)(s)==x}L.A=b},"./node_modules/lodash-es/isUndefined.js":function(F,L){function c(_){return _===void 0}L.A=c},"./node_modules/lodash-es/keys.js":function(F,L,c){var _=c("./node_modules/lodash-es/_arrayLikeKeys.js"),S=c("./node_modules/lodash-es/_baseKeys.js"),x=c("./node_modules/lodash-es/isArrayLike.js");function b(s){return(0,x.A)(s)?(0,_.A)(s):(0,S.A)(s)}L.A=b},"./node_modules/lodash-es/noop.js":function(F,L){function c(){}L.A=c},"./node_modules/lodash-es/reduce.js":function(F,L,c){c.d(L,{A:function(){return C}});function _(W,J,P,Z){var N=-1,tt=W==null?0:W.length;for(Z&&tt&&(P=W[++N]);++N<tt;)P=J(P,W[N],N,W);return P}var S=_,x=c("./node_modules/lodash-es/_baseEach.js"),b=c("./node_modules/lodash-es/_baseIteratee.js");function s(W,J,P,Z,N){return N(W,function(tt,pt,ot){P=Z?(Z=!1,tt):J(P,tt,pt,ot)}),P}var T=s,I=c("./node_modules/lodash-es/isArray.js");function R(W,J,P){var Z=(0,I.A)(W)?S:T,N=arguments.length<3;return Z(W,(0,b.A)(J,4),P,N,x.A)}var C=R},"./node_modules/lodash-es/stubArray.js":function(F,L){function c(){return[]}L.A=c},"./node_modules/lodash-es/toString.js":function(F,L,c){c.d(L,{A:function(){return J}});var _=c("./node_modules/lodash-es/_Symbol.js"),S=c("./node_modules/lodash-es/_arrayMap.js"),x=c("./node_modules/lodash-es/isArray.js"),b=c("./node_modules/lodash-es/isSymbol.js"),s=1/0,T=_.A?_.A.prototype:void 0,I=T?T.toString:void 0;function R(P){if(typeof P=="string")return P;if((0,x.A)(P))return(0,S.A)(P,R)+"";if((0,b.A)(P))return I?I.call(P):"";var Z=P+"";return Z=="0"&&1/P==-s?"-0":Z}var C=R;function W(P){return P==null?"":C(P)}var J=W},"./node_modules/lodash-es/values.js":function(F,L,c){c.d(L,{A:function(){return T}});var _=c("./node_modules/lodash-es/_arrayMap.js");function S(I,R){return(0,_.A)(R,function(C){return I[C]})}var x=S,b=c("./node_modules/lodash-es/keys.js");function s(I){return I==null?[]:x(I,(0,b.A)(I))}var T=s},"./node_modules/mermaid/dist/chunks/mermaid.core/blockDiagram-JOT3LUYC.mjs":function(F,L,c){c.d(L,{diagram:function(){return Ms}});var _=c("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-VV3M67IP.mjs"),S=c("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-K557N5IZ.mjs"),x=c("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-C3MQ5ANM.mjs"),b=c("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-O4NI6UNU.mjs"),s=c("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs"),T=c("./node_modules/lodash-es/clone.js"),I=c("./node_modules/khroma/dist/methods/channel.js"),R=c("./node_modules/khroma/dist/methods/rgba.js"),C=c("./node_modules/d3/src/index.js"),W=c("./node_modules/dagre-d3-es/src/graphlib/index.js"),J=function(){var e=(0,s.K2)(function(gt,k,f,A){for(f=f||{},A=gt.length;A--;f[gt[A]]=k);return f},"o"),t=[1,7],n=[1,13],o=[1,14],i=[1,15],r=[1,19],a=[1,16],l=[1,17],d=[1,18],y=[8,30],u=[8,21,28,29,30,31,32,40,44,47],E=[1,23],j=[1,24],O=[8,15,16,21,28,29,30,31,32,40,44,47],B=[8,15,16,21,27,28,29,30,31,32,40,44,47],$=[1,49],U={trace:(0,s.K2)(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:(0,s.K2)(function(k,f,A,M,H,h,Pt){var m=h.length-1;switch(H){case 4:M.getLogger().debug("Rule: separator (NL) ");break;case 5:M.getLogger().debug("Rule: separator (Space) ");break;case 6:M.getLogger().debug("Rule: separator (EOF) ");break;case 7:M.getLogger().debug("Rule: hierarchy: ",h[m-1]),M.setHierarchy(h[m-1]);break;case 8:M.getLogger().debug("Stop NL ");break;case 9:M.getLogger().debug("Stop EOF ");break;case 10:M.getLogger().debug("Stop NL2 ");break;case 11:M.getLogger().debug("Stop EOF2 ");break;case 12:M.getLogger().debug("Rule: statement: ",h[m]),typeof h[m].length=="number"?this.$=h[m]:this.$=[h[m]];break;case 13:M.getLogger().debug("Rule: statement #2: ",h[m-1]),this.$=[h[m-1]].concat(h[m]);break;case 14:M.getLogger().debug("Rule: link: ",h[m],k),this.$={edgeTypeStr:h[m],label:""};break;case 15:M.getLogger().debug("Rule: LABEL link: ",h[m-3],h[m-1],h[m]),this.$={edgeTypeStr:h[m],label:h[m-1]};break;case 18:const St=parseInt(h[m]),ne=M.generateId();this.$={id:ne,type:"space",label:"",width:St,children:[]};break;case 23:M.getLogger().debug("Rule: (nodeStatement link node) ",h[m-2],h[m-1],h[m]," typestr: ",h[m-1].edgeTypeStr);const Xt=M.edgeStrToEdgeData(h[m-1].edgeTypeStr);this.$=[{id:h[m-2].id,label:h[m-2].label,type:h[m-2].type,directions:h[m-2].directions},{id:h[m-2].id+"-"+h[m].id,start:h[m-2].id,end:h[m].id,label:h[m-1].label,type:"edge",directions:h[m].directions,arrowTypeEnd:Xt,arrowTypeStart:"arrow_open"},{id:h[m].id,label:h[m].label,type:M.typeStr2Type(h[m].typeStr),directions:h[m].directions}];break;case 24:M.getLogger().debug("Rule: nodeStatement (abc88 node size) ",h[m-1],h[m]),this.$={id:h[m-1].id,label:h[m-1].label,type:M.typeStr2Type(h[m-1].typeStr),directions:h[m-1].directions,widthInColumns:parseInt(h[m],10)};break;case 25:M.getLogger().debug("Rule: nodeStatement (node) ",h[m]),this.$={id:h[m].id,label:h[m].label,type:M.typeStr2Type(h[m].typeStr),directions:h[m].directions,widthInColumns:1};break;case 26:M.getLogger().debug("APA123",this?this:"na"),M.getLogger().debug("COLUMNS: ",h[m]),this.$={type:"column-setting",columns:h[m]==="auto"?-1:parseInt(h[m])};break;case 27:M.getLogger().debug("Rule: id-block statement : ",h[m-2],h[m-1]);const ws=M.generateId();this.$={...h[m-2],type:"composite",children:h[m-1]};break;case 28:M.getLogger().debug("Rule: blockStatement : ",h[m-2],h[m-1],h[m]);const is=M.generateId();this.$={id:is,type:"composite",label:"",children:h[m-1]};break;case 29:M.getLogger().debug("Rule: node (NODE_ID separator): ",h[m]),this.$={id:h[m]};break;case 30:M.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",h[m-1],h[m]),this.$={id:h[m-1],label:h[m].label,typeStr:h[m].typeStr,directions:h[m].directions};break;case 31:M.getLogger().debug("Rule: dirList: ",h[m]),this.$=[h[m]];break;case 32:M.getLogger().debug("Rule: dirList: ",h[m-1],h[m]),this.$=[h[m-1]].concat(h[m]);break;case 33:M.getLogger().debug("Rule: nodeShapeNLabel: ",h[m-2],h[m-1],h[m]),this.$={typeStr:h[m-2]+h[m],label:h[m-1]};break;case 34:M.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",h[m-3],h[m-2]," #3:",h[m-1],h[m]),this.$={typeStr:h[m-3]+h[m],label:h[m-2],directions:h[m-1]};break;case 35:case 36:this.$={type:"classDef",id:h[m-1].trim(),css:h[m].trim()};break;case 37:this.$={type:"applyClass",id:h[m-1].trim(),styleClass:h[m].trim()};break;case 38:this.$={type:"applyStyles",id:h[m-1].trim(),stylesStr:h[m].trim()};break}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:n,29:o,31:i,32:r,40:a,44:l,47:d},{8:[1,20]},e(y,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:t,28:n,29:o,31:i,32:r,40:a,44:l,47:d}),e(u,[2,16],{14:22,15:E,16:j}),e(u,[2,17]),e(u,[2,18]),e(u,[2,19]),e(u,[2,20]),e(u,[2,21]),e(u,[2,22]),e(O,[2,25],{27:[1,25]}),e(u,[2,26]),{19:26,26:12,32:r},{11:27,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:n,29:o,31:i,32:r,40:a,44:l,47:d},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},e(B,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},e(y,[2,13]),{26:35,32:r},{32:[2,14]},{17:[1,36]},e(O,[2,24]),{11:37,13:4,14:22,15:E,16:j,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:n,29:o,31:i,32:r,40:a,44:l,47:d},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},e(B,[2,30]),{18:[1,43]},{18:[1,44]},e(O,[2,23]),{18:[1,45]},{30:[1,46]},e(u,[2,28]),e(u,[2,35]),e(u,[2,36]),e(u,[2,37]),e(u,[2,38]),{37:[1,47]},{34:48,35:$},{15:[1,50]},e(u,[2,27]),e(B,[2,33]),{39:[1,51]},{34:52,35:$,39:[2,31]},{32:[2,15]},e(B,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:(0,s.K2)(function(k,f){if(f.recoverable)this.trace(k);else{var A=new Error(k);throw A.hash=f,A}},"parseError"),parse:(0,s.K2)(function(k){var f=this,A=[0],M=[],H=[null],h=[],Pt=this.table,m="",St=0,ne=0,Xt=0,ws=2,is=1,Ks=h.slice.call(arguments,1),wt=Object.create(this.lexer),ce={yy:{}};for(var gs in this.yy)Object.prototype.hasOwnProperty.call(this.yy,gs)&&(ce.yy[gs]=this.yy[gs]);wt.setInput(k,ce.yy),ce.yy.lexer=wt,ce.yy.parser=this,typeof wt.yylloc>"u"&&(wt.yylloc={});var fs=wt.yylloc;h.push(fs);var Ps=wt.options&&wt.options.ranges;typeof ce.yy.parseError=="function"?this.parseError=ce.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Bs(Bt){A.length=A.length-2*Bt,H.length=H.length-Bt,h.length=h.length-Bt}(0,s.K2)(Bs,"popStack");function ks(){var Bt;return Bt=M.pop()||wt.lex()||is,typeof Bt!="number"&&(Bt instanceof Array&&(M=Bt,Bt=M.pop()),Bt=f.symbols_[Bt]||Bt),Bt}(0,s.K2)(ks,"lex");for(var Ct,_s,de,Ut,Ns,ps,Ie={},os,$t,Ds,ls;;){if(de=A[A.length-1],this.defaultActions[de]?Ut=this.defaultActions[de]:((Ct===null||typeof Ct>"u")&&(Ct=ks()),Ut=Pt[de]&&Pt[de][Ct]),typeof Ut>"u"||!Ut.length||!Ut[0]){var bs="";ls=[];for(os in Pt[de])this.terminals_[os]&&os>ws&&ls.push("'"+this.terminals_[os]+"'");wt.showPosition?bs="Parse error on line "+(St+1)+`:
`+wt.showPosition()+`
Expecting `+ls.join(", ")+", got '"+(this.terminals_[Ct]||Ct)+"'":bs="Parse error on line "+(St+1)+": Unexpected "+(Ct==is?"end of input":"'"+(this.terminals_[Ct]||Ct)+"'"),this.parseError(bs,{text:wt.match,token:this.terminals_[Ct]||Ct,line:wt.yylineno,loc:fs,expected:ls})}if(Ut[0]instanceof Array&&Ut.length>1)throw new Error("Parse Error: multiple actions possible at state: "+de+", token: "+Ct);switch(Ut[0]){case 1:A.push(Ct),H.push(wt.yytext),h.push(wt.yylloc),A.push(Ut[1]),Ct=null,_s?(Ct=_s,_s=null):(ne=wt.yyleng,m=wt.yytext,St=wt.yylineno,fs=wt.yylloc,Xt>0&&Xt--);break;case 2:if($t=this.productions_[Ut[1]][1],Ie.$=H[H.length-$t],Ie._$={first_line:h[h.length-($t||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-($t||1)].first_column,last_column:h[h.length-1].last_column},Ps&&(Ie._$.range=[h[h.length-($t||1)].range[0],h[h.length-1].range[1]]),ps=this.performAction.apply(Ie,[m,ne,St,ce.yy,Ut[1],H,h].concat(Ks)),typeof ps<"u")return ps;$t&&(A=A.slice(0,-1*$t*2),H=H.slice(0,-1*$t),h=h.slice(0,-1*$t)),A.push(this.productions_[Ut[1]][0]),H.push(Ie.$),h.push(Ie._$),Ds=Pt[A[A.length-2]][A[A.length-1]],A.push(Ds);break;case 3:return!0}}return!0},"parse")},mt=function(){var gt={EOF:1,parseError:(0,s.K2)(function(f,A){if(this.yy.parser)this.yy.parser.parseError(f,A);else throw new Error(f)},"parseError"),setInput:(0,s.K2)(function(k,f){return this.yy=f||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,s.K2)(function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var f=k.match(/(?:\r\n?|\n).*/g);return f?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},"input"),unput:(0,s.K2)(function(k){var f=k.length,A=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-f),this.offset-=f;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var H=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===M.length?this.yylloc.first_column:0)+M[M.length-A.length].length-A[0].length:this.yylloc.first_column-f},this.options.ranges&&(this.yylloc.range=[H[0],H[0]+this.yyleng-f]),this.yyleng=this.yytext.length,this},"unput"),more:(0,s.K2)(function(){return this._more=!0,this},"more"),reject:(0,s.K2)(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:(0,s.K2)(function(k){this.unput(this.match.slice(k))},"less"),pastInput:(0,s.K2)(function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,s.K2)(function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,s.K2)(function(){var k=this.pastInput(),f=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+f+"^"},"showPosition"),test_match:(0,s.K2)(function(k,f){var A,M,H;if(this.options.backtrack_lexer&&(H={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(H.yylloc.range=this.yylloc.range.slice(0))),M=k[0].match(/(?:\r\n?|\n).*/g),M&&(this.yylineno+=M.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:M?M[M.length-1].length-M[M.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],A=this.performAction.call(this,this.yy,this,f,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var h in H)this[h]=H[h];return!1}return!1},"test_match"),next:(0,s.K2)(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,f,A,M;this._more||(this.yytext="",this.match="");for(var H=this._currentRules(),h=0;h<H.length;h++)if(A=this._input.match(this.rules[H[h]]),A&&(!f||A[0].length>f[0].length)){if(f=A,M=h,this.options.backtrack_lexer){if(k=this.test_match(A,H[h]),k!==!1)return k;if(this._backtrack){f=!1;continue}else return!1}else if(!this.options.flex)break}return f?(k=this.test_match(f,H[M]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,s.K2)(function(){var f=this.next();return f||this.lex()},"lex"),begin:(0,s.K2)(function(f){this.conditionStack.push(f)},"begin"),popState:(0,s.K2)(function(){var f=this.conditionStack.length-1;return f>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,s.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,s.K2)(function(f){return f=this.conditionStack.length-1-Math.abs(f||0),f>=0?this.conditionStack[f]:"INITIAL"},"topState"),pushState:(0,s.K2)(function(f){this.begin(f)},"pushState"),stateStackSize:(0,s.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,s.K2)(function(f,A,M,H){var h=H;switch(M){case 0:return 10;case 1:return f.getLogger().debug("Found space-block"),31;break;case 2:return f.getLogger().debug("Found nl-block"),31;break;case 3:return f.getLogger().debug("Found space-block"),29;break;case 4:f.getLogger().debug(".",A.yytext);break;case 5:f.getLogger().debug("_",A.yytext);break;case 6:return 5;case 7:return A.yytext=-1,28;break;case 8:return A.yytext=A.yytext.replace(/columns\s+/,""),f.getLogger().debug("COLUMNS (LEX)",A.yytext),28;break;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:f.getLogger().debug("LEX: POPPING STR:",A.yytext),this.popState();break;case 14:return f.getLogger().debug("LEX: STR end:",A.yytext),"STR";break;case 15:return A.yytext=A.yytext.replace(/space\:/,""),f.getLogger().debug("SPACE NUM (LEX)",A.yytext),21;break;case 16:return A.yytext="1",f.getLogger().debug("COLUMNS (LEX)",A.yytext),21;break;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;break;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";break;case 22:return this.popState(),this.pushState("CLASSDEFID"),41;break;case 23:return this.popState(),42;break;case 24:return this.pushState("CLASS"),44;break;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;break;case 26:return this.popState(),46;break;case 27:return this.pushState("STYLE_STMNT"),47;break;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;break;case 29:return this.popState(),49;break;case 30:return this.pushState("acc_title"),"acc_title";break;case 31:return this.popState(),"acc_title_value";break;case 32:return this.pushState("acc_descr"),"acc_descr";break;case 33:return this.popState(),"acc_descr_value";break;case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),f.getLogger().debug("Lex: (("),"NODE_DEND";break;case 39:return this.popState(),f.getLogger().debug("Lex: (("),"NODE_DEND";break;case 40:return this.popState(),f.getLogger().debug("Lex: ))"),"NODE_DEND";break;case 41:return this.popState(),f.getLogger().debug("Lex: (("),"NODE_DEND";break;case 42:return this.popState(),f.getLogger().debug("Lex: (("),"NODE_DEND";break;case 43:return this.popState(),f.getLogger().debug("Lex: (-"),"NODE_DEND";break;case 44:return this.popState(),f.getLogger().debug("Lex: -)"),"NODE_DEND";break;case 45:return this.popState(),f.getLogger().debug("Lex: (("),"NODE_DEND";break;case 46:return this.popState(),f.getLogger().debug("Lex: ]]"),"NODE_DEND";break;case 47:return this.popState(),f.getLogger().debug("Lex: ("),"NODE_DEND";break;case 48:return this.popState(),f.getLogger().debug("Lex: ])"),"NODE_DEND";break;case 49:return this.popState(),f.getLogger().debug("Lex: /]"),"NODE_DEND";break;case 50:return this.popState(),f.getLogger().debug("Lex: /]"),"NODE_DEND";break;case 51:return this.popState(),f.getLogger().debug("Lex: )]"),"NODE_DEND";break;case 52:return this.popState(),f.getLogger().debug("Lex: )"),"NODE_DEND";break;case 53:return this.popState(),f.getLogger().debug("Lex: ]>"),"NODE_DEND";break;case 54:return this.popState(),f.getLogger().debug("Lex: ]"),"NODE_DEND";break;case 55:return f.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;break;case 56:return f.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;break;case 57:return f.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;break;case 58:return f.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;break;case 59:return f.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;break;case 60:return f.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;break;case 61:return f.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;break;case 62:return f.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;break;case 63:return f.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;break;case 64:return f.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;break;case 65:return f.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;break;case 66:return this.pushState("NODE"),36;break;case 67:return this.pushState("NODE"),36;break;case 68:return this.pushState("NODE"),36;break;case 69:return this.pushState("NODE"),36;break;case 70:return this.pushState("NODE"),36;break;case 71:return this.pushState("NODE"),36;break;case 72:return this.pushState("NODE"),36;break;case 73:return f.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;break;case 74:return this.pushState("BLOCK_ARROW"),f.getLogger().debug("LEX ARR START"),38;break;case 75:return f.getLogger().debug("Lex: NODE_ID",A.yytext),32;break;case 76:return f.getLogger().debug("Lex: EOF",A.yytext),8;break;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:f.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:f.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return f.getLogger().debug("LEX: NODE_DESCR:",A.yytext),"NODE_DESCR";break;case 84:f.getLogger().debug("LEX POPPING"),this.popState();break;case 85:f.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return A.yytext=A.yytext.replace(/^,\s*/,""),f.getLogger().debug("Lex (right): dir:",A.yytext),"DIR";break;case 87:return A.yytext=A.yytext.replace(/^,\s*/,""),f.getLogger().debug("Lex (left):",A.yytext),"DIR";break;case 88:return A.yytext=A.yytext.replace(/^,\s*/,""),f.getLogger().debug("Lex (x):",A.yytext),"DIR";break;case 89:return A.yytext=A.yytext.replace(/^,\s*/,""),f.getLogger().debug("Lex (y):",A.yytext),"DIR";break;case 90:return A.yytext=A.yytext.replace(/^,\s*/,""),f.getLogger().debug("Lex (up):",A.yytext),"DIR";break;case 91:return A.yytext=A.yytext.replace(/^,\s*/,""),f.getLogger().debug("Lex (down):",A.yytext),"DIR";break;case 92:return A.yytext="]>",f.getLogger().debug("Lex (ARROW_DIR end):",A.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";break;case 93:return f.getLogger().debug("Lex: LINK","#"+A.yytext+"#"),15;break;case 94:return f.getLogger().debug("Lex: LINK",A.yytext),15;break;case 95:return f.getLogger().debug("Lex: LINK",A.yytext),15;break;case 96:return f.getLogger().debug("Lex: LINK",A.yytext),15;break;case 97:return f.getLogger().debug("Lex: START_LINK",A.yytext),this.pushState("LLABEL"),16;break;case 98:return f.getLogger().debug("Lex: START_LINK",A.yytext),this.pushState("LLABEL"),16;break;case 99:return f.getLogger().debug("Lex: START_LINK",A.yytext),this.pushState("LLABEL"),16;break;case 100:this.pushState("md_string");break;case 101:return f.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";break;case 102:return this.popState(),f.getLogger().debug("Lex: LINK","#"+A.yytext+"#"),15;break;case 103:return this.popState(),f.getLogger().debug("Lex: LINK",A.yytext),15;break;case 104:return this.popState(),f.getLogger().debug("Lex: LINK",A.yytext),15;break;case 105:return f.getLogger().debug("Lex: COLON",A.yytext),A.yytext=A.yytext.slice(1),27;break}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return gt}();U.lexer=mt;function st(){this.yy={}}return(0,s.K2)(st,"Parser"),st.prototype=U,U.Parser=st,new st}();J.parser=J;var P=J,Z=new Map,N=[],tt=new Map,pt="color",ot="fill",Rt="bgFill",jt=",",Nt=(0,s.D7)(),xt=new Map,vt=(0,s.K2)(e=>s.Y2.sanitizeText(e,Nt),"sanitizeText"),Wt=(0,s.K2)(function(e,t=""){let n=xt.get(e);n||(n={id:e,styles:[],textStyles:[]},xt.set(e,n)),t?.split(jt).forEach(o=>{const i=o.replace(/([^;]*);/,"$1").trim();if(RegExp(pt).exec(o)){const a=i.replace(ot,Rt).replace(pt,ot);n.textStyles.push(a)}n.styles.push(i)})},"addStyleClass"),kt=(0,s.K2)(function(e,t=""){const n=Z.get(e);t!=null&&(n.styles=t.split(jt))},"addStyle2Node"),lt=(0,s.K2)(function(e,t){e.split(",").forEach(function(n){let o=Z.get(n);if(o===void 0){const i=n.trim();o={id:i,type:"na",children:[]},Z.set(i,o)}o.classes||(o.classes=[]),o.classes.push(t)})},"setCssClass"),g=(0,s.K2)((e,t)=>{const n=e.flat(),o=[];for(const i of n){if(i.label&&(i.label=vt(i.label)),i.type==="classDef"){Wt(i.id,i.css);continue}if(i.type==="applyClass"){lt(i.id,i?.styleClass??"");continue}if(i.type==="applyStyles"){i?.stylesStr&&kt(i.id,i?.stylesStr);continue}if(i.type==="column-setting")t.columns=i.columns??-1;else if(i.type==="edge"){const r=(tt.get(i.id)??0)+1;tt.set(i.id,r),i.id=r+"-"+i.id,N.push(i)}else{i.label||(i.type==="composite"?i.label="":i.label=i.id);const r=Z.get(i.id);if(r===void 0?Z.set(i.id,i):(i.type!=="na"&&(r.type=i.type),i.label!==i.id&&(r.label=i.label)),i.children&&g(i.children,i),i.type==="space"){const a=i.width??1;for(let l=0;l<a;l++){const d=(0,T.A)(i);d.id=d.id+"-"+l,Z.set(d.id,d),o.push(d)}}else r===void 0&&o.push(i)}}t.children=o},"populateBlockDatabase"),v=[],K={id:"root",type:"composite",children:[],columns:-1},z=(0,s.K2)(()=>{s.Rm.debug("Clear called"),(0,s.IU)(),K={id:"root",type:"composite",children:[],columns:-1},Z=new Map([["root",K]]),v=[],xt=new Map,N=[],tt=new Map},"clear");function Q(e){switch(s.Rm.debug("typeStr2Type",e),e){case"[]":return"square";case"()":return s.Rm.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}(0,s.K2)(Q,"typeStr2Type");function q(e){switch(s.Rm.debug("typeStr2Type",e),e){case"==":return"thick";default:return"normal"}}(0,s.K2)(q,"edgeTypeStr2Type");function at(e){switch(e.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}(0,s.K2)(at,"edgeStrToEdgeData");var Mt=0,he=(0,s.K2)(()=>(Mt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Mt),"generateId"),je=(0,s.K2)(e=>{K.children=e,g(e,K),v=K.children},"setHierarchy"),Ce=(0,s.K2)(e=>{const t=Z.get(e);return t?t.columns?t.columns:t.children?t.children.length:-1:-1},"getColumns"),Re=(0,s.K2)(()=>[...Z.values()],"getBlocksFlat"),ue=(0,s.K2)(()=>v||[],"getBlocks"),ie=(0,s.K2)(()=>N,"getEdges"),ge=(0,s.K2)(e=>Z.get(e),"getBlock"),Me=(0,s.K2)(e=>{Z.set(e.id,e)},"setBlock"),Ke=(0,s.K2)(()=>console,"getLogger"),fe=(0,s.K2)(function(){return xt},"getClasses"),_e={getConfig:(0,s.K2)(()=>(0,s.zj)().block,"getConfig"),typeStr2Type:Q,edgeTypeStr2Type:q,edgeStrToEdgeData:at,getLogger:Ke,getBlocksFlat:Re,getBlocks:ue,getEdges:ie,setHierarchy:je,getBlock:ge,setBlock:Me,getColumns:Ce,getClasses:fe,clear:z,generateId:he},qt=_e,te=(0,s.K2)((e,t)=>{const n=I.A,o=n(e,"r"),i=n(e,"g"),r=n(e,"b");return R.A(o,i,r,t)},"fade"),pe=(0,s.K2)(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }



  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${te(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${te(e.mainBkg,.5)};
    fill: ${te(e.clusterBkg,.5)};
    stroke: ${te(e.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),Pe=pe,Be=(0,s.K2)((e,t,n,o)=>{t.forEach(i=>{xe[i](e,n,o)})},"insertMarkers"),be=(0,s.K2)((e,t,n)=>{s.Rm.trace("Making markers for ",n),e.append("defs").append("marker").attr("id",n+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),ye=(0,s.K2)((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),me=(0,s.K2)((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Ne=(0,s.K2)((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),Ue=(0,s.K2)((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),ze=(0,s.K2)((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),Fe=(0,s.K2)((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),We=(0,s.K2)((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),Ye=(0,s.K2)((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),xe={extension:be,composition:ye,aggregation:me,dependency:Ne,lollipop:Ue,point:ze,circle:Fe,cross:We,barb:Ye},He=Be,ht=(0,s.D7)()?.block?.padding??8;function oe(e,t){if(e===0||!Number.isInteger(e))throw new Error("Columns must be an integer !== 0.");if(t<0||!Number.isInteger(t))throw new Error("Position must be a non-negative integer."+t);if(e<0)return{px:t,py:0};if(e===1)return{px:0,py:t};const n=t%e,o=Math.floor(t/e);return{px:n,py:o}}(0,s.K2)(oe,"calculateBlockPosition");var Ge=(0,s.K2)(e=>{let t=0,n=0;for(const o of e.children){const{width:i,height:r,x:a,y:l}=o.size??{width:0,height:0,x:0,y:0};s.Rm.debug("getMaxChildSize abc95 child:",o.id,"width:",i,"height:",r,"x:",a,"y:",l,o.type),o.type!=="space"&&(i>t&&(t=i/(e.widthInColumns??1)),r>n&&(n=r))}return{width:t,height:n}},"getMaxChildSize");function Zt(e,t,n=0,o=0){s.Rm.debug("setBlockSizes abc95 (start)",e.id,e?.size?.x,"block width =",e?.size,"sieblingWidth",n),e?.size?.width||(e.size={width:n,height:o,x:0,y:0});let i=0,r=0;if(e.children?.length>0){for(const O of e.children)Zt(O,t);const a=Ge(e);i=a.width,r=a.height,s.Rm.debug("setBlockSizes abc95 maxWidth of",e.id,":s children is ",i,r);for(const O of e.children)O.size&&(s.Rm.debug(`abc95 Setting size of children of ${e.id} id=${O.id} ${i} ${r} ${JSON.stringify(O.size)}`),O.size.width=i*(O.widthInColumns??1)+ht*((O.widthInColumns??1)-1),O.size.height=r,O.size.x=0,O.size.y=0,s.Rm.debug(`abc95 updating size of ${e.id} children child:${O.id} maxWidth:${i} maxHeight:${r}`));for(const O of e.children)Zt(O,t,i,r);const l=e.columns??-1;let d=0;for(const O of e.children)d+=O.widthInColumns??1;let y=e.children.length;l>0&&l<d&&(y=l);const u=Math.ceil(d/y);let E=y*(i+ht)+ht,j=u*(r+ht)+ht;if(E<n){s.Rm.debug(`Detected to small siebling: abc95 ${e.id} sieblingWidth ${n} sieblingHeight ${o} width ${E}`),E=n,j=o;const O=(n-y*ht-ht)/y,B=(o-u*ht-ht)/u;s.Rm.debug("Size indata abc88",e.id,"childWidth",O,"maxWidth",i),s.Rm.debug("Size indata abc88",e.id,"childHeight",B,"maxHeight",r),s.Rm.debug("Size indata abc88 xSize",y,"padding",ht);for(const $ of e.children)$.size&&($.size.width=O,$.size.height=B,$.size.x=0,$.size.y=0)}if(s.Rm.debug(`abc95 (finale calc) ${e.id} xSize ${y} ySize ${u} columns ${l}${e.children.length} width=${Math.max(E,e.size?.width||0)}`),E<(e?.size?.width||0)){E=e?.size?.width||0;const O=l>0?Math.min(e.children.length,l):e.children.length;if(O>0){const B=(E-O*ht-ht)/O;s.Rm.debug("abc95 (growing to fit) width",e.id,E,e.size?.width,B);for(const $ of e.children)$.size&&($.size.width=B)}}e.size={width:E,height:j,x:0,y:0}}s.Rm.debug("setBlockSizes abc94 (done)",e.id,e?.size?.x,e?.size?.width,e?.size?.y,e?.size?.height)}(0,s.K2)(Zt,"setBlockSizes");function le(e,t){s.Rm.debug(`abc85 layout blocks (=>layoutBlocks) ${e.id} x: ${e?.size?.x} y: ${e?.size?.y} width: ${e?.size?.width}`);const n=e.columns??-1;if(s.Rm.debug("layoutBlocks columns abc95",e.id,"=>",n,e),e.children&&e.children.length>0){const o=e?.children[0]?.size?.width??0,i=e.children.length*o+(e.children.length-1)*ht;s.Rm.debug("widthOfChildren 88",i,"posX");let r=0;s.Rm.debug("abc91 block?.size?.x",e.id,e?.size?.x);let a=e?.size?.x?e?.size?.x+(-e?.size?.width/2||0):-ht,l=0;for(const d of e.children){const y=e;if(!d.size)continue;const{width:u,height:E}=d.size,{px:j,py:O}=oe(n,r);if(O!=l&&(l=O,a=e?.size?.x?e?.size?.x+(-e?.size?.width/2||0):-ht,s.Rm.debug("New row in layout for block",e.id," and child ",d.id,l)),s.Rm.debug(`abc89 layout blocks (child) id: ${d.id} Pos: ${r} (px, py) ${j},${O} (${y?.size?.x},${y?.size?.y}) parent: ${y.id} width: ${u}${ht}`),y.size){const B=u/2;d.size.x=a+ht+B,s.Rm.debug(`abc91 layout blocks (calc) px, pyid:${d.id} startingPos=X${a} new startingPosX${d.size.x} ${B} padding=${ht} width=${u} halfWidth=${B} => x:${d.size.x} y:${d.size.y} ${d.widthInColumns} (width * (child?.w || 1)) / 2 ${u*(d?.widthInColumns??1)/2}`),a=d.size.x+B,d.size.y=y.size.y-y.size.height/2+O*(E+ht)+E/2+ht,s.Rm.debug(`abc88 layout blocks (calc) px, pyid:${d.id}startingPosX${a}${ht}${B}=>x:${d.size.x}y:${d.size.y}${d.widthInColumns}(width * (child?.w || 1)) / 2${u*(d?.widthInColumns??1)/2}`)}d.children&&le(d,t),r+=d?.widthInColumns??1,s.Rm.debug("abc88 columnsPos",d,r)}}s.Rm.debug(`layout blocks (<==layoutBlocks) ${e.id} x: ${e?.size?.x} y: ${e?.size?.y} width: ${e?.size?.width}`)}(0,s.K2)(le,"layoutBlocks");function ee(e,{minX:t,minY:n,maxX:o,maxY:i}={minX:0,minY:0,maxX:0,maxY:0}){if(e.size&&e.id!=="root"){const{x:r,y:a,width:l,height:d}=e.size;r-l/2<t&&(t=r-l/2),a-d/2<n&&(n=a-d/2),r+l/2>o&&(o=r+l/2),a+d/2>i&&(i=a+d/2)}if(e.children)for(const r of e.children)({minX:t,minY:n,maxX:o,maxY:i}=ee(r,{minX:t,minY:n,maxX:o,maxY:i}));return{minX:t,minY:n,maxX:o,maxY:i}}(0,s.K2)(ee,"findBounds");function Yt(e){const t=e.getBlock("root");if(!t)return;Zt(t,e,0,0),le(t,e),s.Rm.debug("getBlocks",JSON.stringify(t,null,2));const{minX:n,minY:o,maxX:i,maxY:r}=ee(t),a=r-o,l=i-n;return{x:n,y:o,width:l,height:a}}(0,s.K2)(Yt,"layout");function se(e,t){t&&e.attr("style",t)}(0,s.K2)(se,"applyStyle");function ve(e){const t=(0,C.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=t.append("xhtml:div"),o=e.label,i=e.isNode?"nodeLabel":"edgeLabel",r=n.append("span");return r.html(o),se(r,e.labelStyle),r.attr("class",i),se(n,e.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}(0,s.K2)(ve,"addHtmlLabel");var Xe=(0,s.K2)((e,t,n,o)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),(0,s._3)((0,s.D7)().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),s.Rm.debug("vertexText"+i);const r={isNode:o,label:(0,x.hE)((0,b.Sm)(i)),labelStyle:t.replace("fill:","color:")};return ve(r)}else{const r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("style",t.replace("color:","fill:"));let a=[];typeof i=="string"?a=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?a=i:a=[];for(const l of a){const d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","0"),n?d.setAttribute("class","title-row"):d.setAttribute("class","row"),d.textContent=l.trim(),r.appendChild(d)}return r}},"createLabel"),Dt=Xe,Ae=(0,s.K2)((e,t,n,o,i)=>{t.arrowTypeStart&&Le(e,"start",t.arrowTypeStart,n,o,i),t.arrowTypeEnd&&Le(e,"end",t.arrowTypeEnd,n,o,i)},"addEdgeMarkers"),Ze={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},Le=(0,s.K2)((e,t,n,o,i,r)=>{const a=Ze[n];if(!a){s.Rm.warn(`Unknown arrow type: ${n}`);return}const l=t==="start"?"Start":"End";e.attr(`marker-${t}`,`url(${o}#${i}_${r}-${a}${l})`)},"addEdgeMarker"),re={},At={},Ve=(0,s.K2)((e,t)=>{const n=(0,s.D7)(),o=(0,s._3)(n.flowchart.htmlLabels),i=t.labelType==="markdown"?(0,x.GZ)(e,t.label,{style:t.labelStyle,useHtmlLabels:o,addSvgBackground:!0},n):Dt(t.label,t.labelStyle),r=e.insert("g").attr("class","edgeLabel"),a=r.insert("g").attr("class","label");a.node().appendChild(i);let l=i.getBBox();if(o){const y=i.children[0],u=(0,C.Ltv)(i);l=y.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}a.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),re[t.id]=r,t.width=l.width,t.height=l.height;let d;if(t.startLabelLeft){const y=Dt(t.startLabelLeft,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),E=u.insert("g").attr("class","inner");d=E.node().appendChild(y);const j=y.getBBox();E.attr("transform","translate("+-j.width/2+", "+-j.height/2+")"),At[t.id]||(At[t.id]={}),At[t.id].startLeft=u,Vt(d,t.startLabelLeft)}if(t.startLabelRight){const y=Dt(t.startLabelRight,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),E=u.insert("g").attr("class","inner");d=u.node().appendChild(y),E.node().appendChild(y);const j=y.getBBox();E.attr("transform","translate("+-j.width/2+", "+-j.height/2+")"),At[t.id]||(At[t.id]={}),At[t.id].startRight=u,Vt(d,t.startLabelRight)}if(t.endLabelLeft){const y=Dt(t.endLabelLeft,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),E=u.insert("g").attr("class","inner");d=E.node().appendChild(y);const j=y.getBBox();E.attr("transform","translate("+-j.width/2+", "+-j.height/2+")"),u.node().appendChild(y),At[t.id]||(At[t.id]={}),At[t.id].endLeft=u,Vt(d,t.endLabelLeft)}if(t.endLabelRight){const y=Dt(t.endLabelRight,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),E=u.insert("g").attr("class","inner");d=E.node().appendChild(y);const j=y.getBBox();E.attr("transform","translate("+-j.width/2+", "+-j.height/2+")"),u.node().appendChild(y),At[t.id]||(At[t.id]={}),At[t.id].endRight=u,Vt(d,t.endLabelRight)}return i},"insertEdgeLabel");function Vt(e,t){(0,s.D7)().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}(0,s.K2)(Vt,"setTerminalWidth");var Je=(0,s.K2)((e,t)=>{s.Rm.debug("Moving label abc88 ",e.id,e.label,re[e.id],t);let n=t.updatedPath?t.updatedPath:t.originalPath;const o=(0,s.D7)(),{subGraphTitleTotalMargin:i}=(0,S.O)(o);if(e.label){const r=re[e.id];let a=e.x,l=e.y;if(n){const d=b._K.calcLabelPosition(n);s.Rm.debug("Moving label "+e.label+" from (",a,",",l,") to (",d.x,",",d.y,") abc88"),t.updatedPath&&(a=d.x,l=d.y)}r.attr("transform",`translate(${a}, ${l+i/2})`)}if(e.startLabelLeft){const r=At[e.id].startLeft;let a=e.x,l=e.y;if(n){const d=b._K.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",n);a=d.x,l=d.y}r.attr("transform",`translate(${a}, ${l})`)}if(e.startLabelRight){const r=At[e.id].startRight;let a=e.x,l=e.y;if(n){const d=b._K.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",n);a=d.x,l=d.y}r.attr("transform",`translate(${a}, ${l})`)}if(e.endLabelLeft){const r=At[e.id].endLeft;let a=e.x,l=e.y;if(n){const d=b._K.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",n);a=d.x,l=d.y}r.attr("transform",`translate(${a}, ${l})`)}if(e.endLabelRight){const r=At[e.id].endRight;let a=e.x,l=e.y;if(n){const d=b._K.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",n);a=d.x,l=d.y}r.attr("transform",`translate(${a}, ${l})`)}},"positionEdgeLabel"),Qe=(0,s.K2)((e,t)=>{const n=e.x,o=e.y,i=Math.abs(t.x-n),r=Math.abs(t.y-o),a=e.width/2,l=e.height/2;return i>=a||r>=l},"outsideNode"),Ee=(0,s.K2)((e,t,n)=>{s.Rm.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const o=e.x,i=e.y,r=Math.abs(o-n.x),a=e.width/2;let l=n.x<t.x?a-r:a+r;const d=e.height/2,y=Math.abs(t.y-n.y),u=Math.abs(t.x-n.x);if(Math.abs(i-t.y)*a>Math.abs(o-t.x)*d){let E=n.y<t.y?t.y-d-i:i-d-t.y;l=u*E/y;const j={x:n.x<t.x?n.x+l:n.x-u+l,y:n.y<t.y?n.y+y-E:n.y-y+E};return l===0&&(j.x=t.x,j.y=t.y),u===0&&(j.x=t.x),y===0&&(j.y=t.y),s.Rm.debug(`abc89 topp/bott calc, Q ${y}, q ${E}, R ${u}, r ${l}`,j),j}else{n.x<t.x?l=t.x-a-o:l=o-a-t.x;let E=y*l/u,j=n.x<t.x?n.x+u-l:n.x-u+l,O=n.y<t.y?n.y+E:n.y-E;return s.Rm.debug(`sides calc abc89, Q ${y}, q ${E}, R ${u}, r ${l}`,{_x:j,_y:O}),l===0&&(j=t.x,O=t.y),u===0&&(j=t.x),y===0&&(O=t.y),{x:j,y:O}}},"intersection"),Se=(0,s.K2)((e,t)=>{s.Rm.debug("abc88 cutPathAtIntersect",e,t);let n=[],o=e[0],i=!1;return e.forEach(r=>{if(!Qe(t,r)&&!i){const a=Ee(t,o,r);let l=!1;n.forEach(d=>{l=l||d.x===a.x&&d.y===a.y}),n.some(d=>d.x===a.x&&d.y===a.y)||n.push(a),i=!0}else o=r,i||n.push(r)}),n},"cutPathAtIntersect"),$e=(0,s.K2)(function(e,t,n,o,i,r,a){let l=n.points;s.Rm.debug("abc88 InsertEdge: edge=",n,"e=",t);let d=!1;const y=r.node(t.v);var u=r.node(t.w);u?.intersect&&y?.intersect&&(l=l.slice(1,n.points.length-1),l.unshift(y.intersect(l[0])),l.push(u.intersect(l[l.length-1]))),n.toCluster&&(s.Rm.debug("to cluster abc88",o[n.toCluster]),l=Se(n.points,o[n.toCluster].node),d=!0),n.fromCluster&&(s.Rm.debug("from cluster abc88",o[n.fromCluster]),l=Se(l.reverse(),o[n.fromCluster].node).reverse(),d=!0);const E=l.filter(k=>!Number.isNaN(k.y));let j=C.qrM;n.curve&&(i==="graph"||i==="flowchart")&&(j=n.curve);const{x:O,y:B}=(0,_.R)(n),$=(0,C.n8j)().x(O).y(B).curve(j);let U;switch(n.thickness){case"normal":U="edge-thickness-normal";break;case"thick":U="edge-thickness-thick";break;case"invisible":U="edge-thickness-thick";break;default:U=""}switch(n.pattern){case"solid":U+=" edge-pattern-solid";break;case"dotted":U+=" edge-pattern-dotted";break;case"dashed":U+=" edge-pattern-dashed";break}const mt=e.append("path").attr("d",$(E)).attr("id",n.id).attr("class"," "+U+(n.classes?" "+n.classes:"")).attr("style",n.style);let st="";((0,s.D7)().flowchart.arrowMarkerAbsolute||(0,s.D7)().state.arrowMarkerAbsolute)&&(st=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,st=st.replace(/\(/g,"\\("),st=st.replace(/\)/g,"\\)")),Ae(mt,n,st,a,i);let gt={};return d&&(gt.updatedPath=l),gt.originalPath=n.points,gt},"insertEdge"),qe=(0,s.K2)(e=>{const t=new Set;for(const n of e)switch(n){case"x":t.add("right"),t.add("left");break;case"y":t.add("up"),t.add("down");break;default:t.add(n);break}return t},"expandAndDeduplicateDirections"),p=(0,s.K2)((e,t,n)=>{const o=qe(e),i=2,r=t.height+2*n.padding,a=r/i,l=t.width+2*a+n.padding,d=n.padding/2;return o.has("right")&&o.has("left")&&o.has("up")&&o.has("down")?[{x:0,y:0},{x:a,y:0},{x:l/2,y:2*d},{x:l-a,y:0},{x:l,y:0},{x:l,y:-r/3},{x:l+2*d,y:-r/2},{x:l,y:-2*r/3},{x:l,y:-r},{x:l-a,y:-r},{x:l/2,y:-r-2*d},{x:a,y:-r},{x:0,y:-r},{x:0,y:-2*r/3},{x:-2*d,y:-r/2},{x:0,y:-r/3}]:o.has("right")&&o.has("left")&&o.has("up")?[{x:a,y:0},{x:l-a,y:0},{x:l,y:-r/2},{x:l-a,y:-r},{x:a,y:-r},{x:0,y:-r/2}]:o.has("right")&&o.has("left")&&o.has("down")?[{x:0,y:0},{x:a,y:-r},{x:l-a,y:-r},{x:l,y:0}]:o.has("right")&&o.has("up")&&o.has("down")?[{x:0,y:0},{x:l,y:-a},{x:l,y:-r+a},{x:0,y:-r}]:o.has("left")&&o.has("up")&&o.has("down")?[{x:l,y:0},{x:0,y:-a},{x:0,y:-r+a},{x:l,y:-r}]:o.has("right")&&o.has("left")?[{x:a,y:0},{x:a,y:-d},{x:l-a,y:-d},{x:l-a,y:0},{x:l,y:-r/2},{x:l-a,y:-r},{x:l-a,y:-r+d},{x:a,y:-r+d},{x:a,y:-r},{x:0,y:-r/2}]:o.has("up")&&o.has("down")?[{x:l/2,y:0},{x:0,y:-d},{x:a,y:-d},{x:a,y:-r+d},{x:0,y:-r+d},{x:l/2,y:-r},{x:l,y:-r+d},{x:l-a,y:-r+d},{x:l-a,y:-d},{x:l,y:-d}]:o.has("right")&&o.has("up")?[{x:0,y:0},{x:l,y:-a},{x:0,y:-r}]:o.has("right")&&o.has("down")?[{x:0,y:0},{x:l,y:0},{x:0,y:-r}]:o.has("left")&&o.has("up")?[{x:l,y:0},{x:0,y:-a},{x:l,y:-r}]:o.has("left")&&o.has("down")?[{x:l,y:0},{x:0,y:0},{x:l,y:-r}]:o.has("right")?[{x:a,y:-d},{x:a,y:-d},{x:l-a,y:-d},{x:l-a,y:0},{x:l,y:-r/2},{x:l-a,y:-r},{x:l-a,y:-r+d},{x:a,y:-r+d},{x:a,y:-r+d}]:o.has("left")?[{x:a,y:0},{x:a,y:-d},{x:l-a,y:-d},{x:l-a,y:-r+d},{x:a,y:-r+d},{x:a,y:-r},{x:0,y:-r/2}]:o.has("up")?[{x:a,y:-d},{x:a,y:-r+d},{x:0,y:-r+d},{x:l/2,y:-r},{x:l,y:-r+d},{x:l-a,y:-r+d},{x:l-a,y:-d}]:o.has("down")?[{x:l/2,y:0},{x:0,y:-d},{x:a,y:-d},{x:a,y:-r+d},{x:l-a,y:-r+d},{x:l-a,y:-d},{x:l,y:-d}]:[{x:0,y:0}]},"getArrowPoints");function w(e,t){return e.intersect(t)}(0,s.K2)(w,"intersectNode");var Y=w;function G(e,t,n,o){var i=e.x,r=e.y,a=i-o.x,l=r-o.y,d=Math.sqrt(t*t*l*l+n*n*a*a),y=Math.abs(t*n*a/d);o.x<i&&(y=-y);var u=Math.abs(t*n*l/d);return o.y<r&&(u=-u),{x:i+y,y:r+u}}(0,s.K2)(G,"intersectEllipse");var nt=G;function X(e,t,n){return nt(e,t,t,n)}(0,s.K2)(X,"intersectCircle");var _t=X;function ct(e,t,n,o){var i,r,a,l,d,y,u,E,j,O,B,$,U,mt,st;if(i=t.y-e.y,a=e.x-t.x,d=t.x*e.y-e.x*t.y,j=i*n.x+a*n.y+d,O=i*o.x+a*o.y+d,!(j!==0&&O!==0&&ut(j,O))&&(r=o.y-n.y,l=n.x-o.x,y=o.x*n.y-n.x*o.y,u=r*e.x+l*e.y+y,E=r*t.x+l*t.y+y,!(u!==0&&E!==0&&ut(u,E))&&(B=i*l-r*a,B!==0)))return $=Math.abs(B/2),U=a*y-l*d,mt=U<0?(U-$)/B:(U+$)/B,U=r*d-i*y,st=U<0?(U-$)/B:(U+$)/B,{x:mt,y:st}}(0,s.K2)(ct,"intersectLine");function ut(e,t){return e*t>0}(0,s.K2)(ut,"sameSign");var bt=ct,Ot=Lt;function Lt(e,t,n){var o=e.x,i=e.y,r=[],a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(B){a=Math.min(a,B.x),l=Math.min(l,B.y)}):(a=Math.min(a,t.x),l=Math.min(l,t.y));for(var d=o-e.width/2-a,y=i-e.height/2-l,u=0;u<t.length;u++){var E=t[u],j=t[u<t.length-1?u+1:0],O=bt(e,n,{x:d+E.x,y:y+E.y},{x:d+j.x,y:y+j.y});O&&r.push(O)}return r.length?(r.length>1&&r.sort(function(B,$){var U=B.x-n.x,mt=B.y-n.y,st=Math.sqrt(U*U+mt*mt),gt=$.x-n.x,k=$.y-n.y,f=Math.sqrt(gt*gt+k*k);return st<f?-1:st===f?0:1}),r[0]):e}(0,s.K2)(Lt,"intersectPolygon");var ft=(0,s.K2)((e,t)=>{var n=e.x,o=e.y,i=t.x-n,r=t.y-o,a=e.width/2,l=e.height/2,d,y;return Math.abs(r)*a>Math.abs(i)*l?(r<0&&(l=-l),d=r===0?0:l*i/r,y=l):(i<0&&(a=-a),d=a,y=i===0?0:a*r/i),{x:n+d,y:o+y}},"intersectRect"),Kt=ft,V={node:Y,circle:_t,ellipse:nt,polygon:Ot,rect:Kt},rt=(0,s.K2)(async(e,t,n,o)=>{const i=(0,s.D7)();let r;const a=t.useHtmlLabels||(0,s._3)(i.flowchart.htmlLabels);n?r=n:r="node default";const l=e.insert("g").attr("class",r).attr("id",t.domId||t.id),d=l.insert("g").attr("class","label").attr("style",t.labelStyle);let y;t.labelText===void 0?y="":y=typeof t.labelText=="string"?t.labelText:t.labelText[0];const u=d.node();let E;t.labelType==="markdown"?E=(0,x.GZ)(d,(0,s.jZ)((0,b.Sm)(y),i),{useHtmlLabels:a,width:t.width||i.flowchart.wrappingWidth,classes:"markdown-node-label"},i):E=u.appendChild(Dt((0,s.jZ)((0,b.Sm)(y),i),t.labelStyle,!1,o));let j=E.getBBox();const O=t.padding/2;if((0,s._3)(i.flowchart.htmlLabels)){const B=E.children[0],$=(0,C.Ltv)(E),U=B.getElementsByTagName("img");if(U){const mt=y.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...U].map(st=>new Promise(gt=>{function k(){if(st.style.display="flex",st.style.flexDirection="column",mt){const f=i.fontSize?i.fontSize:window.getComputedStyle(document.body).fontSize,M=parseInt(f,10)*5+"px";st.style.minWidth=M,st.style.maxWidth=M}else st.style.width="100%";gt(st)}(0,s.K2)(k,"setupImage"),setTimeout(()=>{st.complete&&k()}),st.addEventListener("error",k),st.addEventListener("load",k)})))}j=B.getBoundingClientRect(),$.attr("width",j.width),$.attr("height",j.height)}return a?d.attr("transform","translate("+-j.width/2+", "+-j.height/2+")"):d.attr("transform","translate(0, "+-j.height/2+")"),t.centerLabel&&d.attr("transform","translate("+-j.width/2+", "+-j.height/2+")"),d.insert("rect",":first-child"),{shapeSvg:l,bbox:j,halfPadding:O,label:d}},"labelHelper"),et=(0,s.K2)((e,t)=>{const n=t.node().getBBox();e.width=n.width,e.height=n.height},"updateNodeBounds");function yt(e,t,n,o){return e.insert("polygon",":first-child").attr("points",o.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}(0,s.K2)(yt,"insertPolygonShape");var zt=(0,s.K2)(async(e,t)=>{t.useHtmlLabels||(0,s.D7)().flowchart.htmlLabels||(t.centerLabel=!0);const{shapeSvg:o,bbox:i,halfPadding:r}=await rt(e,t,"node "+t.classes,!0);s.Rm.info("Classes = ",t.classes);const a=o.insert("rect",":first-child");return a.attr("rx",t.rx).attr("ry",t.ry).attr("x",-i.width/2-r).attr("y",-i.height/2-r).attr("width",i.width+t.padding).attr("height",i.height+t.padding),et(t,a),t.intersect=function(l){return V.rect(t,l)},o},"note"),we=zt,Jt=(0,s.K2)(e=>e?" "+e:"","formatClass"),Et=(0,s.K2)((e,t)=>`${t||"node default"}${Jt(e.classes)} ${Jt(e.class)}`,"getClassesFromNode"),it=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=i+r,l=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];s.Rm.info("Question main (Circle)");const d=yt(n,a,a,l);return d.attr("style",t.style),et(t,d),t.intersect=function(y){return s.Rm.warn("Intersect called"),V.polygon(t,l,y)},n},"question"),ke=(0,s.K2)((e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),o=28,i=[{x:0,y:o/2},{x:o/2,y:0},{x:0,y:-o/2},{x:-o/2,y:0}];return n.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(a){return V.circle(t,14,a)},n},"choice"),cs=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=4,r=o.height+t.padding,a=r/i,l=o.width+2*a+t.padding,d=[{x:a,y:0},{x:l-a,y:0},{x:l,y:-r/2},{x:l-a,y:-r},{x:a,y:-r},{x:0,y:-r/2}],y=yt(n,l,r,d);return y.attr("style",t.style),et(t,y),t.intersect=function(u){return V.polygon(t,d,u)},n},"hexagon"),D=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,void 0,!0),i=2,r=o.height+2*t.padding,a=r/i,l=o.width+2*a+t.padding,d=p(t.directions,o,t),y=yt(n,l,r,d);return y.attr("style",t.style),et(t,y),t.intersect=function(u){return V.polygon(t,d,u)},n},"block_arrow"),dt=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:-r/2,y:0},{x:i,y:0},{x:i,y:-r},{x:-r/2,y:-r},{x:0,y:-r/2}];return yt(n,i,r,a).attr("style",t.style),t.width=i+r,t.height=r,t.intersect=function(d){return V.polygon(t,a,d)},n},"rect_left_inv_arrow"),Tt=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:-2*r/6,y:0},{x:i-r/6,y:0},{x:i+2*r/6,y:-r},{x:r/6,y:-r}],l=yt(n,i,r,a);return l.attr("style",t.style),et(t,l),t.intersect=function(d){return V.polygon(t,a,d)},n},"lean_right"),ae=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:2*r/6,y:0},{x:i+r/6,y:0},{x:i-2*r/6,y:-r},{x:-r/6,y:-r}],l=yt(n,i,r,a);return l.attr("style",t.style),et(t,l),t.intersect=function(d){return V.polygon(t,a,d)},n},"lean_left"),De=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:-2*r/6,y:0},{x:i+2*r/6,y:0},{x:i-r/6,y:-r},{x:r/6,y:-r}],l=yt(n,i,r,a);return l.attr("style",t.style),et(t,l),t.intersect=function(d){return V.polygon(t,a,d)},n},"trapezoid"),Ht=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:r/6,y:0},{x:i-r/6,y:0},{x:i+2*r/6,y:-r},{x:-2*r/6,y:-r}],l=yt(n,i,r,a);return l.attr("style",t.style),et(t,l),t.intersect=function(d){return V.polygon(t,a,d)},n},"inv_trapezoid"),It=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:0,y:0},{x:i+r/2,y:0},{x:i,y:-r/2},{x:i+r/2,y:-r},{x:0,y:-r}],l=yt(n,i,r,a);return l.attr("style",t.style),et(t,l),t.intersect=function(d){return V.polygon(t,a,d)},n},"rect_right_inv_arrow"),Oe=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=i/2,a=r/(2.5+i/50),l=o.height+a+t.padding,d="M 0,"+a+" a "+r+","+a+" 0,0,0 "+i+" 0 a "+r+","+a+" 0,0,0 "+-i+" 0 l 0,"+l+" a "+r+","+a+" 0,0,0 "+i+" 0 l 0,"+-l,y=n.attr("label-offset-y",a).insert("path",":first-child").attr("style",t.style).attr("d",d).attr("transform","translate("+-i/2+","+-(l/2+a)+")");return et(t,y),t.intersect=function(u){const E=V.rect(t,u),j=E.x-t.x;if(r!=0&&(Math.abs(j)<t.width/2||Math.abs(j)==t.width/2&&Math.abs(E.y-t.y)>t.height/2-a)){let O=a*a*(1-j*j/(r*r));O!=0&&(O=Math.sqrt(O)),O=a-O,u.y-t.y>0&&(O=-O),E.y+=O}return E},n},"cylinder"),Te=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o,halfPadding:i}=await rt(e,t,"node "+t.classes+" "+t.class,!0),r=n.insert("rect",":first-child"),a=t.positioned?t.width:o.width+t.padding,l=t.positioned?t.height:o.height+t.padding,d=t.positioned?-a/2:-o.width/2-i,y=t.positioned?-l/2:-o.height/2-i;if(r.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",d).attr("y",y).attr("width",a).attr("height",l),t.props){const u=new Set(Object.keys(t.props));t.props.borders&&(Ft(r,t.props.borders,a,l),u.delete("borders")),u.forEach(E=>{s.Rm.warn(`Unknown node property ${E}`)})}return et(t,r),t.intersect=function(u){return V.rect(t,u)},n},"rect"),ds=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o,halfPadding:i}=await rt(e,t,"node "+t.classes,!0),r=n.insert("rect",":first-child"),a=t.positioned?t.width:o.width+t.padding,l=t.positioned?t.height:o.height+t.padding,d=t.positioned?-a/2:-o.width/2-i,y=t.positioned?-l/2:-o.height/2-i;if(r.attr("class","basic cluster composite label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",d).attr("y",y).attr("width",a).attr("height",l),t.props){const u=new Set(Object.keys(t.props));t.props.borders&&(Ft(r,t.props.borders,a,l),u.delete("borders")),u.forEach(E=>{s.Rm.warn(`Unknown node property ${E}`)})}return et(t,r),t.intersect=function(u){return V.rect(t,u)},n},"composite"),ts=(0,s.K2)(async(e,t)=>{const{shapeSvg:n}=await rt(e,t,"label",!0);s.Rm.trace("Classes = ",t.class);const o=n.insert("rect",":first-child"),i=0,r=0;if(o.attr("width",i).attr("height",r),n.attr("class","label edgeLabel"),t.props){const a=new Set(Object.keys(t.props));t.props.borders&&(Ft(o,t.props.borders,i,r),a.delete("borders")),a.forEach(l=>{s.Rm.warn(`Unknown node property ${l}`)})}return et(t,o),t.intersect=function(a){return V.rect(t,a)},n},"labelRect");function Ft(e,t,n,o){const i=[],r=(0,s.K2)(l=>{i.push(l,0)},"addBorder"),a=(0,s.K2)(l=>{i.push(0,l)},"skipBorder");t.includes("t")?(s.Rm.debug("add top border"),r(n)):a(n),t.includes("r")?(s.Rm.debug("add right border"),r(o)):a(o),t.includes("b")?(s.Rm.debug("add bottom border"),r(n)):a(n),t.includes("l")?(s.Rm.debug("add left border"),r(o)):a(o),e.attr("stroke-dasharray",i.join(" "))}(0,s.K2)(Ft,"applyNodePropertyBorders");var es=(0,s.K2)((e,t)=>{let n;t.classes?n="node "+t.classes:n="node default";const o=e.insert("g").attr("class",n).attr("id",t.domId||t.id),i=o.insert("rect",":first-child"),r=o.insert("line"),a=o.insert("g").attr("class","label"),l=t.labelText.flat?t.labelText.flat():t.labelText;let d="";typeof l=="object"?d=l[0]:d=l,s.Rm.info("Label text abc79",d,l,typeof l=="object");const y=a.node().appendChild(Dt(d,t.labelStyle,!0,!0));let u={width:0,height:0};if((0,s._3)((0,s.D7)().flowchart.htmlLabels)){const $=y.children[0],U=(0,C.Ltv)(y);u=$.getBoundingClientRect(),U.attr("width",u.width),U.attr("height",u.height)}s.Rm.info("Text 2",l);const E=l.slice(1,l.length);let j=y.getBBox();const O=a.node().appendChild(Dt(E.join?E.join("<br/>"):E,t.labelStyle,!0,!0));if((0,s._3)((0,s.D7)().flowchart.htmlLabels)){const $=O.children[0],U=(0,C.Ltv)(O);u=$.getBoundingClientRect(),U.attr("width",u.width),U.attr("height",u.height)}const B=t.padding/2;return(0,C.Ltv)(O).attr("transform","translate( "+(u.width>j.width?0:(j.width-u.width)/2)+", "+(j.height+B+5)+")"),(0,C.Ltv)(y).attr("transform","translate( "+(u.width<j.width?0:-(j.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-B+3)+")"),i.attr("class","outer title-state").attr("x",-u.width/2-B).attr("y",-u.height/2-B).attr("width",u.width+t.padding).attr("height",u.height+t.padding),r.attr("class","divider").attr("x1",-u.width/2-B).attr("x2",u.width/2+B).attr("y1",-u.height/2-B+j.height+B).attr("y2",-u.height/2-B+j.height+B),et(t,i),t.intersect=function($){return V.rect(t,$)},o},"rectWithTitle"),ss=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.height+t.padding,r=o.width+i/4+t.padding,a=n.insert("rect",":first-child").attr("style",t.style).attr("rx",i/2).attr("ry",i/2).attr("x",-r/2).attr("y",-i/2).attr("width",r).attr("height",i);return et(t,a),t.intersect=function(l){return V.rect(t,l)},n},"stadium"),hs=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o,halfPadding:i}=await rt(e,t,Et(t,void 0),!0),r=n.insert("circle",":first-child");return r.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",o.width/2+i).attr("width",o.width+t.padding).attr("height",o.height+t.padding),s.Rm.info("Circle main"),et(t,r),t.intersect=function(a){return s.Rm.info("Circle intersect",t,o.width/2+i,a),V.circle(t,o.width/2+i,a)},n},"circle"),rs=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o,halfPadding:i}=await rt(e,t,Et(t,void 0),!0),r=5,a=n.insert("g",":first-child"),l=a.insert("circle"),d=a.insert("circle");return a.attr("class",t.class),l.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",o.width/2+i+r).attr("width",o.width+t.padding+r*2).attr("height",o.height+t.padding+r*2),d.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",o.width/2+i).attr("width",o.width+t.padding).attr("height",o.height+t.padding),s.Rm.info("DoubleCircle main"),et(t,l),t.intersect=function(y){return s.Rm.info("DoubleCircle intersect",t,o.width/2+i+r,y),V.circle(t,o.width/2+i+r,y)},n},"doublecircle"),Gt=(0,s.K2)(async(e,t)=>{const{shapeSvg:n,bbox:o}=await rt(e,t,Et(t,void 0),!0),i=o.width+t.padding,r=o.height+t.padding,a=[{x:0,y:0},{x:i,y:0},{x:i,y:-r},{x:0,y:-r},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-r},{x:-8,y:-r},{x:-8,y:0}],l=yt(n,i,r,a);return l.attr("style",t.style),et(t,l),t.intersect=function(d){return V.polygon(t,a,d)},n},"subroutine"),Qt=(0,s.K2)((e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),o=n.insert("circle",":first-child");return o.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),et(t,o),t.intersect=function(i){return V.circle(t,7,i)},n},"start"),ys=(0,s.K2)((e,t,n)=>{const o=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i=70,r=10;n==="LR"&&(i=10,r=70);const a=o.append("rect").attr("x",-1*i/2).attr("y",-1*r/2).attr("width",i).attr("height",r).attr("class","fork-join");return et(t,a),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(l){return V.rect(t,l)},o},"forkJoin"),Os=(0,s.K2)((e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),o=n.insert("circle",":first-child"),i=n.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),o.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),et(t,i),t.intersect=function(r){return V.circle(t,7,r)},n},"end"),Ts=(0,s.K2)((e,t)=>{const n=t.padding/2,o=4,i=8;let r;t.classes?r="node "+t.classes:r="node default";const a=e.insert("g").attr("class",r).attr("id",t.domId||t.id),l=a.insert("rect",":first-child"),d=a.insert("line"),y=a.insert("line");let u=0,E=o;const j=a.insert("g").attr("class","label");let O=0;const B=t.classData.annotations?.[0],$=t.classData.annotations[0]?"\xAB"+t.classData.annotations[0]+"\xBB":"",U=j.node().appendChild(Dt($,t.labelStyle,!0,!0));let mt=U.getBBox();if((0,s._3)((0,s.D7)().flowchart.htmlLabels)){const H=U.children[0],h=(0,C.Ltv)(U);mt=H.getBoundingClientRect(),h.attr("width",mt.width),h.attr("height",mt.height)}t.classData.annotations[0]&&(E+=mt.height+o,u+=mt.width);let st=t.classData.label;t.classData.type!==void 0&&t.classData.type!==""&&((0,s.D7)().flowchart.htmlLabels?st+="&lt;"+t.classData.type+"&gt;":st+="<"+t.classData.type+">");const gt=j.node().appendChild(Dt(st,t.labelStyle,!0,!0));(0,C.Ltv)(gt).attr("class","classTitle");let k=gt.getBBox();if((0,s._3)((0,s.D7)().flowchart.htmlLabels)){const H=gt.children[0],h=(0,C.Ltv)(gt);k=H.getBoundingClientRect(),h.attr("width",k.width),h.attr("height",k.height)}E+=k.height+o,k.width>u&&(u=k.width);const f=[];t.classData.members.forEach(H=>{const h=H.getDisplayDetails();let Pt=h.displayText;(0,s.D7)().flowchart.htmlLabels&&(Pt=Pt.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const m=j.node().appendChild(Dt(Pt,h.cssStyle?h.cssStyle:t.labelStyle,!0,!0));let St=m.getBBox();if((0,s._3)((0,s.D7)().flowchart.htmlLabels)){const ne=m.children[0],Xt=(0,C.Ltv)(m);St=ne.getBoundingClientRect(),Xt.attr("width",St.width),Xt.attr("height",St.height)}St.width>u&&(u=St.width),E+=St.height+o,f.push(m)}),E+=i;const A=[];if(t.classData.methods.forEach(H=>{const h=H.getDisplayDetails();let Pt=h.displayText;(0,s.D7)().flowchart.htmlLabels&&(Pt=Pt.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const m=j.node().appendChild(Dt(Pt,h.cssStyle?h.cssStyle:t.labelStyle,!0,!0));let St=m.getBBox();if((0,s._3)((0,s.D7)().flowchart.htmlLabels)){const ne=m.children[0],Xt=(0,C.Ltv)(m);St=ne.getBoundingClientRect(),Xt.attr("width",St.width),Xt.attr("height",St.height)}St.width>u&&(u=St.width),E+=St.height+o,A.push(m)}),E+=i,B){let H=(u-mt.width)/2;(0,C.Ltv)(U).attr("transform","translate( "+(-1*u/2+H)+", "+-1*E/2+")"),O=mt.height+o}let M=(u-k.width)/2;return(0,C.Ltv)(gt).attr("transform","translate( "+(-1*u/2+M)+", "+(-1*E/2+O)+")"),O+=k.height+o,d.attr("class","divider").attr("x1",-u/2-n).attr("x2",u/2+n).attr("y1",-E/2-n+i+O).attr("y2",-E/2-n+i+O),O+=i,f.forEach(H=>{(0,C.Ltv)(H).attr("transform","translate( "+-u/2+", "+(-1*E/2+O+i/2)+")");const h=H?.getBBox();O+=(h?.height??0)+o}),O+=i,y.attr("class","divider").attr("x1",-u/2-n).attr("x2",u/2+n).attr("y1",-E/2-n+i+O).attr("y2",-E/2-n+i+O),O+=i,A.forEach(H=>{(0,C.Ltv)(H).attr("transform","translate( "+-u/2+", "+(-1*E/2+O)+")");const h=H?.getBBox();O+=(h?.height??0)+o}),l.attr("style",t.style).attr("class","outer title-state").attr("x",-u/2-n).attr("y",-(E/2)-n).attr("width",u+t.padding).attr("height",E+t.padding),et(t,l),t.intersect=function(H){return V.rect(t,H)},a},"class_box"),ms={rhombus:it,composite:ds,question:it,rect:Te,labelRect:ts,rectWithTitle:es,choice:ke,circle:hs,doublecircle:rs,stadium:ss,hexagon:cs,block_arrow:D,rect_left_inv_arrow:dt,lean_right:Tt,lean_left:ae,trapezoid:De,inv_trapezoid:Ht,rect_right_inv_arrow:It,cylinder:Oe,start:Qt,end:Os,note:we,subroutine:Gt,fork:ys,join:ys,class_box:Ts},as={},xs=(0,s.K2)(async(e,t,n)=>{let o,i;if(t.link){let r;(0,s.D7)().securityLevel==="sandbox"?r="_top":t.linkTarget&&(r=t.linkTarget||"_blank"),o=e.insert("svg:a").attr("xlink:href",t.link).attr("target",r),i=await ms[t.shape](o,t,n)}else i=await ms[t.shape](e,t,n),o=i;return t.tooltip&&i.attr("title",t.tooltip),t.class&&i.attr("class","node default "+t.class),as[t.id]=o,t.haveCallback&&as[t.id].attr("class",as[t.id].attr("class")+" clickable"),o},"insertNode"),Is=(0,s.K2)(e=>{const t=as[e.id];s.Rm.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const n=8,o=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+o-e.width/2)+", "+(e.y-e.height/2-n)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),o},"positionNode");function us(e,t,n=!1){const o=e;let i="default";(o?.classes?.length||0)>0&&(i=(o?.classes??[]).join(" ")),i=i+" flowchart-label";let r=0,a="",l;switch(o.type){case"round":r=5,a="rect";break;case"composite":r=0,a="composite",l=0;break;case"square":a="rect";break;case"diamond":a="question";break;case"hexagon":a="hexagon";break;case"block_arrow":a="block_arrow";break;case"odd":a="rect_left_inv_arrow";break;case"lean_right":a="lean_right";break;case"lean_left":a="lean_left";break;case"trapezoid":a="trapezoid";break;case"inv_trapezoid":a="inv_trapezoid";break;case"rect_left_inv_arrow":a="rect_left_inv_arrow";break;case"circle":a="circle";break;case"ellipse":a="ellipse";break;case"stadium":a="stadium";break;case"subroutine":a="subroutine";break;case"cylinder":a="cylinder";break;case"group":a="rect";break;case"doublecircle":a="doublecircle";break;default:a="rect"}const d=(0,b.sM)(o?.styles??[]),y=o.label,u=o.size??{width:0,height:0,x:0,y:0};return{labelStyle:d.labelStyle,shape:a,labelText:y,rx:r,ry:r,class:i,style:d.style,id:o.id,directions:o.directions,width:u.width,height:u.height,x:u.x,y:u.y,positioned:n,intersect:void 0,type:o.type,padding:l??(0,s.zj)()?.block?.padding??0}}(0,s.K2)(us,"getNodeFromBlock");async function vs(e,t,n){const o=us(t,n,!1);if(o.type==="group")return;const i=(0,s.zj)(),r=await xs(e,o,{config:i}),a=r.node().getBBox(),l=n.getBlock(o.id);l.size={width:a.width,height:a.height,x:0,y:0,node:r},n.setBlock(l),r.remove()}(0,s.K2)(vs,"calculateBlockSize");async function As(e,t,n){const o=us(t,n,!0);if(n.getBlock(o.id).type!=="space"){const r=(0,s.zj)();await xs(e,o,{config:r}),t.intersect=o?.intersect,Is(o)}}(0,s.K2)(As,"insertBlockPositioned");async function ns(e,t,n,o){for(const i of t)await o(e,i,n),i.children&&await ns(e,i.children,n,o)}(0,s.K2)(ns,"performOperations");async function Ls(e,t,n){await ns(e,t,n,vs)}(0,s.K2)(Ls,"calculateBlockSizes");async function Es(e,t,n){await ns(e,t,n,As)}(0,s.K2)(Es,"insertBlocks");async function Ss(e,t,n,o,i){const r=new W.T({multigraph:!0,compound:!0});r.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const a of n)a.size&&r.setNode(a.id,{width:a.size.width,height:a.size.height,intersect:a.intersect});for(const a of t)if(a.start&&a.end){const l=o.getBlock(a.start),d=o.getBlock(a.end);if(l?.size&&d?.size){const y=l.size,u=d.size,E=[{x:y.x,y:y.y},{x:y.x+(u.x-y.x)/2,y:y.y+(u.y-y.y)/2},{x:u.x,y:u.y}];$e(e,{v:a.start,w:a.end,name:a.id},{...a,arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:E,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",r,i),a.label&&(await Ve(e,{...a,label:a.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:E,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),Je({...a,x:E[1].x,y:E[1].y},{originalPath:E}))}}}(0,s.K2)(Ss,"insertEdges");var js=(0,s.K2)(function(e,t){return t.db.getClasses()},"getClasses"),Cs=(0,s.K2)(async function(e,t,n,o){const{securityLevel:i,block:r}=(0,s.zj)(),a=o.db;let l;i==="sandbox"&&(l=(0,C.Ltv)("#i"+t));const d=i==="sandbox"?(0,C.Ltv)(l.nodes()[0].contentDocument.body):(0,C.Ltv)("body"),y=i==="sandbox"?d.select(`[id="${t}"]`):(0,C.Ltv)(`[id="${t}"]`);He(y,["point","circle","cross"],o.type,t);const E=a.getBlocks(),j=a.getBlocksFlat(),O=a.getEdges(),B=y.insert("g").attr("class","block");await Ls(B,E,a);const $=Yt(a);if(await Es(B,E,a),await Ss(B,O,j,a,t),$){const U=$,mt=Math.max(1,Math.round(.125*(U.width/U.height))),st=U.height+mt+10,gt=U.width+10,{useMaxWidth:k}=r;(0,s.a$)(y,st,gt,!!k),s.Rm.debug("Here Bounds",$,U),y.attr("viewBox",`${U.x-5} ${U.y-5} ${U.width+10} ${U.height+10}`)}},"draw"),Rs={draw:Cs,getClasses:js},Ms={parser:P,db:qt,renderer:Rs,styles:Pe}}}]);
